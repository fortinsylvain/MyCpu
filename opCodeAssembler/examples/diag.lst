                ; -----------------------------------------------------------------
                ; Homebrew MyCPU diagnostic program
                ; Author: Sylvain Fortin sylfortin71@hotmail.com
                ; Date : 24 january 2026
                ; Documentation : diag.asm is a test program that verifying every 
                ;                 assembler instructions of MyCPU.
                ; Memory map of the computer
                ; 0000H - 17FFH Total RAM space
                ; 00A0H - 00FFH Stack
                ; E000H - F000H EEPROM for application program
                ; -----------------------------------------------------------------

                ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------

                ?b15     EQU 0x0000
                ?b14     EQU 0x0001
                ?b13     EQU 0x0002
                ?b12     EQU 0x0003
                ?b11     EQU 0x0004
                ?b10     EQU 0x0005
                ?b9      EQU 0x0006
                ?b8      EQU 0x0007
                ?b7      EQU 0x0008
                ?b6      EQU 0x0009
                ?b5      EQU 0x000A
                ?b4      EQU 0x000B
                ?b3      EQU 0x000C
                ?b2      EQU 0x000D
                ?b1      EQU 0x000E
                ?b0      EQU 0x000F

                ?w7      EQU 0x0000  ; ?b15:?b14
                ?w6      EQU 0x0002  ; ?b13:?b12
                ?w5      EQU 0x0004  ; ?b11:?b10
                ?w4      EQU 0x0006  ; ?b9:?b8
                ?w3      EQU 0x0008  ; ?b7:?b6
                ?w2      EQU 0x000A  ; ?b5:?b4
                ?w1      EQU 0x000C  ; ?b3:?b2
                ?w0      EQU 0x000E  ; ?b1:?b0

                ?l3      EQU 0x0000  ; ?b15,?b14,?b13,?b12
                ?l2      EQU 0x0004  ; ?b11,?b10,?b9,?b8
                ?l1      EQU 0x0008  ; ?b7,?b6,?b5,?b4
                ?l0      EQU 0x000C  ; ?b3,?b2,?b1,?b0

                ; RAM Reserved location
                TEMP0    EQU 0x1FEC  ; TEMP0
                TEMP1    EQU 0x1FED  ; TEMP1
                TEMP2    EQU 0x1FEE  ; TEMP2
                TEMP3    EQU 0x1FEF  ; TEMP3
                SP       EQU 0x1FF0  ; SP      Stack Pointer 8 bit
                JSH      EQU 0x1FF1  ; JSH     Temporary storage for JSR MSB address
                JSL      EQU 0x1FF2  ; JSL          "       "     "   "  LSB    "
                XH       EQU 0x1FF3  ; X MSB   X Register MSB
                XL       EQU 0x1FF4  ; X LSB   X Register LSB
                EQUAL    EQU 0x1FFA  ; E       bit<0> Equal Status bit
                CARRY    EQU 0x1FFB  ; C       bit<0> Carry Status bit
                REG_A    EQU 0x1FFC  ; A       A Register
                IPH      EQU 0x1FFE  ; IPH	    Instruction Pointer MSB
                IPL      EQU 0x1FFF  ; IPL          "         "    LSB

                ;--------------------------------------------
                ; LCD Memory-Mapped I/O Addresses
                ;--------------------------------------------
                LCD_CMD  EQU 0x7C00
                LCD_DATA EQU 0x7C01
                ;--------------------------------------------
                ; LED PORT
                ;--------------------------------------------
                LEDPORT  EQU 0xC000  ; PORT for the LED

                ; Program start
                         ORG/0xE000  ; EEPROM Start        
E000 30 00      START    LDA #0x00   ; Clear LED
E002 19                  NOTA
E003 31 C0 00            STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; Test Carry Status bit integrity
                         ; --------------------------------------------------------------------
E006 30 01      TST01    LDA #0x01
E008 19                  NOTA
E009 31 C0 00            STA LEDPORT ; Output to LED port
E00C 30 00               LDA #0x00
E00E 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E011 2A 1F FB            LDA CARRY   ; Read Carry Status
E014 2D 00               CMPA #0x00
E016 2B FF B0            JNE FAIL
E019 30 01               LDA #0x01
E01B 31 1F FB            STA CARRY   ; Write 1 to carry bit <0>
E01E 2A 1F FB            LDA CARRY   ; Read Carry Status
E021 2D 01               CMPA #0x01
E023 2B FF B0            JNE FAIL
E026 30 00               LDA #0x00
E028 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E02B 2A 1F FB            LDA CARRY   ; Read Carry Status
E02E 2D 00               CMPA #0x00
E030 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; Test Equal Status bit integrity
                         ; --------------------------------------------------------------------
E033 30 02      TST02    LDA #0x02
E035 19                  NOTA
E036 31 C0 00            STA LEDPORT ; Output to LED port
E039 30 00               LDA #0x00
E03B 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E03E 2A 1F FA            LDA EQUAL   ; Read Equal Status
E041 2D 00               CMPA #0x00
E043 2B FF B0            JNE FAIL
E046 30 01               LDA #0x01
E048 31 1F FA            STA EQUAL   ; Write 1 to Equal Status bit <0>
E04B 2A 1F FA            LDA EQUAL   ; Read Equal Status
E04E 2D 01               CMPA #0x01
E050 2B FF B0            JNE FAIL
E053 30 00               LDA #0x00
E055 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E058 2A 1F FA            LDA EQUAL   ; Read Equal Status
E05B 2D 00               CMPA #0x00
E05D 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.03 INCA  A = A + 1  INCREMENT REGISTRE A
                         ; E UPDATE, C unchanged
                         ; --------------------------------------------------------------------
E060 30 03      TSTOP03  LDA #0x03
E062 19                  NOTA
E063 31 C0 00            STA LEDPORT ; Output to LED port
E066 30 00               LDA #0x00
E068 03                  INCA
E069 2D 01               CMPA #0x01
E06B 2B FF B0            JNE FAIL
E06E 30 01               LDA #0x01
E070 03                  INCA
E071 2D 02               CMPA #0x02
E073 2B FF B0            JNE FAIL
E076 30 7C               LDA #0x7C
E078 03                  INCA
E079 03                  INCA
E07A 03                  INCA
E07B 03                  INCA
E07C 03                  INCA
E07D 03                  INCA
E07E 03                  INCA
E07F 03                  INCA
E080 03                  INCA
E081 03                  INCA
E082 2D 86               CMPA #0x86
E084 2B FF B0            JNE FAIL
E087 30 FE               LDA #0xFE
E089 03                  INCA
E08A 2D FF               CMPA #0xFF
E08C 2B FF B0            JNE FAIL
E08F 30 FF               LDA #0xFF
E091 03                  INCA
E092 2D 00               CMPA #0x00
E094 2B FF B0            JNE FAIL
E097 30 FF               LDA #0xFF
E099 03                  INCA
E09A 03                  INCA
E09B 2D 01               CMPA #0x01
E09D 2B FF B0            JNE FAIL
E0A0 03                  INCA
E0A1 03                  INCA
E0A2 03                  INCA
E0A3 03                  INCA
E0A4 2D 05               CMPA #0x05
E0A6 2B FF B0            JNE FAIL
E0A9 03                  INCA
E0AA 03                  INCA
E0AB 03                  INCA
E0AC 03                  INCA
E0AD 03                  INCA
E0AE 03                  INCA
E0AF 03                  INCA
E0B0 03                  INCA
E0B1 2D 0D               CMPA #0x0D
E0B3 2B FF B0            JNE FAIL
E0B6 30 00               LDA #0x00   ; Test Carry unchanged
E0B8 31 1F FB            STA CARRY   ; Clear Carry 
E0BB 30 FF               LDA #0xFF
E0BD 03                  INCA
E0BE 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0C1 2D 00               CMPA #0x00  ; Expecting C=0 and <7:1> = 0
E0C3 2B FF B0            JNE FAIL
E0C6 30 01               LDA #0x01   ; Set Carry 
E0C8 31 1F FB            STA CARRY   
E0CB 30 EB               LDA #0xEB
E0CD 03                  INCA
E0CE 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0D1 2D 01               CMPA #0x01  ; Expecting C=1 and <7:1> = 0
E0D3 2B FF B0            JNE FAIL
E0D6 30 FE               LDA #0xFE   ; Test Equal (Set when result is 0)
E0D8 03                  INCA
E0D9 2A 1F FA            LDA EQUAL   ; Read Equal status
E0DC 2D 00               CMPA #0x00  ; Expecting E=0 and <7:1> = 0
E0DE 2B FF B0            JNE FAIL
E0E1 30 FF               LDA #0xFF
E0E3 03                  INCA
E0E4 2A 1F FA            LDA EQUAL   ; Read Equal status
E0E7 2D 01               CMPA #0x01  ; Expecting E=1 and <7:1> = 0
E0E9 2B FF B0            JNE FAIL
E0EC 30 00               LDA #0x00
E0EE 03                  INCA
E0EF 2A 1F FA            LDA EQUAL
E0F2 2D 00               CMPA #0x00  ; Expecting E=0 and <7:1> = 0
E0F4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.04  LDX #0x****   Load X Register with 16 bits immediate value
                         ; --------------------------------------------------------------------
E0F7 30 04      TSTOP04  LDA #0x04
E0F9 19                  NOTA
E0FA 31 C0 00            STA LEDPORT ; Output to LED port
E0FD 04 12 34            LDX #0x1234
E100 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E103 2D 12               CMPA #0x12
E105 2B FF B0            JNE FAIL
E108 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E10B 2D 34               CMPA #0x34
E10D 2B FF B0            JNE FAIL
E110 04 AB CD            LDX #0xABCD
E113 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E116 2D AB               CMPA #0xAB
E118 2B FF B0            JNE FAIL
E11B 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E11E 2D CD               CMPA #0xCD
E120 2B FF B0            JNE FAIL
                         ; Test using symbolic
E123 04 00 0F            LDX #?b0    ; ?b0      EQU 0x000F
E126 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E129 2D 00               CMPA #0x00
E12B 2B FF B0            JNE FAIL
E12E 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E131 2D 0F               CMPA #0x0F
E133 2B FF B0            JNE FAIL
E136 04 1F F0            LDX #SP     ; SP       EQU 0x1FF0
E139 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E13C 2D 1F               CMPA #0x1F
E13E 2B FF B0            JNE FAIL
E141 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E144 2D F0               CMPA #0xF0
E146 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.05  INCX   Increment Register X,  Carry Not Updated
                         ; --------------------------------------------------------------------
E149 30 05      TSTOP05  LDA #0x05
E14B 19                  NOTA
E14C 31 C0 00            STA LEDPORT ; Output to LED port
E14F 04 00 00            LDX #0x0000 ; Clear X register
E152 05                  INCX        ; Increment X
E153 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E156 2D 01               CMPA #0x01
E158 2B FF B0            JNE FAIL
E15B 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E15E 2D 00               CMPA #0x00
E160 2B FF B0            JNE FAIL
E163 05                  INCX
E164 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E167 2D 02               CMPA #0x02
E169 2B FF B0            JNE FAIL
E16C 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E16F 2D 00               CMPA #0x00
E171 2B FF B0            JNE FAIL

E174 04 00 FF            LDX #0x00FF ; Test a carry set
E177 05                  INCX        ; Increment X
E178 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E17B 2D 00               CMPA #0x00
E17D 2B FF B0            JNE FAIL
E180 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E183 2D 01               CMPA #0x01
E185 2B FF B0            JNE FAIL
E188 05                  INCX        ; Increment X
E189 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E18C 2D 01               CMPA #0x01
E18E 2B FF B0            JNE FAIL
E191 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E194 2D 01               CMPA #0x01
E196 2B FF B0            JNE FAIL

E199 04 1E FF            LDX #0x1EFF
E19C 05                  INCX        ; Increment X
E19D 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1A0 2D 00               CMPA #0x00
E1A2 2B FF B0            JNE FAIL
E1A5 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1A8 2D 1F               CMPA #0x1F
E1AA 2B FF B0            JNE FAIL

E1AD 04 FF FF            LDX #0xFFFF
E1B0 05                  INCX        ; Increment X
E1B1 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1B4 2D 00               CMPA #0x00
E1B6 2B FF B0            JNE FAIL
E1B9 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1BC 2D 00               CMPA #0x00
E1BE 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.06 JSR    Jump to SubRoutine
                         ; --------------------------------------------------------------------
E1C1 30 06      TSTOP06  LDA #0x06
E1C3 19                  NOTA
E1C4 31 C0 00            STA LEDPORT ; Output to LED port
E1C7 06 FF C0            JSR TJSR1   ; 1 layer
E1CA 06 FF C3            JSR TJSR2   ; 2
E1CD 06 FF C9            JSR TJSR3   ; 3
E1D0 06 FF CF            JSR TJSR4   ; 4
E1D3 06 FF D5            JSR TJSR5   ; 5
E1D6 06 FF DB            JSR TJSR6   ; 6
E1D9 06 FF E1            JSR TJSR7   ; 7
E1DC 06 FF E7            JSR TJSR8   ; 8
E1DF 06 FF ED            JSR TJSR9   ; 9
E1E2 06 FF F3            JSR TJSR10  ; 10
                         ; --------------------------------------------------------------------
                         ; OP.07 RTS    ReTurn from Subroutine
                         ; Tested in OP.06 JSR
                         ; --------------------------------------------------------------------
                         ;LDA #07H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.08 STOP
                         ; STOP EXECUTING
                         ; Cannot test here it will stop execution...
                         ; A diagnostic test failure is expected to call this instruction ending 
                         ; program exectution.
                         ; --------------------------------------------------------------------
                         ;LDA #08H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ;STOP
                         ; --------------------------------------------------------------------
                         ; OP.09 NOP   NO OPERATION
                         ; --------------------------------------------------------------------
E1E5 30 09      TSTOP09  LDA #0x09
E1E7 19                  NOTA
E1E8 31 C0 00            STA LEDPORT ; Output to LED port
E1EB 09                  NOP
E1EC 09                  NOP
E1ED 09                  NOP
                         ; --------------------------------------------------------------------
                         ; OP.0A LDA (X) Load Reg A Indexed
                         ; --------------------------------------------------------------------
E1EE 30 0A      TSTOP0A  LDA #0x0A
E1F0 19                  NOTA
E1F1 31 C0 00            STA LEDPORT ; Output to LED port
E1F4 30 55               LDA #0x55   ; Store some value in RAM
E1F6 31 01 00            STA 0x0100
E1F9 30 AA               LDA #0xAA
E1FB 31 01 01            STA 0x0101
E1FE 30 DE               LDA #0xDE
E200 31 01 F0            STA 0x01F0
E203 30 CA               LDA #0xCA
E205 31 01 FF            STA 0x01FF
E208 04 01 00            LDX #0x0100 ; Verify each locations
E20B 0A                  LDA (X)
E20C 2D 55               CMPA #0x55
E20E 2B FF B0            JNE FAIL    ; Jump if result not good
E211 04 01 01            LDX #0x0101
E214 0A                  LDA (X)
E215 2D AA               CMPA #0xAA
E217 2B FF B0            JNE FAIL
E21A 04 01 F0            LDX #0x01F0
E21D 0A                  LDA (X)
E21E 2D DE               CMPA #0xDE
E220 2B FF B0            JNE FAIL
E223 04 01 FF            LDX #0x01FF
E226 0A                  LDA (X)
E227 2D CA               CMPA #0xCA
E229 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.0B STA (X) Store Reg A Indexed
                         ; --------------------------------------------------------------------
E22C 30 0B      TSTOP0B  LDA #0x0B
E22E 19                  NOTA
E22F 31 C0 00            STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.0C JRA 0x** Unconditional relative jump
                         ; --------------------------------------------------------------------
                         ; Testing using hexadecimal value after the mnemonic
E232 30 0C               LDA #0x0C
E234 19                  NOTA
E235 31 C0 00            STA LEDPORT ; Output to LED port
E238 0C 00               JRA 0x00    ; Test jump foward, Execute next instruction
E23A 0C 01               JRA 0x01    ; Skip next instruction
E23C 09                  NOP         ; 1
E23D 0C 02               JRA 0x02    ; Skip next 2 instructions
E23F 09                  NOP         ; 1
E240 09                  NOP         ; 2
E241 0C 03               JRA 0x03    ; Skip next 3 instructions
E243 09                  NOP         ; 1 
E244 09                  NOP         ; 2
E245 09                  NOP         ; 3
E246 0C 05               JRA 0x05    ; Skip next 5 instructions
E248 09                  NOP         ; 1
E249 09                  NOP         ; 2
E24A 09                  NOP         ; 3
E24B 09                  NOP         ; 4
E24C 09                  NOP         ; 5
E24D 0C 10               JRA 0x10    ; Skip next 16 instructions
E24F 09                  NOP         ; 1
E250 09                  NOP         ; 2
E251 09                  NOP         ; 3
E252 09                  NOP         ; 4
E253 09                  NOP         ; 5
E254 09                  NOP         ; 6
E255 09                  NOP         ; 7
E256 09                  NOP         ; 8
E257 09                  NOP         ; 9
E258 09                  NOP         ; 10
E259 09                  NOP         ; 11
E25A 09                  NOP         ; 12
E25B 09                  NOP         ; 13
E25C 09                  NOP         ; 14
E25D 09                  NOP         ; 15
E25E 09                  NOP         ; 16
E25F 0C 22               JRA 0x22    ; Skip next 34 bytes
E261 09                  NOP         ; 1
E262 09                  NOP         ; 2
E263 09                  NOP         ; 3
E264 0C 1F               JRA 0x1F   ; 4-5   Final jump to the end of thest
E266 09                  NOP         ; 6
E267 09                  NOP         ; 7
E268 09                  NOP         ; 8
E269 09                  NOP         ; 9
E26A 09                  NOP         ; 10
E26B 09                  NOP         ; 11
E26C 09                  NOP         ; 12
E26D 09                  NOP         ; 13
E26E 09                  NOP         ; 14
E26F 09                  NOP         ; 15
E270 09                  NOP         ; 16
E271 09                  NOP         ; 17
E272 09                  NOP         ; 18
E273 09                  NOP         ; 19
E274 09                  NOP         ; 20
E275 09                  NOP         ; 21
E276 09                  NOP         ; 22
E277 09                  NOP         ; 23
E278 09                  NOP         ; 24
E279 09                  NOP         ; 25
E27A 0C E8               JRA 0xE8    ; 26-27 Third Backward jump
E27C 09                  NOP         ; 28
E27D 09                  NOP         ; 29
E27E 09                  NOP         ; 30
E27F 09                  NOP         ; 31
E280 09                  NOP         ; 32
E281 0C F7               JRA 0xF7    ; 33-34 Second Backward jump
E283 0C FC               JRA 0xFC    ; First Backward jump
E285 09                  NOP         ; Arrival of the last jump to end the test
                         ; Testing using symbolic address after the mnemonic
E286 0C 00               JRA TST0B_0 ; Test jump foward, Execute next instruction
E288 0C 01      TST0B_0  JRA TST0B_1 ; Skip next instruction
E28A 09                  NOP         ; 1
E28B 0C 02      TST0B_1  JRA TST0B_2 ; Skip next 2 instructions
E28D 09                  NOP         ; 1
E28E 09                  NOP         ; 2
E28F 0C 03      TST0B_2  JRA TST0B_3 ; Skip next 3 instructions
E291 09                  NOP         ; 1 
E292 09                  NOP         ; 2
E293 09                  NOP         ; 3
E294 0C 05      TST0B_3  JRA TST0B_4 ; Skip next 5 instructions
E296 09                  NOP         ; 1
E297 09                  NOP         ; 2
E298 09                  NOP         ; 3
E299 09                  NOP         ; 4
E29A 09                  NOP         ; 5
E29B 0C 10      TST0B_4  JRA TST0B_5 ; Skip next 16 instructions
E29D 09                  NOP         ; 1
E29E 09                  NOP         ; 2
E29F 09                  NOP         ; 3
E2A0 09                  NOP         ; 4
E2A1 09                  NOP         ; 5
E2A2 09                  NOP         ; 6
E2A3 09                  NOP         ; 7
E2A4 09                  NOP         ; 8
E2A5 09                  NOP         ; 9
E2A6 09                  NOP         ; 10
E2A7 09                  NOP         ; 11
E2A8 09                  NOP         ; 12
E2A9 09                  NOP         ; 13
E2AA 09                  NOP         ; 14
E2AB 09                  NOP         ; 15
E2AC 09                  NOP         ; 16
E2AD 0C 22      TST0B_5  JRA TST0B_9 ; Skip next 34 bytes
E2AF 09                  NOP         ; 1
E2B0 09                  NOP         ; 2
E2B1 09                  NOP         ; 3
E2B2 0C 1F      TST0B_6  JRA TST0B_10 ; 4-5   Final jump to the end of test
E2B4 09                  NOP         ; 6
E2B5 09                  NOP         ; 7
E2B6 09                  NOP         ; 8
E2B7 09                  NOP         ; 9
E2B8 09                  NOP         ; 10
E2B9 09                  NOP         ; 11
E2BA 09                  NOP         ; 12
E2BB 09                  NOP         ; 13
E2BC 09                  NOP         ; 14
E2BD 09                  NOP         ; 15
E2BE 09                  NOP         ; 16
E2BF 09                  NOP         ; 17
E2C0 09                  NOP         ; 18
E2C1 09                  NOP         ; 19
E2C2 09                  NOP         ; 20
E2C3 09                  NOP         ; 21
E2C4 09                  NOP         ; 22
E2C5 09                  NOP         ; 23
E2C6 09                  NOP         ; 24
E2C7 09                  NOP         ; 25
E2C8 0C E8      TST0B_7  JRA TST0B_6 ; 26-27 Third Backward jump
E2CA 09                  NOP         ; 28
E2CB 09                  NOP         ; 29
E2CC 09                  NOP         ; 30
E2CD 09                  NOP         ; 31
E2CE 09                  NOP         ; 32
E2CF 0C F7      TST0B_8  JRA TST0B_7 ; 33-34 Second Backward jump
E2D1 0C FC      TST0B_9  JRA TST0B_8 ; First Backward jump
E2D3 09         TST0B_10 NOP         ; Arrival of the last jump to end the test
                ;         ; Higher range testing using symbolic address after the mnemonic
E2D4 09                  NOP         ; These NOP make relative jump to exercise carry on MSB address boundary
E2D5 09                  NOP
E2D6 09                  NOP
E2D7 09                  NOP
E2D8 09                  NOP
E2D9 09                  NOP
E2DA 09                  NOP
E2DB 09                  NOP
E2DC 09                  NOP
E2DD 09                  NOP
E2DE 09                  NOP
E2DF 09                  NOP
E2E0 09                  NOP
E2E1 09                  NOP
E2E2 09                  NOP
E2E3 09                  NOP
E2E4 0C 7F               JRA TST0B_12
E2E6 09                  NOP         ; 1     1     
E2E7 09                  NOP
                ;         NOP
                ;         NOP
E2E8 0C 7E      TST0B_11 JRA TST0B_13
E2EA 09                  NOP
E2EB 09                  NOP
E2EC 09                  NOP
E2ED 09                  NOP
E2EE 09                  NOP
E2EF 09                  NOP         
E2F0 09                  NOP
E2F1 09                  NOP
E2F2 09                  NOP
E2F3 09                  NOP
E2F4 09                  NOP
E2F5 09                  NOP         ; 16
E2F6 09                  NOP         ; 1     2   
E2F7 09                  NOP
E2F8 09                  NOP
E2F9 09                  NOP
E2FA 09                  NOP
E2FB 09                  NOP
E2FC 09                  NOP
E2FD 09                  NOP
E2FE 09                  NOP
E2FF 09                  NOP         
E300 09                  NOP
E301 09                  NOP
E302 09                  NOP
E303 09                  NOP
E304 09                  NOP
E305 09                  NOP         ; 16
E306 09                  NOP         ; 1   3
E307 09                  NOP
E308 09                  NOP
E309 09                  NOP
E30A 09                  NOP
E30B 09                  NOP
E30C 09                  NOP
E30D 09                  NOP
E30E 09                  NOP
E30F 09                  NOP         
E310 09                  NOP
E311 09                  NOP
E312 09                  NOP
E313 09                  NOP
E314 09                  NOP
E315 09                  NOP         ; 16
E316 09                  NOP         ; 1   4
E317 09                  NOP
E318 09                  NOP
E319 09                  NOP
E31A 09                  NOP
E31B 09                  NOP
E31C 09                  NOP
E31D 09                  NOP
E31E 09                  NOP
E31F 09                  NOP         
E320 09                  NOP
E321 09                  NOP
E322 09                  NOP
E323 09                  NOP
E324 09                  NOP
E325 09                  NOP         ; 16
E326 09                  NOP         ; 1   5
E327 09                  NOP
E328 09                  NOP
E329 09                  NOP
E32A 09                  NOP
E32B 09                  NOP
E32C 09                  NOP
E32D 09                  NOP
E32E 09                  NOP
E32F 09                  NOP         
E330 09                  NOP
E331 09                  NOP
E332 09                  NOP
E333 09                  NOP
E334 09                  NOP
E335 09                  NOP         ; 16
E336 09                  NOP         ; 1   5
E337 09                  NOP
E338 09                  NOP
E339 09                  NOP
E33A 09                  NOP
E33B 09                  NOP
E33C 09                  NOP
E33D 09                  NOP
E33E 09                  NOP
E33F 09                  NOP         
E340 09                  NOP
E341 09                  NOP
E342 09                  NOP
E343 09                  NOP
E344 09                  NOP
E345 09                  NOP         ; 16
E346 09                  NOP         ; 1   6
E347 09                  NOP
E348 09                  NOP
E349 09                  NOP
E34A 09                  NOP
E34B 09                  NOP
E34C 09                  NOP
E34D 09                  NOP
E34E 09                  NOP
E34F 09                  NOP         
E350 09                  NOP
E351 09                  NOP
E352 09                  NOP
E353 09                  NOP
E354 09                  NOP
E355 09                  NOP         ; 16
E356 09                  NOP         ; 1   7
E357 09                  NOP
E358 09                  NOP
E359 09                  NOP
E35A 09                  NOP
E35B 09                  NOP
E35C 09                  NOP
E35D 09                  NOP
E35E 09                  NOP
E35F 09                  NOP         
E360 09                  NOP
E361 09                  NOP
E362 09                  NOP
E363 09                  NOP
E364 09                  NOP
                ;         NOP        ; 16
E365 09         TST0B_12 NOP
E366 0C 80               JRA TST0B_11
E368 09         TST0B_13 NOP         ; final foward jump destination     
                         ; --------------------------------------------------------------------
                         ; OP.0D SRLA Shift Right Logical on Reg A
                         ;            0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E369 30 0D      TSTOP0D  LDA #0x0D
E36B 19                  NOTA
E36C 31 C0 00            STA LEDPORT ; Output to LED port
E36F 30 A5               LDA #0xA5
E371 0D                  SRLA
E372 2D 52               CMPA #0x52
E374 2B FF B0            JNE FAIL    ; Jump if result not good
E377 2A 1F FB            LDA CARRY   ; Read the Carry Status
E37A 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E37C 2B FF B0            JNE FAIL    ; Error if different
E37F 30 A5               LDA #0xA5
E381 0D                  SRLA
E382 0D                  SRLA
E383 2D 29               CMPA #0x29
E385 2B FF B0            JNE FAIL    ; Jump if result not good
E388 2A 1F FB            LDA CARRY   ; Read the Carry Status
E38B 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E38D 2B FF B0            JNE FAIL    ; Error if different
E390 30 A5               LDA #0xA5
E392 0D                  SRLA
E393 0D                  SRLA
E394 0D                  SRLA
E395 2D 14               CMPA #0x14
E397 2B FF B0            JNE FAIL    ; Jump if result not good
E39A 2A 1F FB            LDA CARRY   ; Read the Carry Status
E39D 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E39F 2B FF B0            JNE FAIL    ; Error if different
E3A2 30 A5               LDA #0xA5
E3A4 0D                  SRLA
E3A5 0D                  SRLA
E3A6 0D                  SRLA
E3A7 0D                  SRLA
E3A8 2D 0A               CMPA #0x0A
E3AA 2B FF B0            JNE FAIL    ; Jump if result not good
E3AD 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3B0 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3B2 2B FF B0            JNE FAIL    ; Error if different
E3B5 30 A5               LDA #0xA5
E3B7 0D                  SRLA
E3B8 0D                  SRLA
E3B9 0D                  SRLA
E3BA 0D                  SRLA
E3BB 0D                  SRLA
E3BC 2D 05               CMPA #0x05
E3BE 2B FF B0            JNE FAIL    ; Jump if result not good
E3C1 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3C4 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3C6 2B FF B0            JNE FAIL    ; Error if different
E3C9 30 A5               LDA #0xA5
E3CB 0D                  SRLA
E3CC 0D                  SRLA
E3CD 0D                  SRLA
E3CE 0D                  SRLA
E3CF 0D                  SRLA
E3D0 0D                  SRLA
E3D1 2D 02               CMPA #0x02
E3D3 2B FF B0            JNE FAIL    ; Jump if result not good
E3D6 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3D9 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E3DB 2B FF B0            JNE FAIL    ; Error if different
E3DE 30 A5               LDA #0xA5
E3E0 0D                  SRLA
E3E1 0D                  SRLA
E3E2 0D                  SRLA
E3E3 0D                  SRLA
E3E4 0D                  SRLA
E3E5 0D                  SRLA
E3E6 0D                  SRLA
E3E7 2D 01               CMPA #0x01
E3E9 2B FF B0            JNE FAIL    ; Jump if result not good
E3EC 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3EF 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3F1 2B FF B0            JNE FAIL    ; Error if different
E3F4 30 A5               LDA #0xA5
E3F6 0D                  SRLA
E3F7 0D                  SRLA
E3F8 0D                  SRLA
E3F9 0D                  SRLA
E3FA 0D                  SRLA
E3FB 0D                  SRLA
E3FC 0D                  SRLA
E3FD 0D                  SRLA
E3FE 2D 00               CMPA #0x00
E400 2B FF B0            JNE FAIL    ; Jump if result not good
E403 2A 1F FB            LDA CARRY   ; Read the Carry Status
E406 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E408 2B FF B0            JNE FAIL    ; Error if different
E40B 30 A5               LDA #0xA5
E40D 0D                  SRLA
E40E 0D                  SRLA
E40F 0D                  SRLA
E410 0D                  SRLA
E411 0D                  SRLA
E412 0D                  SRLA
E413 0D                  SRLA
E414 0D                  SRLA
E415 0D                  SRLA
E416 2D 00               CMPA #0x00
E418 2B FF B0            JNE FAIL    ; Jump if result not good
E41B 2A 1F FB            LDA CARRY   ; Read the Carry Status
E41E 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E420 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0E SLLA Shift Left Logical on Reg A
                         ;       SLAA Shift Left Arithmetic on Reg A (SLAA same as SLLA)
                         ;            C <- b7 b6 b5 b4 b3 b2 b1 b0 <- 0
                         ; --------------------------------------------------------------------
E423 30 0E      TSTOP0E  LDA #0x0E
E425 19                  NOTA
E426 31 C0 00            STA LEDPORT ; Output to LED port
E429 30 A5               LDA #0xA5
E42B 0E                  SLLA
E42C 2D 4A               CMPA #0x4A
E42E 2B FF B0            JNE FAIL    ; Jump if result not good
E431 2A 1F FB            LDA CARRY   ; Read the Carry Status
E434 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E436 2B FF B0            JNE FAIL    ; Error if different
E439 30 A5               LDA #0xA5
E43B 0E                  SLLA
E43C 0E                  SLLA
E43D 2D 94               CMPA #0x94
E43F 2B FF B0            JNE FAIL    ; Jump if result not good
E442 2A 1F FB            LDA CARRY   ; Read the Carry Status
E445 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E447 2B FF B0            JNE FAIL    ; Error if different
E44A 30 A5               LDA #0xA5
E44C 0E                  SLLA
E44D 0E                  SLLA
E44E 0E                  SLLA
E44F 2D 28               CMPA #0x28
E451 2B FF B0            JNE FAIL    ; Jump if result not good
E454 2A 1F FB            LDA CARRY   ; Read the Carry Status
E457 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E459 2B FF B0            JNE FAIL    ; Error if different
E45C 30 A5               LDA #0xA5
E45E 0E                  SLLA
E45F 0E                  SLLA
E460 0E                  SLLA
E461 0E                  SLLA
E462 2D 50               CMPA #0x50
E464 2B FF B0            JNE FAIL    ; Jump if result not good
E467 2A 1F FB            LDA CARRY   ; Read the Carry Status
E46A 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E46C 2B FF B0            JNE FAIL    ; Error if different
E46F 30 A5               LDA #0xA5
E471 0E                  SLLA
E472 0E                  SLLA
E473 0E                  SLLA
E474 0E                  SLLA
E475 0E                  SLLA
E476 2D A0               CMPA #0xA0
E478 2B FF B0            JNE FAIL    ; Jump if result not good
E47B 2A 1F FB            LDA CARRY   ; Read the Carry Status
E47E 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E480 2B FF B0            JNE FAIL    ; Error if different
E483 30 A5               LDA #0xA5
E485 0E                  SLLA
E486 0E                  SLLA
E487 0E                  SLLA
E488 0E                  SLLA
E489 0E                  SLLA
E48A 0E                  SLAA
E48B 2D 40               CMPA #0x40
E48D 2B FF B0            JNE FAIL    ; Jump if result not good
E490 2A 1F FB            LDA CARRY   ; Read the Carry Status
E493 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E495 2B FF B0            JNE FAIL    ; Error if different
E498 30 A5               LDA #0xA5
E49A 0E                  SLLA
E49B 0E                  SLLA
E49C 0E                  SLLA
E49D 0E                  SLLA
E49E 0E                  SLLA
E49F 0E                  SLAA
E4A0 0E                  SLAA
E4A1 2D 80               CMPA #0x80
E4A3 2B FF B0            JNE FAIL    ; Jump if result not good
E4A6 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4A9 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4AB 2B FF B0            JNE FAIL    ; Error if different
E4AE 30 A5               LDA #0xA5
E4B0 0E                  SLLA
E4B1 0E                  SLLA
E4B2 0E                  SLLA
E4B3 0E                  SLLA
E4B4 0E                  SLLA
E4B5 0E                  SLAA
E4B6 0E                  SLAA
E4B7 0E                  SLAA
E4B8 2D 00               CMPA #0x00
E4BA 2B FF B0            JNE FAIL    ; Jump if result not good
E4BD 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4C0 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E4C2 2B FF B0            JNE FAIL    ; Error if different
E4C5 30 A5               LDA #0xA5
E4C7 0E                  SLLA
E4C8 0E                  SLLA
E4C9 0E                  SLLA
E4CA 0E                  SLLA
E4CB 0E                  SLLA
E4CC 0E                  SLAA
E4CD 0E                  SLAA
E4CE 0E                  SLAA
E4CF 0E                  SLAA
E4D0 2D 00               CMPA #0x00
E4D2 2B FF B0            JNE FAIL    ; Jump if result not good
E4D5 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4D8 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4DA 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0F 
                         ; JRNC Jump Relatif if Not Carry
                         ; --------------------------------------------------------------------
E4DD 30 0F      TSTOP0F  LDA #0x0F
E4DF 19                  NOTA
E4E0 31 C0 00            STA LEDPORT ; Output to LED port
E4E3 30 00               LDA #0x00   ; Clear carry
E4E5 31 1F FB            STA CARRY
E4E8 0F 03               JRNC TST0F_0
E4EA 32 FF B0            JMP FAIL
E4ED 30 01      TST0F_0  LDA #0x01   ; Set carry
E4EF 31 1F FB            STA CARRY
E4F2 0F 03               JRNC TST0F_1
E4F4 32 E4 FA            JMP TST0F_2
E4F7 32 FF B0   TST0F_1  JMP FAIL
E4FA 09         TST0F_2  NOP
                         ; --------------------------------------------------------------------
                         ; OP.10  RRCA   Rotate Right Logical Reg A through Carry 
                         ;               C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E4FB 30 10      TSTOP10  LDA #0x10
E4FD 19                  NOTA
E4FE 31 C0 00            STA LEDPORT ; Output to LED port
E501 30 00               LDA #0x00   ; Clear Carry
E503 31 1F FB            STA CARRY
E506 10                  RRCA
E507 2D 00               CMPA #0x00
E509 2B FF B0            JNE FAIL
E50C 30 00               LDA #0x00   ; Clear Carry
E50E 31 1F FB            STA CARRY
E511 10                  RRCA
E512 2A 1F FB            LDA CARRY
E515 2D 00               CMPA #0x00
E517 2B FF B0            JNE FAIL
E51A 30 AA               LDA #0xAA   ; Test shifting
E51C 10                  RRCA
E51D 2D 55               CMPA #0x55
E51F 2B FF B0            JNE FAIL
E522 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E524 10                  RRCA
E525 2A 1F FB            LDA CARRY
E528 2D 01               CMPA #0x01
E52A 2B FF B0            JNE FAIL
E52D 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E52F 31 1F FB            STA CARRY   ; insure carry is clear
E532 30 01               LDA #0x01   ; set bit <0> to '1'
E534 10                  RRCA
E535 2D 00               CMPA #0x00
E537 2B FF B0            JNE FAIL
E53A 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E53C 31 1F FB            STA CARRY   ; insure carry is clear
E53F 30 01               LDA #0x01
E541 10                  RRCA
E542 10                  RRCA
E543 2D 80               CMPA #0x80
E545 2B FF B0            JNE FAIL
E548 10                  RRCA        ; continue rotating this bit
E549 2D 40               CMPA #0x40
E54B 2B FF B0            JNE FAIL
E54E 10                  RRCA
E54F 2D 20               CMPA #0x20
E551 2B FF B0            JNE FAIL
E554 10                  RRCA
E555 2D 10               CMPA #0x10
E557 2B FF B0            JNE FAIL
E55A 10                  RRCA
E55B 2D 08               CMPA #0x08
E55D 2B FF B0            JNE FAIL
E560 10                  RRCA
E561 2D 04               CMPA #0x04
E563 2B FF B0            JNE FAIL
E566 10                  RRCA
E567 2D 02               CMPA #0x02
E569 2B FF B0            JNE FAIL
E56C 10                  RRCA
E56D 2D 01               CMPA #0x01
E56F 2B FF B0            JNE FAIL
E572 10                  RRCA
E573 2D 00               CMPA #0x00
E575 2B FF B0            JNE FAIL
E578 10                  RRCA
E579 2D 80               CMPA #0x80
E57B 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.11  RCF   Reset Carry Flag   C <- 0
                         ; --------------------------------------------------------------------
E57E 30 11      TSTOP11  LDA #0x11
E580 19                  NOTA
E581 31 C0 00            STA LEDPORT ; Output to LED port
E584 30 01               LDA #0x01   ; Set carry flag to 1
E586 31 1F FB            STA CARRY
E589 11                  RCF         ; Reset Carry Flag 
E58A 2A 1F FB            LDA CARRY   ; Check carry is now cleared
E58D 2D 00               CMPA #0x00
E58F 2B FF B0            JNE FAIL
E592 11                  RCF         ; Do again a Reset Carry Flag 
E593 2A 1F FB            LDA CARRY   ; Check carry is still cleared
E596 2D 00               CMPA #0x00
E598 2B FF B0            JNE FAIL
E59B 30 A5               LDA #0xA5   ; Check register A is not affected by a Reset Carry Flag
E59D 11                  RCF         ; Reset Carry Flag
E59E 2D A5               CMPA #0xA5  ; If A value not same then fail
E5A0 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.12  SCF   Set Carry Flag   C <- 1
                         ; --------------------------------------------------------------------
E5A3 30 12      TSTOP12  LDA #0x12
E5A5 19                  NOTA
E5A6 31 C0 00            STA LEDPORT ; Output to LED port
E5A9 30 00               LDA #0x00   ; Clear carry flag
E5AB 31 1F FB            STA CARRY
E5AE 12                  SCF         ; Set Carry Flag 
E5AF 2A 1F FB            LDA CARRY   ; Check carry is set
E5B2 2D 01               CMPA #0x01
E5B4 2B FF B0            JNE FAIL
E5B7 12                  SCF         ; Set Carry Flag again
E5B8 2A 1F FB            LDA CARRY   ; Check carry is still set
E5BB 2D 01               CMPA #0x01
E5BD 2B FF B0            JNE FAIL
E5C0 30 BE               LDA #0xBE   ; Check register A is not affected by a Set Carry Flag
E5C2 12                  SCF         ; Set Carry Flag
E5C3 2D BE               CMPA #0xBE  ; If A value not same then fail
E5C5 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.13  DECXL   Decrement XL   E updated
                         ; --------------------------------------------------------------------
E5C8 30 13      TSTOP13  LDA #0x13
E5CA 19                  NOTA
E5CB 31 C0 00            STA LEDPORT ; Output to LED port
E5CE 04 FF FF            LDX #0xFFFF
E5D1 13                  DECXL
E5D2 2A 1F F3            LDA XH
E5D5 2D FF               CMPA #0xFF
E5D7 2B FF B0            JNE FAIL
E5DA 2A 1F F4            LDA XL
E5DD 2D FE               CMPA #0xFE
E5DF 2B FF B0            JNE FAIL
E5E2 13                  DECXL
E5E3 2A 1F F3            LDA XH
E5E6 2D FF               CMPA #0xFF
E5E8 2B FF B0            JNE FAIL
E5EB 2A 1F F4            LDA XL
E5EE 2D FD               CMPA #0xFD
E5F0 2B FF B0            JNE FAIL
E5F3 04 A5 02            LDX #0xA502
E5F6 13                  DECXL
E5F7 2A 1F F3            LDA XH
E5FA 2D A5               CMPA #0xA5
E5FC 2B FF B0            JNE FAIL
E5FF 2A 1F F4            LDA XL
E602 2D 01               CMPA #0x01
E604 2B FF B0            JNE FAIL
E607 13                  DECXL
E608 2A 1F F3            LDA XH
E60B 2D A5               CMPA #0xA5
E60D 2B FF B0            JNE FAIL
E610 2A 1F F4            LDA XL
E613 2D 00               CMPA #0x00
E615 2B FF B0            JNE FAIL
E618 13                  DECXL
E619 2A 1F F3            LDA XH
E61C 2D A5               CMPA #0xA5
E61E 2B FF B0            JNE FAIL
E621 2A 1F F4            LDA XL
E624 2D FF               CMPA #0xFF
E626 2B FF B0            JNE FAIL
E629 13                  DECXL 
E62A 2A 1F F3            LDA XH
E62D 2D A5               CMPA #0xA5
E62F 2B FF B0            JNE FAIL
E632 2A 1F F4            LDA XL
E635 2D FE               CMPA #0xFE
E637 2B FF B0            JNE FAIL
E63A 04 00 02            LDX #0x0002 ; Check E status
E63D 13                  DECXL
E63E 2A 1F FA            LDA EQUAL
E641 2D 00               CMPA #0x00
E643 2B FF B0            JNE FAIL
E646 04 00 01            LDX #0x0001
E649 13                  DECXL
E64A 2A 1F FA            LDA EQUAL
E64D 2D 01               CMPA #0x01
E64F 2B FF B0            JNE FAIL
E652 04 FF FF            LDX #0xFFFF
E655 13                  DECXL
E656 2A 1F FA            LDA EQUAL
E659 2D 00               CMPA #0x00
E65B 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.14  RRC 0x****   Rotate Right Logical Address location through Carry 
                         ;                     C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E65E 30 14      TSTOP14  LDA #0x14
E660 19                  NOTA
E661 31 C0 00            STA LEDPORT ; Output to LED port
E664 30 00               LDA #0x00   ; Clear Carry
E666 31 1F FB            STA CARRY
E669 31 00 0F            STA ?b0
E66C 14 00 0F            RRC ?b0
E66F 2A 00 0F            LDA ?b0
E672 2D 00               CMPA #0x00
E674 2B FF B0            JNE FAIL
E677 30 00               LDA #0x00   ; Clear Carry
E679 31 1F FB            STA CARRY
E67C 31 00 0F            STA ?b0
E67F 14 00 0F            RRC ?b0
E682 2A 1F FB            LDA CARRY
E685 2D 00               CMPA #0x00
E687 2B FF B0            JNE FAIL
E68A 30 AA               LDA #0xAA   ; Test shifting
E68C 31 00 0F            STA ?b0
E68F 14 00 0F            RRC ?b0
E692 2A 00 0F            LDA ?b0
E695 2D 55               CMPA #0x55
E697 2B FF B0            JNE FAIL
E69A 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E69C 31 00 0F            STA ?b0
E69F 14 00 0F            RRC ?b0
E6A2 2A 1F FB            LDA CARRY
E6A5 2D 01               CMPA #0x01
E6A7 2B FF B0            JNE FAIL
E6AA 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E6AC 31 1F FB            STA CARRY   ; insure carry is clear
E6AF 30 01               LDA #0x01   ; set bit <0> to '1'
E6B1 31 00 0F            STA ?b0
E6B4 14 00 0F            RRC ?b0
E6B7 2A 00 0F            LDA ?b0
E6BA 2D 00               CMPA #0x00
E6BC 2B FF B0            JNE FAIL
E6BF 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E6C1 31 1F FB            STA CARRY   ; insure carry is clear
E6C4 30 01               LDA #0x01
E6C6 31 00 0F            STA ?b0
E6C9 14 00 0F            RRC ?b0
E6CC 14 00 0F            RRC ?b0
E6CF 2A 00 0F            LDA ?b0
E6D2 2D 80               CMPA #0x80
E6D4 2B FF B0            JNE FAIL
E6D7 14 00 0F            RRC ?b0     ; continue rotating this bit
E6DA 2A 00 0F            LDA ?b0
E6DD 2D 40               CMPA #0x40
E6DF 2B FF B0            JNE FAIL
E6E2 14 00 0F            RRC ?b0
E6E5 2A 00 0F            LDA ?b0
E6E8 2D 20               CMPA #0x20
E6EA 2B FF B0            JNE FAIL
E6ED 14 00 0F            RRC ?b0
E6F0 2A 00 0F            LDA ?b0
E6F3 2D 10               CMPA #0x10
E6F5 2B FF B0            JNE FAIL
E6F8 14 00 0F            RRC ?b0
E6FB 2A 00 0F            LDA ?b0
E6FE 2D 08               CMPA #0x08
E700 2B FF B0            JNE FAIL
E703 14 00 0F            RRC ?b0
E706 2A 00 0F            LDA ?b0
E709 2D 04               CMPA #0x04
E70B 2B FF B0            JNE FAIL
E70E 14 00 0F            RRC ?b0
E711 2A 00 0F            LDA ?b0
E714 2D 02               CMPA #0x02
E716 2B FF B0            JNE FAIL
E719 14 00 0F            RRC ?b0
E71C 2A 00 0F            LDA ?b0
E71F 2D 01               CMPA #0x01
E721 2B FF B0            JNE FAIL
E724 14 00 0F            RRC ?b0
E727 2A 00 0F            LDA ?b0
E72A 2D 00               CMPA #0x00
E72C 2B FF B0            JNE FAIL
E72F 14 00 0F            RRC ?b0
E732 2A 00 0F            LDA ?b0
E735 2D 80               CMPA #0x80
E737 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.15 SRL 0x****   Shift Right Logical on Address
                         ;                    0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E73A 30 15      TSTOP15  LDA #0x15
E73C 19                  NOTA
E73D 31 C0 00            STA LEDPORT ; Output to LED port
E740 30 A5               LDA #0xA5
E742 31 00 0F            STA ?b0
E745 15 00 0F            SRL ?b0
E748 2A 00 0F            LDA ?b0
E74B 2D 52               CMPA #0x52
E74D 2B FF B0            JNE FAIL    ; Jump if result not good
E750 2A 1F FB            LDA CARRY   ; Read the Carry Status
E753 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E755 2B FF B0            JNE FAIL    ; Error if different
E758 30 A5               LDA #0xA5
E75A 31 00 0F            STA ?b0
E75D 15 00 0F            SRL ?b0
E760 15 00 0F            SRL ?b0
E763 2A 00 0F            LDA ?b0
E766 2D 29               CMPA #0x29
E768 2B FF B0            JNE FAIL    ; Jump if result not good
E76B 2A 1F FB            LDA CARRY   ; Read the Carry Status
E76E 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E770 2B FF B0            JNE FAIL    ; Error if different
E773 30 A5               LDA #0xA5
E775 31 00 0F            STA ?b0
E778 15 00 0F            SRL ?b0
E77B 15 00 0F            SRL ?b0
E77E 15 00 0F            SRL ?b0
E781 2A 00 0F            LDA ?b0
E784 2D 14               CMPA #0x14
E786 2B FF B0            JNE FAIL    ; Jump if result not good
E789 2A 1F FB            LDA CARRY   ; Read the Carry Status
E78C 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E78E 2B FF B0            JNE FAIL    ; Error if different
E791 30 A5               LDA #0xA5
E793 31 00 0F            STA ?b0
E796 15 00 0F            SRL ?b0
E799 15 00 0F            SRL ?b0
E79C 15 00 0F            SRL ?b0
E79F 15 00 0F            SRL ?b0
E7A2 2A 00 0F            LDA ?b0
E7A5 2D 0A               CMPA #0x0A
E7A7 2B FF B0            JNE FAIL    ; Jump if result not good
E7AA 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7AD 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7AF 2B FF B0            JNE FAIL    ; Error if different
E7B2 30 A5               LDA #0xA5
E7B4 31 00 0F            STA ?b0
E7B7 15 00 0F            SRL ?b0
E7BA 15 00 0F            SRL ?b0
E7BD 15 00 0F            SRL ?b0
E7C0 15 00 0F            SRL ?b0
E7C3 15 00 0F            SRL ?b0
E7C6 2A 00 0F            LDA ?b0
E7C9 2D 05               CMPA #0x05
E7CB 2B FF B0            JNE FAIL    ; Jump if result not good
E7CE 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7D1 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7D3 2B FF B0            JNE FAIL    ; Error if different
E7D6 30 A5               LDA #0xA5
E7D8 31 00 0F            STA ?b0
E7DB 15 00 0F            SRL ?b0
E7DE 15 00 0F            SRL ?b0
E7E1 15 00 0F            SRL ?b0
E7E4 15 00 0F            SRL ?b0
E7E7 15 00 0F            SRL ?b0
E7EA 15 00 0F            SRL ?b0
E7ED 2A 00 0F            LDA ?b0
E7F0 2D 02               CMPA #0x02
E7F2 2B FF B0            JNE FAIL    ; Jump if result not good
E7F5 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7F8 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E7FA 2B FF B0            JNE FAIL    ; Error if different
E7FD 30 A5               LDA #0xA5
E7FF 31 00 0F            STA ?b0
E802 15 00 0F            SRL ?b0
E805 15 00 0F            SRL ?b0
E808 15 00 0F            SRL ?b0
E80B 15 00 0F            SRL ?b0
E80E 15 00 0F            SRL ?b0
E811 15 00 0F            SRL ?b0
E814 15 00 0F            SRL ?b0
E817 2A 00 0F            LDA ?b0
E81A 2D 01               CMPA #0x01
E81C 2B FF B0            JNE FAIL    ; Jump if result not good
E81F 2A 1F FB            LDA CARRY   ; Read the Carry Status
E822 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E824 2B FF B0            JNE FAIL    ; Error if different
E827 30 A5               LDA #0xA5
E829 31 00 0F            STA ?b0
E82C 15 00 0F            SRL ?b0
E82F 15 00 0F            SRL ?b0
E832 15 00 0F            SRL ?b0
E835 15 00 0F            SRL ?b0
E838 15 00 0F            SRL ?b0
E83B 15 00 0F            SRL ?b0
E83E 15 00 0F            SRL ?b0
E841 15 00 0F            SRL ?b0
E844 2A 00 0F            LDA ?b0
E847 2D 00               CMPA #0x00
E849 2B FF B0            JNE FAIL    ; Jump if result not good
E84C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E84F 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E851 2B FF B0            JNE FAIL    ; Error if different
E854 30 A5               LDA #0xA5
E856 31 00 0F            STA ?b0
E859 15 00 0F            SRL ?b0
E85C 15 00 0F            SRL ?b0
E85F 15 00 0F            SRL ?b0
E862 15 00 0F            SRL ?b0
E865 15 00 0F            SRL ?b0
E868 15 00 0F            SRL ?b0
E86B 15 00 0F            SRL ?b0
E86E 15 00 0F            SRL ?b0
E871 15 00 0F            SRL ?b0
E874 2A 00 0F            LDA ?b0
E877 2D 00               CMPA #0x00
E879 2B FF B0            JNE FAIL    ; Jump if result not good
E87C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E87F 2D 00               CMPA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E881 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.16 STX 0x****   STORE X REGISTER TO ADDRESS
                         ; --------------------------------------------------------------------
E884 30 16      TSTOP16  LDA #0x16
E886 19                  NOTA
E887 31 C0 00            STA LEDPORT ; Output to LED port
E88A 04 12 34            LDX #0x1234 ; Test a STX using immediate Hex address value
E88D 16 00 00            STX 0x0000  
E890 2A 00 00            LDA 0x0000
E893 2D 12               CMPA #0x12
E895 2B FF B0            JNE FAIL
E898 2A 00 01            LDA 0x0001
E89B 2D 34               CMPA #0x34
E89D 2B FF B0            JNE FAIL
E8A0 04 CA FE            LDX #0xCAFE ; Test a STX at address boundary requiring a carry to MSB
E8A3 16 10 FF            STX 0x10FF  
E8A6 2A 10 FF            LDA 0x10FF
E8A9 2D CA               CMPA #0xCA
E8AB 2B FF B0            JNE FAIL
E8AE 2A 11 00            LDA 0x1100
E8B1 2D FE               CMPA #0xFE
E8B3 2B FF B0            JNE FAIL
E8B6 04 BE EF            LDX #0xBEEF ; Test a STX on another boundary
E8B9 16 12 FF            STX 0x12FF  
E8BC 2A 12 FF            LDA 0x12FF
E8BF 2D BE               CMPA #0xBE
E8C1 2B FF B0            JNE FAIL
E8C4 2A 13 00            LDA 0x1300
E8C7 2D EF               CMPA #0xEF
E8C9 2B FF B0            JNE FAIL
E8CC 04 67 89            LDX #0x6789 ; Test a STX using symbolic address
E8CF 16 00 0E            STX ?b1
E8D2 2A 00 0E            LDA ?b1
E8D5 2D 67               CMPA #0x67
E8D7 2B FF B0            JNE FAIL
E8DA 2A 00 0F            LDA ?b0
E8DD 2D 89               CMPA #0x89
E8DF 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.17 ORA #0x**   LOGICAL OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E8E2 30 17      TSTOP17  LDA #0x17
E8E4 19                  NOTA
E8E5 31 C0 00            STA LEDPORT ; Output to LED port
E8E8 30 FF               LDA #0xFF
E8EA 17 FF               ORA #0xFF
E8EC 2D FF               CMPA #0xFF
E8EE 2B FF B0            JNE FAIL
E8F1 30 00               LDA #0x00
E8F3 17 00               ORA #0x00
E8F5 2D 00               CMPA #0x00
E8F7 2B FF B0            JNE FAIL
E8FA 30 25               LDA #0x25
E8FC 17 D3               ORA #0xD3
E8FE 2D F7               CMPA #0xF7
E900 2B FF B0            JNE FAIL
E903 30 00               LDA #0x00
E905 17 FF               ORA #0xFF
E907 2D FF               CMPA #0xFF
E909 2B FF B0            JNE FAIL
E90C 30 FF               LDA #0xFF
E90E 17 00               ORA #0x00
E910 2D FF               CMPA #0xFF
E912 2B FF B0            JNE FAIL
E915 30 14               LDA #0x14
E917 17 C1               ORA #0xC1
E919 2D D5               CMPA #0xD5
E91B 2B FF B0            JNE FAIL
E91E 30 AA               LDA #0xAA
E920 17 55               ORA #0x55
E922 2D FF               CMPA #0xFF
E924 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.18 XORA #0x**  EXCLUSIVE OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E927 30 18      TSTOP18  LDA #0x18
E929 19                  NOTA
E92A 31 C0 00            STA LEDPORT ; Output to LED port
E92D 30 00               LDA #0x00
E92F 18 00               XORA #0x00
E931 2D 00               CMPA #0x00
E933 2B FF B0            JNE FAIL
E936 30 00               LDA #0x00
E938 18 FF               XORA #0xFF
E93A 2D FF               CMPA #0xFF
E93C 2B FF B0            JNE FAIL
E93F 30 FF               LDA #0xFF
E941 18 FF               XORA #0xFF
E943 2D 00               CMPA #0x00
E945 2B FF B0            JNE FAIL
E948 30 FF               LDA #0xFF
E94A 18 55               XORA #0x55
E94C 2D AA               CMPA #0xAA
E94E 2B FF B0            JNE FAIL
E951 30 CE               LDA #0xCE
E953 18 5A               XORA #0x5A
E955 2D 94               CMPA #0x94
E957 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.19 NOTA  LOGIC NOT ON REG A
                         ; --------------------------------------------------------------------
E95A 30 19      TSTOP19  LDA #0x19
E95C 19                  NOTA
E95D 31 C0 00            STA LEDPORT ; Output to LED port
E960 30 00               LDA #0x00
E962 19                  NOTA
E963 2D FF               CMPA #0xFF
E965 2B FF B0            JNE FAIL
E968 19                  NOTA
E969 2D 00               CMPA #0x00
E96B 2B FF B0            JNE FAIL
E96E 30 55               LDA #0x55
E970 19                  NOTA
E971 2D AA               CMPA #0xAA
E973 2B FF B0            JNE FAIL
E976 19                  NOTA
E977 2D 55               CMPA #0x55
E979 2B FF B0            JNE FAIL
E97C 19                  NOTA
E97D 2D AA               CMPA #0xAA
E97F 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1A CMPX #0x****   COMPARE X to immediate value
                         ; --------------------------------------------------------------------
E982 30 1A      TSTOP1A  LDA #0x1A
E984 19                  NOTA
E985 31 C0 00            STA LEDPORT ; Output to LED port
E988 04 00 00            LDX #0x0000 ; Load 0x0000 in X  (Testing with immediate hex value)
E98B 1A 00 00            CMPX #0x0000
E98E 2B FF B0            JNE FAIL
E991 1A 00 01            CMPX #0x0001
E994 2C FF B0            JEQ FAIL    ; good up tho here
E997 1A FF FF            CMPX #0xFFFF
E99A 2C FF B0            JEQ FAIL
E99D 04 FF 00            LDX #0xFF00 ; Load 0xFF00 in X
E9A0 1A FF 00            CMPX #0xFF00
E9A3 2B FF B0            JNE FAIL
E9A6 1A 00 FF            CMPX #0x00FF
E9A9 2C FF B0            JEQ FAIL
E9AC 1A FF FF            CMPX #0xFFFF
E9AF 2C FF B0            JEQ FAIL
E9B2 04 00 FF            LDX #0x00FF ; Load 0x00FF in X
E9B5 1A 00 FF            CMPX #0x00FF
E9B8 2B FF B0            JNE FAIL
E9BB 1A FF 00            CMPX #0xFF00
E9BE 2C FF B0            JEQ FAIL
E9C1 1A FF FF            CMPX #0xFFFF
E9C4 2C FF B0            JEQ FAIL
E9C7 04 FF FF            LDX #0xFFFF ; Load 0xFFFF in X
E9CA 1A FF FF            CMPX #0xFFFF
E9CD 2B FF B0            JNE FAIL
E9D0 1A FF 00            CMPX #0xFF00
E9D3 2C FF B0            JEQ FAIL
E9D6 1A 00 FF            CMPX #0x00FF
E9D9 2C FF B0            JEQ FAIL
E9DC 04 AB CD            LDX #0xABCD
E9DF 1A A5 CD            CMPX #0xA5CD
E9E2 2C FF B0            JEQ FAIL
E9E5 04 12 34            LDX #0x1234
E9E8 1A 12 AA            CMPX #0x12AA
E9EB 2C FF B0            JEQ FAIL
E9EE 04 AE C3            LDX #0xAEC3
E9F1 1A AE C3            CMPX #0xAEC3
E9F4 2B FF B0            JNE FAIL
E9F7 1A AE DB            CMPX #0xAEDB
E9FA 2C FF B0            JEQ FAIL
E9FD 1A 12 C3            CMPX #0x12C3
EA00 2C FF B0            JEQ FAIL
EA03 1A FF FF            CMPX #0xFFFF
EA06 2C FF B0            JEQ FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1B LDX 0x**  
                         ; LDX using a 8-bit direct address (8-bit offset into 0x000xFF page)
                         ; --------------------------------------------------------------------
EA09 30 1B      TSTOP1B  LDA #0x1B
EA0B 19                  NOTA
EA0C 31 C0 00            STA LEDPORT    ; Output to LED port
EA0F 30 00               LDA #0x00
EA11 31 00 00            STA 0x0000
EA14 30 00               LDA #0x00
EA16 31 00 01            STA 0x0001
EA19 1B 00               LDX 0x00       ; Load index pointer from this 8 bit address
EA1B 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA1E 2D 00               CMPA #0x00
EA20 2B FF B0            JNE FAIL
EA23 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA26 2D 00               CMPA #0x00
EA28 2B FF B0            JNE FAIL       ;
EA2B 30 AB               LDA #0xAB
EA2D 31 00 02            STA 0x0002
EA30 30 CD               LDA #0xCD
EA32 31 00 03            STA 0x0003
EA35 1B 02               LDX 0x02       ; Load index pointer from this 8 bit address
EA37 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA3A 2D AB               CMPA #0xAB
EA3C 2B FF B0            JNE FAIL
EA3F 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA42 2D CD               CMPA #0xCD
EA44 2B FF B0            JNE FAIL       ;      
EA47 30 CA               LDA #0xCA
EA49 31 00 48            STA 0x0048
EA4C 30 FE               LDA #0xFE
EA4E 31 00 49            STA 0x0049
EA51 1B 48               LDX 0x48       ; Load index pointer from this 8 bit address
EA53 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA56 2D CA               CMPA #0xCA
EA58 2B FF B0            JNE FAIL
EA5B 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA5E 2D FE               CMPA #0xFE
EA60 2B FF B0            JNE FAIL
EA63 30 12               LDA #0x12      ; Test using symbolic adress
EA65 31 00 0E            STA 0x000E     ; ?b1
EA68 30 34               LDA #0x34
EA6A 31 00 0F            STA 0x000F     ; ?b0
EA6D 1B 0E               LDX ?b1        ; Load index pointer using symbolic LSB 8 bit address
EA6F 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA72 2D 12               CMPA #0x12
EA74 2B FF B0            JNE FAIL
EA77 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA7A 2D 34               CMPA #0x34
EA7C 2B FF B0            JNE FAIL
EA7F 30 56               LDA #0x56      ; Test using symbolic adress
EA81 31 00 09            STA 0x0009     ; ?b6
EA84 30 78               LDA #0x78
EA86 31 00 0A            STA 0x000A     ; ?b7
EA89 1B 09               LDX ?b6        ; Load index pointer using symbolic LSB 8 bit address
EA8B 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA8E 2D 56               CMPA #0x56
EA90 2B FF B0            JNE FAIL
EA93 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA96 2D 78               CMPA #0x78
EA98 2B FF B0            JNE FAIL
                         ; Test symbolic +- offset

                         ; --------------------------------------------------------------------
                         ; OP.1C LDA (****H,X)
                         ; LDA indexed indirect addressing
                         ; --------------------------------------------------------------------
EA9B 30 1C      TSTOP1C  LDA #0x1C
EA9D 19                  NOTA
EA9E 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM to be read using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EAA1 30 55               LDA #0x55
EAA3 31 00 00            STA 0x0000
EAA6 30 AA               LDA #0xAA
EAA8 31 00 01            STA 0x0001
EAAB 30 BE               LDA #0xBE
EAAD 31 00 02            STA 0x0002
EAB0 04 00 00            LDX #0x0000
EAB3 1C 00 00            LDA (0x0000,X)
EAB6 2D 55               CMPA #0x55
EAB8 2B FF B0            JNE FAIL
EABB 05                  INCX
EABC 1C 00 00            LDA (0x0000,X)
EABF 2D AA               CMPA #0xAA
EAC1 2B FF B0            JNE FAIL
EAC4 05                  INCX
EAC5 1C 00 00            LDA (0x0000,X) 
EAC8 2D BE               CMPA #0xBE
EACA 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x00FF and incrementing
                         ; storing data at 0x10FE onwards
EACD 30 12               LDA #0x12
EACF 31 10 FE            STA 0x10FE
EAD2 30 34               LDA #0x34
EAD4 31 10 FF            STA 0x10FF
EAD7 30 56               LDA #0x56
EAD9 31 11 00            STA 0x1100
EADC 30 78               LDA #0x78
EADE 31 11 01            STA 0x1101
EAE1 04 00 00            LDX #0x0000 ; Point to LSB of base address   
EAE4 1C 10 FE            LDA (0x10FE,X)
EAE7 2D 12               CMPA #0x12
EAE9 2B FF B0            JNE FAIL
EAEC 05                  INCX
EAED 1C 10 FE            LDA (0x10FE,X)
EAF0 2D 34               CMPA #0x34
EAF2 2B FF B0            JNE FAIL
EAF5 05                  INCX
EAF6 1C 10 FE            LDA (0x10FE,X)
EAF9 2D 56               CMPA #0x56
EAFB 2B FF B0            JNE FAIL
EAFE 05                  INCX
EAFF 1C 10 FE            LDA (0x10FE,X)
EB02 2D 78               CMPA #0x78
EB04 2B FF B0            JNE FAIL 
                         ; Finally test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EB07 30 12               LDA #0x12
EB09 31 12 34            STA 0x1234
EB0C 30 34               LDA #0x34
EB0E 31 12 35            STA 0x1235
EB11 30 56               LDA #0x56
EB13 31 12 36            STA 0x1236
EB16 30 78               LDA #0x78
EB18 31 12 37            STA 0x1237
EB1B 04 12 34            LDX #0x1234 ; Point to base address
EB1E 1C 00 00            LDA (0x0000,X)
EB21 2D 12               CMPA #0x12
EB23 2B FF B0            JNE FAIL
EB26 1C 00 01            LDA (0x0001,X)
EB29 2D 34               CMPA #0x34
EB2B 2B FF B0            JNE FAIL
EB2E 1C 00 02            LDA (0x0002,X)
EB31 2D 56               CMPA #0x56
EB33 2B FF B0            JNE FAIL
EB36 1C 00 03            LDA (0x0003,X)
EB39 2D 78               CMPA #0x78
EB3B 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
EB3E 30 9A               LDA #0x9A
EB40 31 12 FE            STA 0x12FE
EB43 30 BC               LDA #0xBC   
EB45 31 12 FF            STA 0x12FF
EB48 30 DE               LDA #0xDE
EB4A 31 13 00            STA 0x1300
EB4D 30 F0               LDA #0xF0
EB4F 31 13 01            STA 0x1301
EB52 04 01 FE            LDX #0x01FE ; Point to base address
EB55 1C 11 00            LDA (0x1100,X)
EB58 2D 9A               CMPA #0x9A
EB5A 2B FF B0            JNE FAIL
EB5D 1C 11 01            LDA (0x1101,X)
EB60 2D BC               CMPA #0xBC
EB62 2B FF B0            JNE FAIL
EB65 1C 11 02            LDA (0x1102,X)
EB68 2D DE               CMPA #0xDE
EB6A 2B FF B0            JNE FAIL
EB6D 1C 11 03            LDA (0x1103,X)
EB70 2D F0               CMPA #0xF0
EB72 2B FF B0            JNE FAIL
                         ; Test using symbolic with fixed index register to 0
EB75 30 DE               LDA #0xDE
EB77 31 00 00            STA 0x0000
EB7A 30 AD               LDA #0xAD
EB7C 31 00 01            STA 0x0001
EB7F 30 BE               LDA #0xBE
EB81 31 00 02            STA 0x0002
EB84 30 EF               LDA #0xEF
EB86 31 00 03            STA 0x0003
EB89 04 00 00            LDX #0x0000 ; Clear index
EB8C 1C 00 00            LDA (?b15,X)
EB8F 2D DE               CMPA #0xDE
EB91 2B FF B0            JNE FAIL
EB94 1C 00 01            LDA (?b14,X)
EB97 2D AD               CMPA #0xAD
EB99 2B FF B0            JNE FAIL
EB9C 1C 00 02            LDA (?b13,X)
EB9F 2D BE               CMPA #0xBE
EBA1 2B FF B0            JNE FAIL
EBA4 1C 00 03            LDA (?b12,X)
EBA7 2D EF               CMPA #0xEF
EBA9 2B FF B0            JNE FAIL
                         ; Test using symbolic and incrementing index
EBAC 30 CA               LDA #0xCA   ; ?b7      EQU 0x0008
EBAE 31 00 08            STA 0x0008
EBB1 30 FE               LDA #0xFE
EBB3 31 00 09            STA 0x0009
EBB6 30 55               LDA #0x55
EBB8 31 00 0A            STA 0x000A
EBBB 30 AA               LDA #0xAA
EBBD 31 00 0B            STA 0x000B
EBC0 04 00 00            LDX #0x0000 ; Clear index
EBC3 1C 00 08            LDA (?b7,X)
EBC6 2D CA               CMPA #0xCA
EBC8 2B FF B0            JNE FAIL
EBCB 05                  INCX
EBCC 1C 00 08            LDA (?b7,X)
EBCF 2D FE               CMPA #0xFE
EBD1 2B FF B0            JNE FAIL
EBD4 05                  INCX
EBD5 1C 00 08            LDA (?b7,X)
EBD8 2D 55               CMPA #0x55
EBDA 2B FF B0            JNE FAIL
EBDD 05                  INCX
EBDE 1C 00 08            LDA (?b7,X)
EBE1 2D AA               CMPA #0xAA
EBE3 2B FF B0            JNE FAIL              
                         ; Test using symbolic and incrementing index with a carry
EBE6 30 12               LDA #0x12   ; ?b0      EQU 0x000F
EBE8 31 16 FE            STA 0x16FE
EBEB 30 34               LDA #0x34
EBED 31 16 FF            STA 0x16FF
EBF0 30 56               LDA #0x56
EBF2 31 17 00            STA 0x1700
EBF5 30 78               LDA #0x78
EBF7 31 17 01            STA 0x1701
EBFA 04 16 EF            LDX #0x16EF ; Set base index
EBFD 1C 00 0F            LDA (?b0,X)
EC00 2D 12               CMPA #0x12
EC02 2B FF B0            JNE FAIL              
EC05 05                  INCX
EC06 1C 00 0F            LDA (?b0,X)
EC09 2D 34               CMPA #0x34
EC0B 2B FF B0            JNE FAIL              
EC0E 05                  INCX        ; carry on MSB
EC0F 1C 00 0F            LDA (?b0,X)
EC12 2D 56               CMPA #0x56
EC14 2B FF B0            JNE FAIL              
EC17 05                  INCX
EC18 1C 00 0F            LDA (?b0,X)
EC1B 2D 78               CMPA #0x78
EC1D 2B FF B0            JNE FAIL              
                         ; --------------------------------------------------------------------
                         ; OP.1D STA (****H,X)
                         ; STA indexed indirect addressing
                         ; --------------------------------------------------------------------
EC20 30 1D      TSTOP1D  LDA #0x1D
EC22 19                  NOTA
EC23 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EC26 30 55               LDA #0x55      ; store data at 0x0000 onwards
EC28 04 00 00            LDX #0x0000
EC2B 1D 00 00            STA (0x0000,X)
EC2E 30 AA               LDA #0xAA
EC30 05                  INCX
EC31 1D 00 00            STA (0x0000,X)
EC34 30 BE               LDA #0xBE
EC36 05                  INCX
EC37 1D 00 00            STA (0x0000,X)
EC3A 04 00 00            LDX #0x0000    ; Now read back the stored data
EC3D 0A                  LDA (X)
EC3E 2D 55               CMPA #0x55
EC40 2B FF B0            JNE FAIL
EC43 05                  INCX
EC44 0A                  LDA (X)
EC45 2D AA               CMPA #0xAA
EC47 2B FF B0            JNE FAIL 
EC4A 05                  INCX
EC4B 0A                  LDA (X) 
EC4C 2D BE               CMPA #0xBE
EC4E 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x10FE and incrementing storing data
EC51 30 12               LDA #0x12
EC53 04 10 FE            LDX #0x10FE
EC56 1D 00 00            STA (0x0000,X)
EC59 30 34               LDA #0x34
EC5B 05                  INCX
EC5C 1D 00 00            STA (0x0000,X)
EC5F 30 56               LDA #0x56
EC61 05                  INCX
EC62 1D 00 00            STA (0x0000,X)
EC65 30 78               LDA #0x78
EC67 05                  INCX
EC68 1D 00 00            STA (0x0000,X)
EC6B 04 10 FE            LDX #0x10FE ; Initialize X to base address
EC6E 0A                  LDA (X)
EC6F 2D 12               CMPA #0x12
EC71 2B FF B0            JNE FAIL
EC74 05                  INCX
EC75 0A                  LDA (X)
EC76 2D 34               CMPA #0x34
EC78 2B FF B0            JNE FAIL
EC7B 05                  INCX
EC7C 0A                  LDA (X)
EC7D 2D 56               CMPA #0x56
EC7F 2B FF B0            JNE FAIL
EC82 05                  INCX
EC83 0A                  LDA (X)
EC84 2D 78               CMPA #0x78
EC86 2B FF B0            JNE FAIL
                         ; Test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EC89 30 12               LDA #0x12
EC8B 04 12 34            LDX #0x1234
EC8E 1D 00 00            STA (0x0000,X)
EC91 30 34               LDA #0x34
EC93 1D 00 01            STA (0x0001,X)
EC96 30 56               LDA #0x56
EC98 1D 00 02            STA (0x0002,X)
EC9B 30 78               LDA #0x78
EC9D 1D 00 03            STA (0x0003,X)
ECA0 04 12 34            LDX #0x1234 ; Point to base address
ECA3 0A                  LDA (X)
ECA4 2D 12               CMPA #0x12
ECA6 2B FF B0            JNE FAIL
ECA9 1C 00 01            LDA (0x0001,X)
ECAC 2D 34               CMPA #0x34
ECAE 2B FF B0            JNE FAIL
ECB1 1C 00 02            LDA (0x0002,X)
ECB4 2D 56               CMPA #0x56
ECB6 2B FF B0            JNE FAIL
ECB9 1C 00 03            LDA (0x0003,X)
ECBC 2D 78               CMPA #0x78
ECBE 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
ECC1 30 9A               LDA #0x9A
ECC3 04 14 FE            LDX #0x14FE
ECC6 1D 00 00            STA (0x0000,X)
ECC9 30 BC               LDA #0xBC
ECCB 1D 00 01            STA (0x0001,X)
ECCE 30 DE               LDA #0xDE
ECD0 1D 00 02            STA (0x0002,X)
ECD3 30 F0               LDA #0xF0
ECD5 1D 00 03            STA (0x0003,X)
ECD8 04 14 FE            LDX #0x14FE ; Point to base address
ECDB 0A                  LDA (X)
ECDC 2D 9A               CMPA #0x9A
ECDE 2B FF B0            JNE FAIL
ECE1 05                  INCX
ECE2 0A                  LDA (X)
ECE3 2D BC               CMPA #0xBC
ECE5 2B FF B0            JNE FAIL
ECE8 05                  INCX
ECE9 0A                  LDA (X)
ECEA 2D DE               CMPA #0xDE
ECEC 2B FF B0            JNE FAIL
ECEF 05                  INCX
ECF0 0A                  LDA (X)
ECF1 2D F0               CMPA #0xF0
ECF3 2B FF B0            JNE FAIL
                         ; Test with carry to MSB on index and base address
ECF6 30 45               LDA #0x45
ECF8 04 02 FE            LDX #0x02FE
ECFB 1D 11 00            STA (0x1100,X)
ECFE 30 67               LDA #0x67
ED00 1D 11 01            STA (0x1101,X)
ED03 30 89               LDA #0x89
ED05 1D 11 02            STA (0x1102,X)
ED08 30 AB               LDA #0xAB
ED0A 1D 11 03            STA (0x1103,X)
ED0D 04 01 FE            LDX #0x01FE ; Point to base address
ED10 1C 12 00            LDA (0x1200,X)
ED13 2D 45               CMPA #0x45
ED15 2B FF B0            JNE FAIL
ED18 05                  INCX
ED19 1C 12 00            LDA (0x1200,X)
ED1C 2D 67               CMPA #0x67
ED1E 2B FF B0            JNE FAIL
ED21 05                  INCX
ED22 1C 12 00            LDA (0x1200,X)
ED25 2D 89               CMPA #0x89
ED27 2B FF B0            JNE FAIL
ED2A 05                  INCX
ED2B 1C 12 00            LDA (0x1200,X)
ED2E 2D AB               CMPA #0xAB
ED30 2B FF B0            JNE FAIL
                         ; test using symbolic with fixed index register to 0
ED33 04 00 00            LDX #0x0000 ; Clear index
ED36 30 DE               LDA #0xDE
ED38 1D 00 05            STA (?b10,X)
ED3B 30 AD               LDA #0xAD
ED3D 1D 00 06            STA (?b9,X)
ED40 30 BE               LDA #0xBE
ED42 1D 00 07            STA (?b8,X)   
ED45 30 EF               LDA #0xEF
ED47 1D 00 08            STA (?b7,X)
ED4A 2A 00 05            LDA 0x0005
ED4D 2D DE               CMPA #0xDE
ED4F 2B FF B0            JNE FAIL
ED52 2A 00 06            LDA 0x0006
ED55 2D AD               CMPA #0xAD
ED57 2B FF B0            JNE FAIL
ED5A 2A 00 07            LDA 0x0007
ED5D 2D BE               CMPA #0xBE
ED5F 2B FF B0            JNE FAIL
ED62 2A 00 08            LDA 0x0008
ED65 2D EF               CMPA #0xEF
ED67 2B FF B0            JNE FAIL
                         ; test using symbolic and incrementing index
ED6A 04 00 00            LDX #0x0000 ; Clear index
ED6D 30 CA               LDA #0xCA   
ED6F 1D 00 0F            STA (?b0,X) ; ?b0      EQU 0x000F
ED72 05                  INCX
ED73 30 FE               LDA #0xFE
ED75 1D 00 0F            STA (?b0,X)
ED78 05                  INCX 
ED79 30 55               LDA #0x55
ED7B 1D 00 0F            STA (?b0,X)
ED7E 05                  INCX
ED7F 30 AA               LDA #0xAA
ED81 1D 00 0F            STA (?b0,X)
ED84 2A 00 0F            LDA 0x000F
ED87 2D CA               CMPA #0xCA
ED89 2B FF B0            JNE FAIL
ED8C 2A 00 10            LDA 0x0010
ED8F 2D FE               CMPA #0xFE
ED91 2B FF B0            JNE FAIL
ED94 2A 00 11            LDA 0x0011
ED97 2D 55               CMPA #0x55
ED99 2B FF B0            JNE FAIL
ED9C 2A 00 12            LDA 0x0012
ED9F 2D AA               CMPA #0xAA
EDA1 2B FF B0            JNE FAIL         
                         ; Test using symbolic and incrementing index with a carry
EDA4 04 14 EF            LDX #0x14EF ; Set base index
EDA7 30 12               LDA #0x12
EDA9 1D 00 0F            STA (?b0,X) ; 0x14FE
EDAC 05                  INCX
EDAD 30 34               LDA #0x34
EDAF 1D 00 0F            STA (?b0,X) ; 0x14FF
EDB2 05                  INCX
EDB3 30 56               LDA #0x56
EDB5 1D 00 0F            STA (?b0,X) ; 0x1500
EDB8 05                  INCX
EDB9 30 78               LDA #0x78
EDBB 1D 00 0F            STA (?b0,X) ; 0x1501
EDBE 2A 14 FE            LDA 0x14FE
EDC1 2D 12               CMPA #0x12
EDC3 2B FF B0            JNE FAIL
EDC6 2A 14 FF            LDA 0x14FF
EDC9 2D 34               CMPA #0x34
EDCB 2B FF B0            JNE FAIL
EDCE 2A 15 00            LDA 0x1500
EDD1 2D 56               CMPA #0x56
EDD3 2B FF B0            JNE FAIL
EDD6 2A 15 01            LDA 0x1501
EDD9 2D 78               CMPA #0x78
EDDB 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1E CLRX
                         ; CLEAR X REGISTER
                         ; --------------------------------------------------------------------
EDDE 30 1E      TSTOP1E  LDA #0x1E
EDE0 19                  NOTA
EDE1 31 C0 00            STA LEDPORT ; Output to LED port
EDE4 30 00               LDA #0x00   ; Clear E equal flag
EDE6 31 1F FA            STA 0x1FFA
EDE9 04 FF FF            LDX #0xFFFF ; Load X with non zero value
EDEC 1E                  CLRX
EDED 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EDF0 2D 00               CMPA #0x00
EDF2 2B FF B0            JNE FAIL
EDF5 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EDF8 2D 00               CMPA #0x00
EDFA 2B FF B0            JNE FAIL
EDFD 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE00 2D 01               CMPA #0x01
EE02 2B FF B0            JNE FAIL
EE05 30 01               LDA #0x01   ; Set E equal flag
EE07 31 1F FA            STA 0x1FFA
EE0A 04 12 34            LDX #0x1234 ; Load X with non zero value
EE0D 1E                  CLRX
EE0E 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EE11 2D 00               CMPA #0x00
EE13 2B FF B0            JNE FAIL
EE16 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EE19 2D 00               CMPA #0x00
EE1B 2B FF B0            JNE FAIL
EE1E 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE21 2D 01               CMPA #0x01  
EE23 2B FF B0            JNE FAIL
                         ; -----------------------------------------------------
                         ; OP.1F CMPA 0x**** 
                         ; Compare A with direct-addressed byte, Update Status E
                         ; -----------------------------------------------------
EE26 30 1F      TSTOP1F  LDA #0x1F
EE28 19                  NOTA
EE29 31 C0 00            STA LEDPORT ; Output to LED port
EE2C 30 5A               LDA #0x5A   ; Store a value in RAM
EE2E 31 02 00            STA 0x0200   
EE31 30 5A               LDA #0x5A
EE33 1F 02 00            CMPA 0x0200 ; Compare with same value
EE36 2B FF B0            JNE FAIL    ; Jump if result not good
EE39 2A 1F FA            LDA EQUAL   ; Read E flag and check it is set
EE3C 2D 01               CMPA #0x01  
EE3E 2B FF B0            JNE FAIL
EE41 30 3C               LDA #0x3C
EE43 1F 02 00            CMPA 0x0200 ; Compare with lower value
EE46 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE49 2A 1F FA            LDA EQUAL  ; Read E flag and check it is cleared
EE4C 2D 00               CMPA #0x00  
EE4E 2B FF B0            JNE FAIL
EE51 30 7E               LDA #0x7E
EE53 1F 02 00            CMPA 0x0200 ; Compare with higher value
EE56 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE59 2A 1F FA            LDA EQUAL   ; Read E flag and check it is cleared
EE5C 2D 00               CMPA #0x00  
EE5E 2B FF B0            JNE FAIL 
EE61 30 00               LDA #0x00
EE63 31 15 67            STA 0x1567
EE66 30 FF               LDA #0xFF
EE68 31 17 89            STA 0x1789
EE6B 30 00               LDA #0x00
EE6D 1F 15 67            CMPA 0x1567
EE70 2B FF B0            JNE FAIL
EE73 2A 1F FA            LDA EQUAL
EE76 2D 01               CMPA #0x01
EE78 2B FF B0            JNE FAIL
EE7B 30 FF               LDA #0xFF
EE7D 1F 17 89            CMPA 0x1789
EE80 2B FF B0            JNE FAIL
EE83 2A 1F FA            LDA EQUAL
EE86 2D 01               CMPA #0x01
EE88 2B FF B0            JNE FAIL 
EE8B 30 AA               LDA #0xAA
EE8D 1F 15 67            CMPA 0x1567
EE90 2C FF B0            JEQ FAIL
EE93 2A 1F FA            LDA EQUAL
EE96 2D 00               CMPA #0x00
EE98 2B FF B0            JNE FAIL
EE9B 30 55               LDA #0x55
EE9D 1F 17 89            CMPA 0x1789
EEA0 2C FF B0            JEQ FAIL
EEA3 2A 1F FA            LDA EQUAL
EEA6 2D 00               CMPA #0x00
EEA8 2B FF B0            JNE FAIL
                         ; Test with symbolic address
EEAB 30 41               LDA #0x41      ; 'A'
EEAD 1F F9 41            CMPA MSGTXT1   ; '1' 
EEB0 2C FF B0            JEQ FAIL
EEB3 30 31               LDA #0x31      ; '1'
EEB5 1F F9 41            CMPA MSGTXT1   ; '1'
EEB8 2B FF B0            JNE FAIL
EEBB 30 57               LDA #0x57      ; 'W'
EEBD 1F F9 4E            CMPA MSGTXT2+6 ; 'W'
EEC0 2B FF B0            JNE FAIL
EEC3 30 54               LDA #0x54
EEC5 1F F9 54            CMPA MSGTXT3   ; 'T'
EEC8 2B FF B0            JNE FAIL
EECB 30 68               LDA #0x68
EECD 1F F9 55            CMPA MSGTXT3+1 ; 'h'
EED0 2B FF B0            JNE FAIL
EED3 30 69               LDA #0x69
EED5 1F F9 56            CMPA MSGTXT3+2 ; 'i'
EED8 2B FF B0            JNE FAIL
EEDB 30 73               LDA #0x73
EEDD 1F F9 57            CMPA MSGTXT3+3 ; 's'
EEE0 2B FF B0            JNE FAIL
EEE3 30 20               LDA #0x20
EEE5 1F F9 58            CMPA MSGTXT3+4 ; ' '
EEE8 2B FF B0            JNE FAIL
EEEB 30 69               LDA #0x69
EEED 1F F9 59            CMPA MSGTXT3+5 ; 'i'
EEF0 2B FF B0            JNE FAIL
EEF3 30 73               LDA #0x73
EEF5 1F F9 5A            CMPA MSGTXT3+6 ; 's'
EEF8 2B FF B0            JNE FAIL
EEFB 30 72               LDA #0x72      ; 'r'
EEFD 1F F9 8F            CMPA MSGTXT3+59
EF00 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.20 DECA  
                         ; DECREMENT REGISTER A
                         ; --------------------------------------------------------------------
EF03 30 20      TSTOP20  LDA #0x20
EF05 19                  NOTA
EF06 31 C0 00            STA LEDPORT ; Output to LED port
EF09 30 01               LDA #0x01
EF0B 20                  DECA
EF0C 2D 00               CMPA #0x00
EF0E 2B FF B0            JNE FAIL
EF11 20                  DECA
EF12 2D FF               CMPA #0xFF
EF14 2B FF B0            JNE FAIL
EF17 20                  DECA
EF18 2D FE               CMPA #0xFE
EF1A 2B FF B0            JNE FAIL
EF1D 30 80               LDA #0x80
EF1F 20                  DECA
EF20 2D 7F               CMPA #0x7F
EF22 2B FF B0            JNE FAIL
                         ; Test E flag
EF25 30 00               LDA #0x00   ; Clear E equal flag
EF27 31 1F FA            STA 0x1FFA 
EF2A 30 01               LDA #0x01
EF2C 20                  DECA
EF2D 2A 1F FA            LDA 0x1FFA
EF30 2D 01               CMPA #0x01 ; Check E flag is set
EF32 2B FF B0            JNE FAIL
EF35 30 00               LDA #0x00
EF37 20                  DECA
EF38 2A 1F FA            LDA 0x1FFA
EF3B 2D 00               CMPA #0x00 ; Check E flag is cleared
EF3D 2B FF B0            JNE FAIL
                         ; Check all bits for the E flag
EF40 30 81               LDA #0x81
EF42 20                  DECA
EF43 2A 1F FA            LDA 0x1FFA
EF46 2D 00               CMPA #0x00 ; Check E flag is cleared
EF48 2B FF B0            JNE FAIL
EF4B 30 41               LDA #0x41
EF4D 20                  DECA
EF4E 2A 1F FA            LDA 0x1FFA
EF51 2D 00               CMPA #0x00 ; Check E flag is cleared
EF53 2B FF B0            JNE FAIL
EF56 30 21               LDA #0x21
EF58 20                  DECA
EF59 2A 1F FA            LDA 0x1FFA
EF5C 2D 00               CMPA #0x00 ; Check E flag is cleared
EF5E 2B FF B0            JNE FAIL
EF61 30 11               LDA #0x11
EF63 20                  DECA
EF64 2A 1F FA            LDA 0x1FFA
EF67 2D 00               CMPA #0x00 ; Check E flag is cleared
EF69 2B FF B0            JNE FAIL
EF6C 30 09               LDA #0x09
EF6E 20                  DECA
EF6F 2A 1F FA            LDA 0x1FFA
EF72 2D 00               CMPA #0x00 ; Check E flag is cleared
EF74 2B FF B0            JNE FAIL
EF77 30 05               LDA #0x05
EF79 20                  DECA
EF7A 2A 1F FA            LDA 0x1FFA
EF7D 2D 00               CMPA #0x00 ; Check E flag is cleared
EF7F 2B FF B0            JNE FAIL
EF82 30 03               LDA #0x03
EF84 20                  DECA
EF85 2A 1F FA            LDA 0x1FFA
EF88 2D 00               CMPA #0x00 ; Check E flag is cleared
EF8A 2B FF B0            JNE FAIL
EF8D 30 02               LDA #0x02
EF8F 20                  DECA
EF90 2A 1F FA            LDA 0x1FFA
EF93 2D 00               CMPA #0x00 ; Check E flag is cleared
EF95 2B FF B0            JNE FAIL
                         ; Test all bits for DECA operation
EF98 30 FF               LDA #0xFF
EF9A 20                  DECA
EF9B 2D FE               CMPA #0xFE
EF9D 2B FF B0            JNE FAIL
EFA0 30 7F               LDA #0x7F
EFA2 20                  DECA
EFA3 2D 7E               CMPA #0x7E
EFA5 2B FF B0            JNE FAIL
EFA8 30 3F               LDA #0x3F
EFAA 20                  DECA
EFAB 2D 3E               CMPA #0x3E
EFAD 2B FF B0            JNE FAIL
EFB0 30 1F               LDA #0x1F
EFB2 20                  DECA
EFB3 2D 1E               CMPA #0x1E
EFB5 2B FF B0            JNE FAIL
EFB8 30 0F               LDA #0x0F
EFBA 20                  DECA
EFBB 2D 0E               CMPA #0x0E
EFBD 2B FF B0            JNE FAIL
EFC0 30 07               LDA #0x07
EFC2 20                  DECA
EFC3 2D 06               CMPA #0x06
EFC5 2B FF B0            JNE FAIL
EFC8 30 03               LDA #0x03
EFCA 20                  DECA
EFCB 2D 02               CMPA #0x02
EFCD 2B FF B0            JNE FAIL
EFD0 30 01               LDA #0x01
EFD2 20                  DECA
EFD3 2D 00               CMPA #0x00
EFD5 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.29 ADDA 0x****  
                         ; ADD A WITH BYTE AT ADDRESS, C UPDATE
                         ; --------------------------------------------------------------------
EFD8 30 29      TSTOP29  LDA #0x29
EFDA 19                  NOTA
EFDB 31 C0 00            STA LEDPORT ; Output to LED port
EFDE 30 5F               LDA #0x5F   ; Store a value in RAM
EFE0 31 01 23            STA 0x0123   
EFE3 30 63               LDA #0x63
EFE5 29 01 23            ADDA 0x0123 ; Add to A the byte at address location
EFE8 2D C2               CMPA #0xC2  ; Check the sum
EFEA 2B FF B0            JNE FAIL    ; Jump if result not good
EFED 2A 1F FB            LDA CARRY   ; Read the Carry Status
EFF0 2D 00               CMPA #0x00  ; No carry expected then C should be '0'
EFF2 2B FF B0            JNE FAIL    ; Error if carry is set

EFF5 30 AC               LDA #0xAC   ; Store another value in RAM
EFF7 31 10 56            STA 0x1056   
EFFA 30 D9               LDA #0xD9
EFFC 29 10 56            ADDA 0x1056 ; Add to A the byte at address location
EFFF 2D 85               CMPA #0x85  ; Check the sum LSB
F001 2B FF B0            JNE FAIL    ; Jump if result not as expected
F004 2A 1F FB            LDA CARRY   ; Read the Carry Status
F007 2D 01               CMPA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
F009 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.2A LDA 0x****  
                         ; LOAD A WITH BYTE AT ADDRESS (Direct Addressing)
                         ; --------------------------------------------------------------------
F00C 30 2A      TSTOP2A  LDA #0x2A
F00E 19                  NOTA
F00F 31 C0 00            STA LEDPORT ; Output to LED port
F012 30 AA               LDA #0xAA   ; Load immediate in register A
F014 2D AA               CMPA #0xAA
F016 2B FF B0            JNE FAIL
F019 30 01               LDA #0x01
F01B 2D 01               CMPA #0x01
F01D 2B FF B0            JNE FAIL
F020 30 02               LDA #0x02
F022 2D 02               CMPA #0x02
F024 2B FF B0            JNE FAIL
F027 30 04               LDA #0x04
F029 2D 04               CMPA #0x04
F02B 2B FF B0            JNE FAIL
F02E 30 08               LDA #0x08
F030 2D 08               CMPA #0x08
F032 2B FF B0            JNE FAIL
F035 30 10               LDA #0x10
F037 2D 10               CMPA #0x10
F039 2B FF B0            JNE FAIL
F03C 30 20               LDA #0x20
F03E 2D 20               CMPA #0x20
F040 2B FF B0            JNE FAIL
F043 30 40               LDA #0x40
F045 2D 40               CMPA #0x40
F047 2B FF B0            JNE FAIL
F04A 30 80               LDA #0x80
F04C 2D 80               CMPA #0x80
F04E 2B FF B0            JNE FAIL
F051 30 55               LDA #0x55
F053 2D 55               CMPA #0x55
F055 2B FF B0            JNE FAIL
F058 30 FF               LDA #0xFF
F05A 2D FF               CMPA #0xFF
F05C 2B FF B0            JNE FAIL
                         ; Now test symbolic with positive offset
F05F 2A F9 41            LDA MSGTXT1
F062 2D 31               CMPA #0x31     ; '1'
F064 2B FF B0            JNE FAIL
F067 2A F9 42            LDA MSGTXT1+1
F06A 2D 32               CMPA #0x32     ; '2'
F06C 2B FF B0            JNE FAIL
F06F 2A F9 43            LDA MSGTXT1+2
F072 2D 33               CMPA #0x33     ; '3'
F074 2B FF B0            JNE FAIL
F077 2A F9 44            LDA MSGTXT1+3
F07A 2D 41               CMPA #0x41     ; 'A'
F07C 2B FF B0            JNE FAIL
F07F 2A F9 45            LDA MSGTXT1+4
F082 2D 42               CMPA #0x42     ; 'B'
F084 2B FF B0            JNE FAIL
F087 2A F9 46            LDA MSGTXT1+5
F08A 2D 43               CMPA #0x43     ; 'C'
F08C 2B FF B0            JNE FAIL
F08F 2A F9 47            LDA MSGTXT1+6
F092 2D 00               CMPA #0x00     ; null terminator
F094 2B FF B0            JNE FAIL
F097 2A F9 4B            LDA MSGTXT1+10
F09A 2D 6C               CMPA #0x6C
F09C 2B FF B0            JNE FAIL
F09F 2A F9 4C            LDA MSGTXT1+11
F0A2 2D 6F               CMPA #0x6F
F0A4 2B FF B0            JNE FAIL
                         ; Now test symbolic with negative offset
F0A7 2A F9 54            LDA MSGTXT3
F0AA 2D 54               CMPA #0x54     ; 'T'
F0AC 2B FF B0            JNE FAIL
F0AF 2A F9 53            LDA MSGTXT3-1
F0B2 2D 00               CMPA #0x00     ; null terminator
F0B4 2B FF B0            JNE FAIL
F0B7 2A F9 52            LDA MSGTXT3-2
F0BA 2D 64               CMPA #0x64     ; 'd'
F0BC 2B FF B0            JNE FAIL
F0BF 2A F9 51            LDA MSGTXT3-3
F0C2 2D 6C               CMPA #0x6C     ; 'l'
F0C4 2B FF B0            JNE FAIL
F0C7 2A F9 4A            LDA MSGTXT3-10
F0CA 2D 6C               CMPA #0x6C
F0CC 2B FF B0            JNE FAIL
F0CF 2A F9 49            LDA MSGTXT3-11
F0D2 2D 65               CMPA #0x65
F0D4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2B JNE 0x****  
                         ; JUMP IF E=0
                         ; Only a partial validation because i do not have symbolic address
                         ; processing in the assembler program.
                         ; --------------------------------------------------------------------
F0D7 30 2B      TSTOP2B  LDA #0x2B
F0D9 19                  NOTA
F0DA 31 C0 00            STA LEDPORT ; Output to LED port
F0DD 30 6D               LDA #0x6D   ; Load a value in A
F0DF 2D 6D               CMPA #0x6D  ; Compare with the same value
F0E1 2B FF B0            JNE FAIL    ; Error if values are different
F0E4 30 10               LDA #0x10
F0E6 2D 10               CMPA #0x10
F0E8 2B FF B0            JNE FAIL
F0EB 30 01               LDA #0x01
F0ED 2D 01               CMPA #0x01
F0EF 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2C JEQ 0x****
                         ; JUMP IF E=1
                         ; --------------------------------------------------------------------
F0F2 30 2C      TST2C    LDA #0x2C
F0F4 19                  NOTA
F0F5 31 C0 00            STA LEDPORT ; Output to LED port
F0F8 30 7A               LDA #0x7A   ; Load a value in A
F0FA 2D 28               CMPA #0x28  ; Compare with a different value
F0FC 2C FF B0            JEQ FAIL    ; If appear identical then it's and error
F0FF 30 FE               LDA #0xFE   ; Again with adifference 
F101 2D FF               CMPA #0xFF
F103 2C FF B0            JEQ FAIL 
F106 30 01               LDA #0x01   ; Another with difference
F108 2D 10               CMPA #0x10
F10A 2C FF B0            JEQ FAIL
F10D 30 AB               LDA #0xAB   ; Now compare when values are identical
F10F 2D AB               CMPA #0xAB
F111 2C F1 17            JEQ TST2C_1 ; Testing if equal?
F114 32 FF B0            JMP FAIL    ; Result say both are not equal then it's a failure
F117 30 00      TST2C_1  LDA #0x00   ; Result say the values are identical so we are passing
F119 2D 00               CMPA #0x00
F11B 2C F1 21            JEQ TST2C_2 ; Testing if equal?
F11E 32 FF B0            JMP FAIL    ; if different then it's a failure
F121 30 01      TST2C_2  LDA #0x01
F123 2D 01               CMPA #0x01
F125 2C F1 2B            JEQ TST2C_3 ; Testing if equal?
F128 32 FF B0            JMP FAIL    ; if different then it's a failure
F12B 30 02      TST2C_3  LDA #0x02
F12D 2D 02               CMPA #0x02
F12F 2C F1 35            JEQ TST2C_4 ; Testing if equal?
F132 32 FF B0            JMP FAIL    ; if different then it's a failure
F135 30 04      TST2C_4  LDA #0x04
F137 2D 04               CMPA #0x04
F139 2C F1 3F            JEQ TST2C_5 ; Testing if equal?
F13C 32 FF B0            JMP FAIL    ; if different then it's a failure
F13F 30 08      TST2C_5  LDA #0x08
F141 2D 08               CMPA #0x08
F143 2C F1 49            JEQ TST2C_6 ; Testing if equal?
F146 32 FF B0            JMP FAIL    ; if different then it's a failure
F149 30 10      TST2C_6  LDA #0x10
F14B 2D 10               CMPA #0x10
F14D 2C F1 53            JEQ TST2C_7 ; Testing if equal?
F150 32 FF B0            JMP FAIL    ; if different then it's a failure
F153 30 20      TST2C_7  LDA #0x20
F155 2D 20               CMPA #0x20
F157 2C F1 5D            JEQ TST2C_8 ; Testing if equal?
F15A 32 FF B0            JMP FAIL    ; if different then it's a failure         
F15D 30 40      TST2C_8  LDA #0x40
F15F 2D 40               CMPA #0x40
F161 2C F1 67            JEQ TST2C_9 ; Testing if equal?
F164 32 FF B0            JMP FAIL    ; if different then it's a failure         
F167 30 80      TST2C_9  LDA #0x80
F169 2D 80               CMPA #0x80
F16B 2C F1 71            JEQ TST2C_10 ; Testing if equal?
F16E 32 FF B0            JMP FAIL    ; if different then it's a failure         
F171 09         TST2C_10 NOP
                         ; --------------------------------------------------------------------
                         ; OP.2D CMPA #0x**
                         ; COMPARE A WITH IMMEDIATE VALUE    EQUAL STATUS BIT (E) UPDATED
                         ; --------------------------------------------------------------------
F172 30 2D      TSTOP2D  LDA #0x2D
F174 19                  NOTA
F175 31 C0 00            STA LEDPORT ; Output to LED port
F178 30 12               LDA #0x12   ; Load a value in A
F17A 2D 12               CMPA #0x12  ; Compare with identical value
F17C 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS 
F17F 2D 01               CMPA #0x01  ; Verify bit<0> E = '1' and all others bits <7:1> are '0'    
F181 2B FF B0            JNE FAIL    ; If different then it's and error
F184 30 AA               LDA #0xAA
F186 2D 55               CMPA #0x55  ; Compare with a different value
F188 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS
F18B 2D 00               CMPA #0x00  ; Verify bit<0> E = '0' and all others bits <7:1> are '0'    
F18D 2B FF B0            JNE FAIL    ; If different then it's and error
                         ; --------------------------------------------------------------------
                         ; OP.2E ADCA #0x**
                         ; REG A = REG A + IMMEDIATE BYTE + CARRY (C)   
                         ; CARRY STATUS (C) IS UPDATED
                         ; --------------------------------------------------------------------
F190 30 2E      TSTOP2E  LDA #0x2E
F192 19                  NOTA
F193 31 C0 00            STA LEDPORT ; Output to LED port
F196 30 00               LDA #0x00   ; Clear CARRY (C)
F198 31 1F FB            STA CARRY      
F19B 30 45               LDA #0x45
F19D 2E 5B               ADCA #0x5B
F19F 2D A0               CMPA #0xA0  ; Verify summ
F1A1 2B FF B0            JNE FAIL
F1A4 2A 1F FB            LDA CARRY   ; Check carry
F1A7 2D 00               CMPA #0x00  ; Should be clear
F1A9 2B FF B0            JNE FAIL

F1AC 30 01               LDA #0x01   ; Set CARRY (C)
F1AE 31 1F FB            STA CARRY
F1B1 30 56               LDA #0x56
F1B3 2E 6D               ADCA #0x6D
F1B5 2D C4               CMPA #0xC4   ; Verify summ
F1B7 2B FF B0            JNE FAIL
F1BA 2A 1F FB            LDA CARRY   ; Check carry
F1BD 2D 00               CMPA #0x00  ; Should be clear
F1BF 2B FF B0            JNE FAIL

F1C2 30 00               LDA #0x00   ; Clear CARRY (C)
F1C4 31 1F FB            STA CARRY
F1C7 30 7F               LDA #0x7F
F1C9 2E DE               ADCA #0xDE
F1CB 2D 5D               CMPA #0x5D  ; Verify summ
F1CD 2B FF B0            JNE FAIL
F1D0 2A 1F FB            LDA CARRY   ; Check carry
F1D3 2D 01               CMPA #0x01  ; Should be set
F1D5 2B FF B0            JNE FAIL

F1D8 30 01               LDA #0x01   ; Set CARRY (C)
F1DA 31 1F FB            STA CARRY
F1DD 30 FF               LDA #0xFF
F1DF 2E FF               ADCA #0xFF
F1E1 2D FF               CMPA #0xFF  ; Verify summ
F1E3 2B FF B0            JNE FAIL
F1E6 2A 1F FB            LDA CARRY   ; Check carry
F1E9 2D 01               CMPA #0x01  ; Should be set
F1EB 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2F ADDA #0x**
                         ; ACCA+M>ACCA     C UPDATED
                         ; --------------------------------------------------------------------
F1EE 30 2F      TSTOP2F  LDA #0x2F
F1F0 19                  NOTA
F1F1 31 C0 00            STA LEDPORT ; Output to LED port
F1F4 30 23               LDA #0x23
F1F6 2F 45               ADDA #0x45
F1F8 2D 68               CMPA #0x68
F1FA 2B FF B0            JNE FAIL
F1FD 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F200 2D 00               CMPA #0x00  ; Expecting C=0
F202 2B FF B0            JNE FAIL
F205 30 8A               LDA #0x8A
F207 2F BD               ADDA #0xBD
F209 2D 47               CMPA #0x47   
F20B 2B FF B0            JNE FAIL
F20E 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F211 2D 01               CMPA #0x01  ; Expecting C=1
F213 2B FF B0            JNE FAIL
F216 30 01               LDA #0x01
F218 2F 02               ADDA #0x02
F21A 2D 03               CMPA #0x03
F21C 2B FF B0            JNE FAIL
F21F 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F222 2D 00               CMPA #0x00  ; Expecting C=0
F224 2B FF B0            JNE FAIL
F227 30 FF               LDA #0xFF
F229 2F FF               ADDA #0xFF
F22B 2D FE               CMPA #0xFE
F22D 2B FF B0            JNE FAIL
F230 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F233 2D 01               CMPA #0x01   ; Expecting C=1
F235 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.30 LDA #0x**  
                         ; LOAD IMMEDIATE VALUE IN REGISTER A
                         ; --------------------------------------------------------------------
F238 30 30      TSTOP30  LDA #0x30
F23A 19                  NOTA
F23B 31 C0 00            STA LEDPORT ; Output to LED port
F23E 30 00               LDA #0x00
F240 2D 00               CMPA #0x00
F242 2B FF B0            JNE FAIL
F245 30 01               LDA #0x01
F247 2D 01               CMPA #0x01
F249 2B FF B0            JNE FAIL
F24C 30 02               LDA #0x02
F24E 2D 02               CMPA #0x02
F250 2B FF B0            JNE FAIL
F253 30 04               LDA #0x04
F255 2D 04               CMPA #0x04
F257 2B FF B0            JNE FAIL
F25A 30 08               LDA #0x08
F25C 2D 08               CMPA #0x08
F25E 2B FF B0            JNE FAIL
F261 30 10               LDA #0x10
F263 2D 10               CMPA #0x10
F265 2B FF B0            JNE FAIL
F268 30 20               LDA #0x20
F26A 2D 20               CMPA #0x20
F26C 2B FF B0            JNE FAIL
F26F 30 40               LDA #0x40
F271 2D 40               CMPA #0x40
F273 2B FF B0            JNE FAIL
F276 30 80               LDA #0x80
F278 2D 80               CMPA #0x80
F27A 2B FF B0            JNE FAIL
F27D 30 55               LDA #0x55
F27F 2D 55               CMPA #0x55
F281 2B FF B0            JNE FAIL
F284 30 AA               LDA #0xAA
F286 2D AA               CMPA #0xAA
F288 2B FF B0            JNE FAIL
F28B 30 FF               LDA #0xFF
F28D 2D FF               CMPA #0xFF
F28F 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.31 STA 0x**** 
                         ; STORE REG.A TO ADDRESSE
                         ; --------------------------------------------------------------------
F292 30 31      TSTOP31  LDA #0x31
F294 19                  NOTA
F295 31 C0 00            STA LEDPORT ; Output to LED port
F298 30 12               LDA #0x12   ; Write to RAM
F29A 31 00 00            STA 0x0000
F29D 30 23               LDA #0x23
F29F 31 00 01            STA 0x0001
F2A2 30 34               LDA #0x34
F2A4 31 00 02            STA 0x0002
F2A7 30 45               LDA #0x45
F2A9 31 00 04            STA 0x0004
F2AC 30 56               LDA #0x56
F2AE 31 00 08            STA 0x0008
F2B1 30 67               LDA #0x67
F2B3 31 00 10            STA 0x0010
F2B6 30 78               LDA #0x78
F2B8 31 00 20            STA 0x0020
F2BB 30 89               LDA #0x89
F2BD 31 00 40            STA 0x0040
F2C0 30 AB               LDA #0xAB
F2C2 31 00 80            STA 0x0080
F2C5 30 BC               LDA #0xBC
F2C7 31 01 00            STA 0x0100
F2CA 30 CD               LDA #0xCD
F2CC 31 02 00            STA 0x0200
F2CF 30 DE               LDA #0xDE
F2D1 31 04 00            STA 0x0400
F2D4 30 22               LDA #0x22
F2D6 31 08 00            STA 0x0800
F2D9 30 33               LDA #0x33
F2DB 31 10 00            STA 0x1000
F2DE 30 44               LDA #0x44
F2E0 31 17 00            STA 0x1700
F2E3 2A 00 00            LDA 0x0000  ; Read from RAM and compare
F2E6 2D 12               CMPA #0x12
F2E8 2B FF B0            JNE FAIL
F2EB 2A 00 01            LDA 0x0001
F2EE 2D 23               CMPA #0x23
F2F0 2B FF B0            JNE FAIL
F2F3 2A 00 02            LDA 0x0002
F2F6 2D 34               CMPA #0x34
F2F8 2B FF B0            JNE FAIL
F2FB 2A 00 04            LDA 0x0004
F2FE 2D 45               CMPA #0x45
F300 2B FF B0            JNE FAIL
F303 2A 00 08            LDA 0x0008
F306 2D 56               CMPA #0x56
F308 2B FF B0            JNE FAIL
F30B 2A 00 10            LDA 0x0010
F30E 2D 67               CMPA #0x67
F310 2B FF B0            JNE FAIL
F313 2A 00 20            LDA 0x0020
F316 2D 78               CMPA #0x78
F318 2B FF B0            JNE FAIL
F31B 2A 00 40            LDA 0x0040
F31E 2D 89               CMPA #0x89
F320 2B FF B0            JNE FAIL
F323 2A 00 80            LDA 0x0080
F326 2D AB               CMPA #0xAB
F328 2B FF B0            JNE FAIL
F32B 2A 01 00            LDA 0x0100
F32E 2D BC               CMPA #0xBC
F330 2B FF B0            JNE FAIL
F333 2A 02 00            LDA 0x0200
F336 2D CD               CMPA #0xCD
F338 2B FF B0            JNE FAIL
F33B 2A 04 00            LDA 0x0400
F33E 2D DE               CMPA #0xDE
F340 2B FF B0            JNE FAIL
F343 2A 08 00            LDA 0x0800
F346 2D 22               CMPA #0x22
F348 2B FF B0            JNE FAIL
F34B 2A 10 00            LDA 0x1000
F34E 2D 33               CMPA #0x33
F350 2B FF B0            JNE FAIL
F353 2A 17 00            LDA 0x1700
F356 2D 44               CMPA #0x44
F358 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.32 JMP 0x**** 
                         ; JUMP INCONDITIONAL TO ADDRESS
                         ; --------------------------------------------------------------------
                         ;LDA #0x32
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port

                         ; --------------------------------------------------------------------
                         ; OP.33 ANDA #0x**  REGISTER A AND LOGICAL IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
F35B 30 33      TSTOP33  LDA #0x33
F35D 19                  NOTA
F35E 31 C0 00            STA LEDPORT ; Output to LED port
F361 30 FF               LDA #0xFF
F363 33 52               ANDA #0x52
F365 2D 52               CMPA #0x52
F367 2B FF B0            JNE FAIL
F36A 30 E7               LDA #0xE7
F36C 33 3C               ANDA #0x3C
F36E 2D 24               CMPA #0x24
F370 2B FF B0            JNE FAIL
F373 30 00               LDA #0x00
F375 33 00               ANDA #0x00
F377 2D 00               CMPA #0x00
F379 2B FF B0            JNE FAIL
F37C 30 FF               LDA #0xFF
F37E 33 FF               ANDA #0xFF
F380 2D FF               CMPA #0xFF
F382 2B FF B0            JNE FAIL
F385 30 FF               LDA #0xFF
F387 33 55               ANDA #0x55
F389 2D 55               CMPA #0x55
F38B 2B FF B0            JNE FAIL
F38E 30 FF               LDA #0xFF
F390 33 00               ANDA #0x00
F392 2D 00               CMPA #0x00
F394 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; FIBONACCI TEST
                         ; first method using direct addressing
                         ; --------------------------------------------------------------------         
F397 30 40      TSTFB1   LDA #0x40
F399 19                  NOTA
F39A 31 C0 00            STA LEDPORT ; Output to LED port
                                     ;
F39D 30 00               LDA #0x00   ; Init first number with 00H
F39F 31 10 00            STA 0x1000
F3A2 30 01               LDA #0x01   ; Init second number with 01H
F3A4 31 10 01            STA 0x1001
F3A7 2A 10 00            LDA 0x1000  ; Load first number in A
F3AA 29 10 01            ADDA 0x1001 ; Add second number to A
F3AD 31 10 02            STA 0x1002  ; Store the summ
F3B0 2D 01               CMPA #0x01  ; HEX   Decimal  Real Value (in 8 bit storage only)
F3B2 2B FF B0            JNE FAIL    ; x01   1        1

F3B5 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3B8 31 10 00            STA 0x1000
F3BB 2A 10 02            LDA 0x1002  ; Move summ to the second number
F3BE 31 10 01            STA 0x1001
F3C1 2A 10 00            LDA 0x1000  ; Load first number in A
F3C4 29 10 01            ADDA 0x1001 ; Add second number to A
F3C7 31 10 02            STA 0x1002  ; Store the summ
F3CA 2D 02               CMPA #0x02  ; HEX   Decimal  Real Value
F3CC 2B FF B0            JNE FAIL    ; x02   2        2

F3CF 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3D2 31 10 00            STA 0x1000
F3D5 2A 10 02            LDA 0x1002   ; Move summ to the second number
F3D8 31 10 01            STA 0x1001
F3DB 2A 10 00            LDA 0x1000  ; Load first number in A
F3DE 29 10 01            ADDA 0x1001 ; Add second number to A
F3E1 31 10 02            STA 0x1002  ; Store the summ
F3E4 2D 03               CMPA #0x03  ; HEX   Decimal  Real Value
F3E6 2B FF B0            JNE FAIL    ; x03   3        3

F3E9 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3EC 31 10 00            STA 0x1000
F3EF 2A 10 02            LDA 0x1002  ; Move summ to the second number
F3F2 31 10 01            STA 0x1001
F3F5 2A 10 00            LDA 0x1000  ; Load first number in A
F3F8 29 10 01            ADDA 0x1001 ; Add second number to A
F3FB 31 10 02            STA 0x1002  ; Store the summ
F3FE 2D 05               CMPA #0x05  ; HEX   Decimal  Real Value
F400 2B FF B0            JNE FAIL    ; x05   5        5

F403 2A 10 01            LDA 0x1001  ; Move second number to the first number
F406 31 10 00            STA 0x1000
F409 2A 10 02            LDA 0x1002  ; Move summ to the second number
F40C 31 10 01            STA 0x1001
F40F 2A 10 00            LDA 0x1000  ; Load first number in A
F412 29 10 01            ADDA 0x1001 ; Add second number to A
F415 31 10 02            STA 0x1002  ; Store the summ
F418 2D 08               CMPA #0x08  ; HEX   Decimal  Real Value
F41A 2B FF B0            JNE FAIL    ; x08   8        8

F41D 2A 10 01            LDA 0x1001  ; Move second number to the first number
F420 31 10 00            STA 0x1000
F423 2A 10 02            LDA 0x1002  ; Move summ to the second number
F426 31 10 01            STA 0x1001
F429 2A 10 00            LDA 0x1000  ; Load first number in A
F42C 29 10 01            ADDA 0x1001 ; Add second number to A
F42F 31 10 02            STA 0x1002  ; Store the summ
F432 2D 0D               CMPA #0x0D  ; HEX   Decimal  Real Value
F434 2B FF B0            JNE FAIL    ; x0D   13       13

F437 2A 10 01            LDA 0x1001  ; Move second number to the first number
F43A 31 10 00            STA 0x1000
F43D 2A 10 02            LDA 0x1002  ; Move summ to the second number
F440 31 10 01            STA 0x1001
F443 2A 10 00            LDA 0x1000  ; Load first number in A
F446 29 10 01            ADDA 0x1001 ; Add second number to A
F449 31 10 02            STA 0x1002  ; Store the summ
F44C 2D 15               CMPA #0x15  ; HEX   Decimal  Real Value
F44E 2B FF B0            JNE FAIL    ; x15   21       21

F451 2A 10 01            LDA 0x1001  ; Move second number to the first number
F454 31 10 00            STA 0x1000
F457 2A 10 02            LDA 0x1002  ; Move summ to the second number
F45A 31 10 01            STA 0x1001
F45D 2A 10 00            LDA 0x1000  ; Load first number in A
F460 29 10 01            ADDA 0x1001 ; Add second number to A
F463 31 10 02            STA 0x1002  ; Store the summ
F466 2D 22               CMPA #0x22  ; HEX   Decimal  Real Value
F468 2B FF B0            JNE FAIL    ; x22   34       34

F46B 2A 10 01            LDA 0x1001  ; Move second number to the first number
F46E 31 10 00            STA 0x1000
F471 2A 10 02            LDA 0x1002  ; Move summ to the second number
F474 31 10 01            STA 0x1001
F477 2A 10 00            LDA 0x1000  ; Load first number in A
F47A 29 10 01            ADDA 0x1001 ; Add second number to A
F47D 31 10 02            STA 0x1002  ; Store the summ
F480 2D 37               CMPA #0x37  ; HEX   Decimal  Real Value
F482 2B FF B0            JNE FAIL    ; x37   55       55

F485 2A 10 01            LDA 0x1001  ; Move second number to the first number
F488 31 10 00            STA 0x1000
F48B 2A 10 02            LDA 0x1002  ; Move summ to the second number
F48E 31 10 01            STA 0x1001
F491 2A 10 00            LDA 0x1000  ; Load first number in A
F494 29 10 01            ADDA 0x1001 ; Add second number to A
F497 31 10 02            STA 0x1002  ; Store the summ
F49A 2D 59               CMPA #0x59  ; HEX   Decimal  Real Value
F49C 2B FF B0            JNE FAIL    ; x59   89       89

F49F 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4A2 31 10 00            STA 0x1000
F4A5 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4A8 31 10 01            STA 0x1001
F4AB 2A 10 00            LDA 0x1000  ; Load first number in A
F4AE 29 10 01            ADDA 0x1001 ; Add second number to A
F4B1 31 10 02            STA 0x1002  ; Store the summ
F4B4 2D 90               CMPA #0x90  ; HEX   Decimal  Real Value
F4B6 2B FF B0            JNE FAIL    ; x90   144      144

F4B9 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4BC 31 10 00            STA 0x1000
F4BF 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4C2 31 10 01            STA 0x1001
F4C5 2A 10 00            LDA 0x1000  ; Load first number in A
F4C8 29 10 01            ADDA 0x1001 ; Add second number to A
F4CB 31 10 02            STA 0x1002  ; Store the summ
F4CE 2D E9               CMPA #0xE9  ; HEX   Decimal  Real Value
F4D0 2B FF B0            JNE FAIL    ; xE9   233      233

F4D3 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4D6 31 10 00            STA 0x1000
F4D9 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4DC 31 10 01            STA 0x1001
F4DF 2A 10 00            LDA 0x1000  ; Load first number in A
F4E2 29 10 01            ADDA 0x1001 ; Add second number to A
F4E5 31 10 02            STA 0x1002  ; Store the summ
F4E8 2D 79               CMPA #0x79  ; HEX   Decimal  Real Value
F4EA 2B FF B0            JNE FAIL    ; x79   121      377 - (256*1) = 121

F4ED 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4F0 31 10 00            STA 0x1000
F4F3 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4F6 31 10 01            STA 0x1001
F4F9 2A 10 00            LDA 0x1000  ; Load first number in A
F4FC 29 10 01            ADDA 0x1001 ; Add second number to A
F4FF 31 10 02            STA 0x1002  ; Store the summ
F502 2D 62               CMPA #0x62  ; HEX   Decimal  Real Value
F504 2B FF B0            JNE FAIL    ; x62   98       610 - (256*2) = 98

F507 2A 10 01            LDA 0x1001  ; Move second number to the first number
F50A 31 10 00            STA 0x1000
F50D 2A 10 02            LDA 0x1002  ; Move summ to the second number
F510 31 10 01            STA 0x1001
F513 2A 10 00            LDA 0x1000  ; Load first number in A
F516 29 10 01            ADDA 0x1001 ; Add second number to A
F519 31 10 02            STA 0x1002  ; Store the summ
F51C 2D DB               CMPA #0xDB  ; HEX   Decimal  Real Value
F51E 2B FF B0            JNE FAIL    ; xDB   219      987 - (256*3) = 219         
                         ; --------------------------------------------------------------------      
                         ; END OF FIBONACCI TEST (method using direct addressing)
                         ; --------------------------------------------------------------------          

                         ; ---------
                         ; Loop test
                         ; ---------
F521 30 41      LOOPTST  LDA #0x41
F523 19                  NOTA
F524 31 C0 00            STA LEDPORT    ; Output to LED port
F527 30 05               LDA #0x05      ; Init a counter of iterations
F529 31 00 0F            STA ?b0
F52C 2A 00 0F   LOOPTST1 LDA ?b0        ; Read counter
F52F 2D 00               CMPA #0x00     ; Is it 0?
F531 2C F5 3B            JEQ LOOPTST2   ; Yes then it's the end fo the test
F534 2F FF               ADDA #0xFF     ; Add -1 in complement 2 (equivalent to decrement)
F536 31 00 0F            STA ?b0        ; Save decremented count
F539 0C F1               JRA LOOPTST1
F53B 09         LOOPTST2 NOP            ; End of decrement loop         

                         ; -----------------
                         ; Math Library Test
                         ; -----------------
                         ; Test add16_w0_w0_w1  w0 <= w0 + w1
F53C 30 42               LDA #0x42
F53E 19                  NOTA
F53F 31 C0 00            STA LEDPORT ; Output to LED port
F542 30 BE               LDA #0xBE   ; w0 = 0xBEEF
F544 31 00 0E            STA ?b1
F547 30 EF               LDA #0xEF
F549 31 00 0F            STA ?b0
F54C 30 DE               LDA #0xDE   ; w1 = 0xDEAD
F54E 31 00 0C            STA ?b3
F551 30 AD               LDA #0xAD
F553 31 00 0D            STA ?b2
F556 06 FB B8            JSR ?add16_w0_w0_w1  ; w0 <= w0 + w1
F559 2A 00 0E            LDA ?b1              ; Expected w0 = 9D9C + C set
F55C 2D 9D               CMPA #0x9D
F55E 2B FF B0            JNE FAIL
F561 2A 00 0F            LDA ?b0
F564 2D 9C               CMPA #0x9C
F566 2B FF B0            JNE FAIL
F569 2A 1F FB            LDA CARRY
F56C 2D 01               CMPA #0x01
F56E 2B FF B0            JNE FAIL

                         ; Test add32_l0_l0_l1  l0 <= l0 + l1
F571 30 43               LDA #0x43
F573 19                  NOTA
F574 31 C0 00            STA LEDPORT ; Output to LED port
F577 30 89               LDA #0x89   ; l0 = 0x89ABCDEF
F579 31 00 0C            STA ?b3
F57C 30 AB               LDA #0xAB
F57E 31 00 0D            STA ?b2
F581 30 CD               LDA #0xCD
F583 31 00 0E            STA ?b1
F586 30 EF               LDA #0xEF
F588 31 00 0F            STA ?b0
F58B 30 DE               LDA #0xDE   ; l1 = DEADBEEF
F58D 31 00 08            STA ?b7
F590 30 AD               LDA #0xAD
F592 31 00 09            STA ?b6
F595 30 BE               LDA #0xBE
F597 31 00 0A            STA ?b5
F59A 30 EF               LDA #0xEF
F59C 31 00 0B            STA ?b4
F59F 06 FB CB            JSR ?add32_l0_l0_l1  ; l0 <= l0 + l1
F5A2 2A 00 0C            LDA ?b3              ; Expected l0 = 0x68598CDE + C set
F5A5 2D 68               CMPA #0x68
F5A7 2B FF B0            JNE FAIL
F5AA 2A 00 0D            LDA ?b2
F5AD 2D 59               CMPA #0x59
F5AF 2B FF B0            JNE FAIL
F5B2 2A 00 0E            LDA ?b1
F5B5 2D 8C               CMPA #0x8C
F5B7 2B FF B0            JNE FAIL
F5BA 2A 00 0F            LDA ?b0
F5BD 2D DE               CMPA #0xDE
F5BF 2B FF B0            JNE FAIL
F5C2 2A 1F FB            LDA CARRY
F5C5 2D 01               CMPA #0x01
F5C7 2B FF B0            JNE FAIL

                         ; Test ?inc32_l0_l0   l0 <= l0 + 1
F5CA 30 44               LDA #0x44
F5CC 19                  NOTA
F5CD 31 C0 00            STA LEDPORT ; Output to LED port
F5D0 30 FF               LDA #0xFF   ; l0 = 0xFFFFFFFF
F5D2 31 00 0C            STA ?b3
F5D5 30 FF               LDA #0xFF
F5D7 31 00 0D            STA ?b2
F5DA 30 FF               LDA #0xFF
F5DC 31 00 0E            STA ?b1
F5DF 30 FF               LDA #0xFF
F5E1 31 00 0F            STA ?b0
F5E4 06 FC 3A            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
                         ; Expected l0 = 0x00000000
F5E7 2A 00 0C            LDA ?b3     ; Expected l0 = 0x00000000
F5EA 2D 00               CMPA #0x00
F5EC 2B FF B0            JNE FAIL
F5EF 2A 00 0D            LDA ?b2
F5F2 2D 00               CMPA #0x00
F5F4 2B FF B0            JNE FAIL
F5F7 2A 00 0E            LDA ?b1
F5FA 2D 00               CMPA #0x00
F5FC 2B FF B0            JNE FAIL
F5FF 2A 00 0F            LDA ?b0
F602 2D 00               CMPA #0x00
F604 2B FF B0            JNE FAIL
F607 06 FC 3A            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
F60A 2A 00 0C            LDA ?b3
F60D 2D 00               CMPA #0x00
F60F 2B FF B0            JNE FAIL
F612 2A 00 0D            LDA ?b2
F615 2D 00               CMPA #0x00
F617 2B FF B0            JNE FAIL
F61A 2A 00 0E            LDA ?b1
F61D 2D 00               CMPA #0x00
F61F 2B FF B0            JNE FAIL
F622 2A 00 0F            LDA ?b0
F625 2D 01               CMPA #0x01
F627 2B FF B0            JNE FAIL
F62A 06 FC 3A            JSR ?inc32_l0_l0
F62D 06 FC 3A            JSR ?inc32_l0_l0
F630 06 FC 3A            JSR ?inc32_l0_l0
F633 06 FC 3A            JSR ?inc32_l0_l0
F636 06 FC 3A            JSR ?inc32_l0_l0
F639 06 FC 3A            JSR ?inc32_l0_l0
F63C 06 FC 3A            JSR ?inc32_l0_l0
F63F 06 FC 3A            JSR ?inc32_l0_l0
F642 06 FC 3A            JSR ?inc32_l0_l0
F645 06 FC 3A            JSR ?inc32_l0_l0
F648 06 FC 3A            JSR ?inc32_l0_l0
F64B 06 FC 3A            JSR ?inc32_l0_l0
F64E 06 FC 3A            JSR ?inc32_l0_l0
F651 06 FC 3A            JSR ?inc32_l0_l0
F654 06 FC 3A            JSR ?inc32_l0_l0
F657 06 FC 3A            JSR ?inc32_l0_l0
F65A 06 FC 3A            JSR ?inc32_l0_l0
F65D 2A 00 0C            LDA ?b3
F660 2D 00               CMPA #0x00
F662 2B FF B0            JNE FAIL
F665 2A 00 0D            LDA ?b2
F668 2D 00               CMPA #0x00
F66A 2B FF B0            JNE FAIL
F66D 2A 00 0E            LDA ?b1
F670 2D 00               CMPA #0x00
F672 2B FF B0            JNE FAIL
F675 2A 00 0F            LDA ?b0
F678 2D 12               CMPA #0x12
F67A 2B FF B0            JNE FAIL

                         ; Test  MUL 8-bit
                         ; mul8_w1_b1_b0   w1 (b3,b2) <= b1 * b0
F67D 30 45               LDA #0x45
F67F 19                  NOTA
F680 31 C0 00            STA LEDPORT ; Output to LED port
F683 30 02               LDA #0x02   ; 3 * 2 = 6
F685 31 00 0F            STA ?b0
F688 30 03               LDA #0x03
F68A 31 00 0E            STA ?b1
F68D 06 FC 8B            JSR ?mul8_w1_b1_b0
F690 2A 00 0C            LDA ?b3
F693 2D 00               CMPA #0x00
F695 2B FF B0            JNE FAIL
F698 2A 00 0D            LDA ?b2
F69B 2D 06               CMPA #0x06
F69D 2B FF B0            JNE FAIL

F6A0 30 FF               LDA #0xFF   ; 255 * 255 = 65025 (0xFF * 0xFF = 0xFE01)
F6A2 31 00 0F            STA ?b0
F6A5 31 00 0E            STA ?b1
F6A8 06 FC 8B            JSR ?mul8_w1_b1_b0
F6AB 2A 00 0C            LDA ?b3
F6AE 2D FE               CMPA #0xFE
F6B0 2B FF B0            JNE FAIL
F6B3 2A 00 0D            LDA ?b2
F6B6 2D 01               CMPA #0x01
F6B8 2B FF B0            JNE FAIL

F6BB 30 AB               LDA #0xAB   ; 171 * 205 = 35055 (0xAB * 0xCD = 0x88EF)
F6BD 31 00 0F            STA ?b0
F6C0 30 CD               LDA #0xCD
F6C2 31 00 0E            STA ?b1
F6C5 06 FC 8B            JSR ?mul8_w1_b1_b0
F6C8 2A 00 0C            LDA ?b3
F6CB 2D 88               CMPA #0x88
F6CD 2B FF B0            JNE FAIL
F6D0 2A 00 0D            LDA ?b2
F6D3 2D EF               CMPA #0xEF
F6D5 2B FF B0            JNE FAIL

F6D8 30 00               LDA #0x00   ; 0 * 0 = 0 (0x00 * 0x00 = 0x0000)
F6DA 31 00 0F            STA ?b0
F6DD 31 00 0E            STA ?b1
F6E0 06 FC 8B            JSR ?mul8_w1_b1_b0
F6E3 2A 00 0C            LDA ?b3
F6E6 2D 00               CMPA #0x00
F6E8 2B FF B0            JNE FAIL
F6EB 2A 00 0D            LDA ?b2
F6EE 2D 00               CMPA #0x00
F6F0 2B FF B0            JNE FAIL

                         ; Test  MUL 16-bit
                         ; Total time for 3 multiplications 140ms @ 2 MHz
                         ; 46ms per 16bit mult (21.7 multiplications per second)
                         ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
F6F3 30 46               LDA #0x46
F6F5 19                  NOTA
F6F6 31 C0 00            STA LEDPORT ; Output to LED port

F6F9 30 00               LDA #0x00   ; 0 * 0 = 0 (0x0000 * 0x0000 = 0x00000000)
F6FB 31 00 0F            STA ?b0
F6FE 31 00 0E            STA ?b1
F701 31 00 0D            STA ?b2
F704 31 00 0C            STA ?b3
F707 06 FC AC            JSR ?mul16_l1_w1_w0
F70A 2A 00 08            LDA ?b7
F70D 2D 00               CMPA #0x00
F70F 2B FF B0            JNE FAIL
F712 2A 00 09            LDA ?b6
F715 2D 00               CMPA #0x00
F717 2B FF B0            JNE FAIL
F71A 2A 00 0A            LDA ?b5
F71D 2D 00               CMPA #0x00
F71F 2B FF B0            JNE FAIL
F722 2A 00 0B            LDA ?b4
F725 2D 00               CMPA #0x00
F727 2B FF B0            JNE FAIL

F72A 30 FF               LDA #0xFF   ; 65535 * 65535 = 4294836225  (0xFFFF * 0xFFFF = 0xFFFE0001)
F72C 31 00 0F            STA ?b0
F72F 31 00 0E            STA ?b1
F732 31 00 0D            STA ?b2
F735 31 00 0C            STA ?b3
F738 06 FC AC            JSR ?mul16_l1_w1_w0
F73B 2A 00 08            LDA ?b7
F73E 2D FF               CMPA #0xFF
F740 2B FF B0            JNE FAIL
F743 2A 00 09            LDA ?b6
F746 2D FE               CMPA #0xFE
F748 2B FF B0            JNE FAIL
F74B 2A 00 0A            LDA ?b5
F74E 2D 00               CMPA #0x00
F750 2B FF B0            JNE FAIL
F753 2A 00 0B            LDA ?b4
F756 2D 01               CMPA #0x01
F758 2B FF B0            JNE FAIL

F75B 30 31               LDA #0x31   ; 12345 * 54321 = 670592745  (0x3039 * 0xD431 = 0x27F86EE9)
F75D 31 00 0F            STA ?b0
F760 30 D4               LDA #0xD4
F762 31 00 0E            STA ?b1
F765 30 39               LDA #0x39
F767 31 00 0D            STA ?b2
F76A 30 30               LDA #0x30
F76C 31 00 0C            STA ?b3
F76F 06 FC AC            JSR ?mul16_l1_w1_w0   
F772 2A 00 08            LDA ?b7
F775 2D 27               CMPA #0x27
F777 2B FF B0            JNE FAIL
F77A 2A 00 09            LDA ?b6
F77D 2D F8               CMPA #0xF8
F77F 2B FF B0            JNE FAIL
F782 2A 00 0A            LDA ?b5
F785 2D 6E               CMPA #0x6E
F787 2B FF B0            JNE FAIL
F78A 2A 00 0B            LDA ?b4
F78D 2D E9               CMPA #0xE9
F78F 2B FF B0            JNE FAIL  

                         ; Test load32_l0, load32_l1, load32_l2, load32_l3
F792 30 47               LDA #0x47
F794 19                  NOTA
F795 31 C0 00            STA LEDPORT ; Output to LED port
                         ; Test load32_l0
F798 04 12 34            LDX #0x1234
F79B 16 15 00            STX 0x1500        ; Store test address
F79E 04 56 78            LDX #0x5678
F7A1 16 15 02            STX 0x1502        ; Store test address
F7A4 04 15 00            LDX #0x1500       ; Load address of test data
F7A7 06 FA 37            JSR ?load32_l0    ; Load 32-bit value from memory to l0
F7AA 2A 00 0C            LDA ?b3           ; Verify loaded value
F7AD 2D 12               CMPA #0x12
F7AF 2B FF B0            JNE FAIL
F7B2 2A 00 0D            LDA ?b2
F7B5 2D 34               CMPA #0x34
F7B7 2B FF B0            JNE FAIL
F7BA 2A 00 0E            LDA ?b1
F7BD 2D 56               CMPA #0x56
F7BF 2B FF B0            JNE FAIL
F7C2 2A 00 0F            LDA ?b0
F7C5 2D 78               CMPA #0x78
F7C7 2B FF B0            JNE FAIL 
F7CA 1A 15 03            CMPX #0x1503      ; also verify current X value
F7CD 2B FF B0            JNE FAIL
                         ; Test load32_l1
F7D0 04 AB CD            LDX #0xABCD
F7D3 16 16 00            STX 0x1600        ; Store test address
F7D6 04 DE AD            LDX #0xDEAD
F7D9 16 16 02            STX 0x1602        ; Store test address
F7DC 04 16 00            LDX #0x1600       ; Load address of test data
F7DF 06 FA 4B            JSR ?load32_l1    ; Load 32-bit value from memory to l1
F7E2 2A 00 08            LDA ?b7           ; Verify loaded value
F7E5 2D AB               CMPA #0xAB
F7E7 2B FF B0            JNE FAIL
F7EA 2A 00 09            LDA ?b6
F7ED 2D CD               CMPA #0xCD
F7EF 2B FF B0            JNE FAIL
F7F2 2A 00 0A            LDA ?b5
F7F5 2D DE               CMPA #0xDE
F7F7 2B FF B0            JNE FAIL
F7FA 2A 00 0B            LDA ?b4
F7FD 2D AD               CMPA #0xAD
F7FF 2B FF B0            JNE FAIL 
F802 1A 16 03            CMPX #0x1603      ; also verify current X value
F805 2B FF B0            JNE FAIL
                         ; Test load32_l2
F808 04 1A 2B            LDX #0x1A2B
F80B 16 17 00            STX 0x1700        ; Store test address
F80E 04 3C 4D            LDX #0x3C4D
F811 16 17 02            STX 0x1702        ; Store test address
F814 04 17 00            LDX #0x1700       ; Load address of test data
F817 06 FA 5F            JSR ?load32_l2    ; Load 32-bit value from memory to l2
F81A 2A 00 04            LDA ?b11          ; Verify loaded value
F81D 2D 1A               CMPA #0x1A
F81F 2B FF B0            JNE FAIL
F822 2A 00 05            LDA ?b10
F825 2D 2B               CMPA #0x2B
F827 2B FF B0            JNE FAIL
F82A 2A 00 06            LDA ?b9
F82D 2D 3C               CMPA #0x3C
F82F 2B FF B0            JNE FAIL
F832 2A 00 07            LDA ?b8
F835 2D 4D               CMPA #0x4D
F837 2B FF B0            JNE FAIL 
F83A 1A 17 03            CMPX #0x1703      ; also verify current X value
F83D 2B FF B0            JNE FAIL
                         ; Test load32_l3
F840 04 2F 3E            LDX #0x2F3E
F843 16 18 00            STX 0x1800        ; Store test address
F846 04 4D 5C            LDX #0x4D5C
F849 16 18 02            STX 0x1802        ; Store test address
F84C 04 18 00            LDX #0x1800       ; Load address of test data
F84F 06 FA 73            JSR ?load32_l3    ; Load 32-bit value from memory to l3
F852 2A 00 00            LDA ?b15          ; Verify loaded value
F855 2D 2F               CMPA #0x2F
F857 2B FF B0            JNE FAIL
F85A 2A 00 01            LDA ?b14
F85D 2D 3E               CMPA #0x3E
F85F 2B FF B0            JNE FAIL
F862 2A 00 02            LDA ?b13
F865 2D 4D               CMPA #0x4D
F867 2B FF B0            JNE FAIL
F86A 2A 00 03            LDA ?b12
F86D 2D 5C               CMPA #0x5C
F86F 2B FF B0            JNE FAIL 
F872 1A 18 03            CMPX #0x1803      ; also verify current X value
F875 2B FF B0            JNE FAIL         

                         ; ---------------------
                         ; END Math Library Test
                         ; ---------------------

                               ; TEST EXECUTION FROM RAM
                               ; Copy a block of code from EEPROM to RAM
                               ; then call to execute this block in RAM. Resume execution from EEPROM
F878 30 80                     LDA #0x80
F87A 19                        NOTA
F87B 31 C0 00                  STA LEDPORT ; Output to LED port
F87E 32 F8 9F                  JMP BLKCODEEND   ; We skip the nex block of code to be copied in RAM
                               ; Simple 8 bit multiplication test code
F881 30 56      BLKCODESTART   LDA #0x56   ; 86 * 171 = 14706   (0x56 * 0xAB = 0x3972)
F883 31 00 0F                  STA ?b0
F886 30 AB                     LDA #0xAB
F888 31 00 0E                  STA ?b1
F88B 06 FC 8B                  JSR ?mul8_w1_b1_b0
F88E 2A 00 0C                  LDA ?b3
F891 2D 39                     CMPA #0x39
F893 2B FF B0                  JNE FAIL
F896 2A 00 0D                  LDA ?b2
F899 2D 72                     CMPA #0x72
F89B 2B FF B0                  JNE FAIL
F89E 07                        RTS
                               ; Copy the Block of code from EEPROM to RAM
F89F 04 F8 81   BLKCODEEND     LDX #BLKCODESTART ; Load address of BLKCODESTART
F8A2 16 00 0E                  STX ?b1           ; Store this adddress in ?b1:?b0
                RAMDESTSTART   EQU 0x1000
F8A5 04 10 00                  LDX #RAMDESTSTART ; Load address of RAM destination
F8A8 16 00 0C                  STX ?b3           ; Store this adddress in ?b3:?b2
                               ; copy a byte from source to destination
F8AB 1B 0E      LOOPTST47      LDX ?b1           ; Load X with source address in ?b1:?b0
F8AD 1A F8 9F                  CMPX #BLKCODEEND  ; Check if last byte copied
F8B0 2C F8 C1                  JEQ ENDCOPYTST47  ; if yes then quit copy loop
F8B3 0A                        LDA (X)           ; Load byte pointed by X
F8B4 05                        INCX
F8B5 16 00 0E                  STX ?b1
F8B8 1B 0C                     LDX ?b3           ; Load X with destination address in ?b3:?b2
F8BA 0B                        STA (X)           ; Store byte to address pointed by X
F8BB 05                        INCX
F8BC 16 00 0C                  STX ?b3
F8BF 0C EA                     JRA LOOPTST47
F8C1 06 10 00   ENDCOPYTST47   JSR RAMDESTSTART ; Jump to ram for code execution

                            ; ---------------------------------------
                            ; 32-bit Fibonacci using library routines
                            ; l2 = F(n), l1 = F(n-1), l0 = F(n-2)
                            ; ---------------------------------------
F8C4 30 81                  LDA #0x81
F8C6 19                     NOTA
F8C7 31 C0 00               STA LEDPORT
                LOOPCNT     EQU 0x0100           ; Loop counter storage
                FIBNUMB     EQU 0x1000           ; Output buffer for Fibonacci numbers
                            ; Initialize Fibonacci state
F8CA 06 F9 91               JSR ?clear32_l0      ; F(0) = 0
F8CD 06 FA 26               JSR ?set32_l1_to_1   ; F(1) = 1
F8D0 06 F9 AF               JSR ?clear32_l2
                            ; Output buffer
F8D3 04 10 00               LDX #FIBNUMB
F8D6 06 FA 87               JSR ?store32_l0      ; F(0)
F8D9 05                     INCX                 ; advance to next 32-bit slot
F8DA 06 FA 9B               JSR ?store32_l1      ; F(1)
F8DD 05                     INCX                 ; advance to next 32-bit slot
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
F8DE 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
F8E0 31 01 00               STA LOOPCNT
F8E3 06 FB F0   FIB32_LOOP  JSR ?add32_l2_l1_l0  ; l2 = l1 + l0
F8E6 06 FA AF               JSR ?store32_l2      ; store F(n)
F8E9 05                     INCX                 ; advance to next 32-bit slot
                            ; rotate registers
F8EA 06 FB 22               JSR ?mov32_l0_l1     ; l0 = l1
F8ED 06 FB 86               JSR ?mov32_l1_l2     ; l1 = l2
                            ;  DEC LOOPCNT    ; i dont have a DEC direct instruction for now
F8F0 2A 01 00               LDA LOOPCNT
F8F3 20                     DECA
F8F4 31 01 00               STA LOOPCNT
F8F7 2D 00                  CMPA #0x00
F8F9 2B F8 E3               JNE FIB32_LOOP
                            ; End of fibonacci number computation
                            ; Verify Fibonacci numbers stored in memory
F8FC 30 82                  LDA #0x82
F8FE 19                     NOTA
F8FF 31 C0 00               STA LEDPORT             
                            ; Memory layout:
                            ;   FIBNUMB: F(0), F(1), F(2), ...
                            ; Registers:
                            ;   l0 = previous-previous (F(n-2))
                            ;   l1 = previous          (F(n-1))
                            ;   l2 = current from mem  (F(n))
                            ;-----------------------------------------------
F902 04 10 00   FIB_VERIFY  LDX #FIBNUMB         ; pointer to first Fibonacci number
                            ; Load first two Fibonacci numbers from memory
F905 06 FA 37               JSR ?load32_l0       ; l0 = F(0)
F908 05                     INCX  
F909 06 FA 4B               JSR ?load32_l1       ; l1 = F(1)
F90C 05                     INCX  
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
F90D 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
F90F 31 01 00               STA LOOPCNT
F912 06 FA 5F   VERIFY_LOOP JSR ?load32_l2       ; Load next Fibonacci number from memory into l2
F915 05                     INCX  
F916 06 FC 15               JSR ?add32_l3_l1_l0  ; Compute sum l0 + l1  l3
F919 06 FC 60               JSR ?cmp32_l3_l2     ; Compare computed sum with loaded number
F91C 2B FF B0               JNE FAIL
F91F 06 FB 22               JSR ?mov32_l0_l1     ; Rotate registers for next iteration
F922 06 FB 86               JSR ?mov32_l1_l2
F925 2A 01 00               LDA LOOPCNT          ; Decrement loop counter
F928 2F FF                  ADDA #0xFF         ; decrement
F92A 31 01 00               STA LOOPCNT
F92D 2D 00                  CMPA #0x00
F92F 2B F9 12               JNE VERIFY_LOOP
                            ; End of fibonacci number verification


                            ; ---------------------------------------
                            ; 32-bit Factorial using library routines
                            ; ---------------------------------------
                ;            LDA #0x83
                ;            NOTA
                ;            STA LEDPORT
                ; Define factorial table in memory
                ;FACTTAB     EQU 0x2000
                ;COUNT       EQU 0x00FF   ; Counter storage
                ;FACT_GEN:      LDX #FACTTAB
                ;               ; 0! = 1
                ;               LDA #1
                ;               STA ?b0
                ;               CLR ?b1
                ;               CLR ?b2
                ;               CLR ?b3
                ;               JSR ?store32_l0

                ;               LDA #1
                ;               STA COUNT          ; n = 1

                ;FACT_GEN_LOOP: LDA COUNT
                ;               JSR ?mul32_l1_l0_u8   ; l1 = l0 * n
                ;               JSR ?store32_l1
                ;               JSR ?mov32_l0_l1

                ;               INC COUNT
                ;               LDA COUNT
                ;               CMPA #13
                ;               BNE FACT_GEN_LOOP

                ;                RTS


                ;fact[n] == fact[n-1] * n

                ;FACT_VERIFY:      LDX #FACTTAB
                ;
                ;                  JSR ?load32_l0    ; 0!
                ;                  JSR ?load32_l1    ; 1!

                ;                  LDA #2
                ;                  STA COUNT

                ;FACT_VERIFY_LOOP: JSR ?load32_l2    ; fact[n]
                ;                  LDA COUNT
                ;                  JSR ?mul32_l3_l1_u8
                ;                  JSR ?cmp32_l3_l2
                ;                  JNE FAIL
                ;
                ;                  JSR ?mov32_l0_l1
                ;                  JSR ?mov32_l1_l2

                ;                  INC COUNT
                ;                  LDA COUNT
                ;                  CMPA #13
                ;                  BNE FACT_VERIFY_LOOP

                ;                  RTS


                         ; LCD TEST        
F932 06 FC E2            JSR LCD_Init
F935 06 FC FE            JSR LCD_Clear

F938 04 F9 48            LDX #MSGTXT2
F93B 06 FD 0E            JSR LCD_PrintString         


F93E 32 E0 00            JMP 0xE000  ; Loop from start of diag test
                ; END OF MAIN PROGRAM

                         ; ---------------
                         ; Data Section
                         ; ---------------
                         ; Start of data section in EEPROM

                         ; ASCII text table for test
F941 31 32 33 41 42 43 00                             MSGTXT1        .ASCII "123ABC"
F948 48 65 6C 6C 6F 20 57 6F 72 6C 64 00              MSGTXT2        .ASCII "Hello World"
F954 54 68 69 73 20 69 73 20 61 20 74 65 78 74 20 6D  
     65 73 73 61 67 65 20 74 6F 20 74 65 73 74 20 61  
     73 63 69 69 20 74 65 78 74 20 74 61 62 6C 65 20  
     69 6E 20 61 73 73 65 6D 62 6C 65 72 00           MSGTXT3        .ASCII "This is a text message to test ascii text table in assembler"

                         ; ---------------------
                         ; Math library routines
                         ; ---------------------
                         ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------
                                  ; Clear 32bits
F991 30 00      ?clear32_l0       LDA #0x00
F993 31 00 0F                     STA ?b0
F996 31 00 0E                     STA ?b1
F999 31 00 0D                     STA ?b2
F99C 31 00 0C                     STA ?b3
F99F 07                           RTS
F9A0 30 00      ?clear32_l1       LDA #0x00
F9A2 31 00 0B                     STA ?b4
F9A5 31 00 0A                     STA ?b5
F9A8 31 00 09                     STA ?b6
F9AB 31 00 08                     STA ?b7
F9AE 07                           RTS   
F9AF 30 00      ?clear32_l2       LDA #0x00
F9B1 31 00 07                     STA ?b8
F9B4 31 00 06                     STA ?b9
F9B7 31 00 05                     STA ?b10
F9BA 31 00 04                     STA ?b11
F9BD 07                           RTS
F9BE 30 00      ?clear32_l3       LDA #0x00
F9C0 31 00 03                     STA ?b12
F9C3 31 00 02                     STA ?b13
F9C6 31 00 01                     STA ?b14
F9C9 31 00 00                     STA ?b15
F9CC 07                           RTS
                                  ; Clear 16bits
F9CD 30 00      ?clear16_w0       LDA #0x00
F9CF 31 00 0F                     STA ?b0
F9D2 31 00 0E                     STA ?b1
F9D5 07                           RTS
F9D6 30 00      ?clear16_w1       LDA #0x00
F9D8 31 00 0D                     STA ?b2
F9DB 31 00 0C                     STA ?b3
F9DE 07                           RTS
F9DF 30 00      ?clear16_w2       LDA #0x00
F9E1 31 00 0B                     STA ?b4
F9E4 31 00 0A                     STA ?b5
F9E7 07                           RTS
F9E8 30 00      ?clear16_w3       LDA #0x00
F9EA 31 00 09                     STA ?b6
F9ED 31 00 08                     STA ?b7
F9F0 07                           RTS
F9F1 30 00      ?clear16_w4       LDA #0x00
F9F3 31 00 07                     STA ?b8
F9F6 31 00 06                     STA ?b9     
F9F9 07                           RTS
F9FA 30 00      ?clear16_w5       LDA #0x00
F9FC 31 00 05                     STA ?b10
F9FF 31 00 04                     STA ?b11
FA02 07                           RTS
FA03 30 00      ?clear16_w6       LDA #0x00
FA05 31 00 03                     STA ?b12
FA08 31 00 02                     STA ?b13
FA0B 07                           RTS
FA0C 30 00      ?clear16_w7       LDA #0x00
FA0E 31 00 01                     STA ?b14
FA11 31 00 00                     STA ?b15
FA14 07                           RTS
                                  ; Set 32bits to 1
FA15 30 01      ?set32_l0_to_1    LDA #0x01
FA17 31 00 0F                     STA ?b0
FA1A 30 00                        LDA #0x00
FA1C 31 00 0E                     STA ?b1
FA1F 31 00 0D                     STA ?b2
FA22 31 00 0C                     STA ?b3
FA25 07                           RTS
FA26 30 01      ?set32_l1_to_1    LDA #0x01
FA28 31 00 0B                     STA ?b4
                                  ;CLR ?b5    ; I dont have a page 0 clear instruction yet
                                  ;CLR ?b6
                                  ;CLR ?b7
FA2B 30 00                        LDA #0x00
FA2D 31 00 0A                     STA ?b5
FA30 31 00 09                     STA ?b6
FA33 31 00 08                     STA ?b7
FA36 07                           RTS                  
                                  ; Load 32bits l0 using X register as pointer
FA37 0A         ?load32_l0        LDA (X)
FA38 31 00 0C                     STA ?b3
FA3B 05                           INCX
FA3C 0A                           LDA (X)
FA3D 31 00 0D                     STA ?b2
FA40 05                           INCX
FA41 0A                           LDA (X)
FA42 31 00 0E                     STA ?b1
FA45 05                           INCX
FA46 0A                           LDA (X)
FA47 31 00 0F                     STA ?b0
FA4A 07                           RTS
                                  ; Load 32bits l1 using X register as pointer
FA4B 0A         ?load32_l1        LDA (X)
FA4C 31 00 08                     STA ?b7
FA4F 05                           INCX
FA50 0A                           LDA (X)
FA51 31 00 09                     STA ?b6
FA54 05                           INCX
FA55 0A                           LDA (X)
FA56 31 00 0A                     STA ?b5
FA59 05                           INCX
FA5A 0A                           LDA (X)
FA5B 31 00 0B                     STA ?b4
FA5E 07                           RTS
                                  ; Load 32bits l2 using X register as pointer
FA5F 0A         ?load32_l2        LDA (X)
FA60 31 00 04                     STA ?b11
FA63 05                           INCX
FA64 0A                           LDA (X)
FA65 31 00 05                     STA ?b10
FA68 05                           INCX
FA69 0A                           LDA (X)
FA6A 31 00 06                     STA ?b9
FA6D 05                           INCX
FA6E 0A                           LDA (X)
FA6F 31 00 07                     STA ?b8
FA72 07                           RTS
                                  ; Load 32bits l3 using X register as pointer
FA73 0A         ?load32_l3        LDA (X)
FA74 31 00 00                     STA ?b15
FA77 05                           INCX
FA78 0A                           LDA (X)
FA79 31 00 01                     STA ?b14
FA7C 05                           INCX
FA7D 0A                           LDA (X)
FA7E 31 00 02                     STA ?b13
FA81 05                           INCX
FA82 0A                           LDA (X)
FA83 31 00 03                     STA ?b12
FA86 07                           RTS                   
                                  ; Store 32bits l0 using X register as pointer
FA87 2A 00 0C   ?store32_l0       LDA ?b3
FA8A 0B                           STA (X)
FA8B 05                           INCX
FA8C 2A 00 0D                     LDA ?b2
FA8F 0B                           STA (X)
FA90 05                           INCX
FA91 2A 00 0E                     LDA ?b1
FA94 0B                           STA (X)
FA95 05                           INCX
FA96 2A 00 0F                     LDA ?b0
FA99 0B                           STA (X)
FA9A 07                           RTS
                                  ; Store 32bits l1 using X register as pointer
FA9B 2A 00 08   ?store32_l1       LDA ?b7
FA9E 0B                           STA (X)
FA9F 05                           INCX
FAA0 2A 00 09                     LDA ?b6
FAA3 0B                           STA (X)
FAA4 05                           INCX
FAA5 2A 00 0A                     LDA ?b5
FAA8 0B                           STA (X)
FAA9 05                           INCX
FAAA 2A 00 0B                     LDA ?b4
FAAD 0B                           STA (X)
FAAE 07                           RTS
                                  ; Store 32bits l2 using X register as pointer
FAAF 2A 00 04   ?store32_l2       LDA ?b11
FAB2 0B                           STA (X)
FAB3 05                           INCX
FAB4 2A 00 05                     LDA ?b10
FAB7 0B                           STA (X)
FAB8 05                           INCX
FAB9 2A 00 06                     LDA ?b9
FABC 0B                           STA (X)
FABD 05                           INCX
FABE 2A 00 07                     LDA ?b8
FAC1 0B                           STA (X)
FAC2 07                           RTS
                                  ; Store 32bits l3 using X register as pointer
FAC3 2A 00 00   ?store32_l3       LDA ?b15
FAC6 0B                           STA (X)
FAC7 05                           INCX
FAC8 2A 00 01                     LDA ?b14
FACB 0B                           STA (X)  
FACC 05                           INCX
FACD 2A 00 02                     LDA ?b13
FAD0 0B                           STA (X)
FAD1 05                           INCX
FAD2 2A 00 03                     LDA ?b12
FAD5 0B                           STA (X)
FAD6 07                           RTS
                                  ; Move 32 bits from l0 to l1
FAD7 2A 00 0C   ?mov32_l1_l0      LDA ?b3
FADA 31 00 08                     STA ?b7
FADD 2A 00 0D                     LDA ?b2
FAE0 31 00 09                     STA ?b6
FAE3 2A 00 0E                     LDA ?b1
FAE6 31 00 0A                     STA ?b5
FAE9 2A 00 0F                     LDA ?b0
FAEC 31 00 0B                     STA ?b4
FAEF 07                           RTS
                                  ; Move 32 bits from l0 to l2
FAF0 2A 00 0C   ?mov32_l2_l0      LDA ?b3
FAF3 31 00 04                     STA ?b11
FAF6 2A 00 0D                     LDA ?b2
FAF9 31 00 05                     STA ?b10
FAFC 2A 00 0E                     LDA ?b1
FAFF 31 00 06                     STA ?b9
FB02 2A 00 0F                     LDA ?b0
FB05 31 00 07                     STA ?b8
FB08 07                           RTS
                                  ; Move 32 bits from l0 to l3
FB09 2A 00 0C   ?mov32_l3_l0      LDA ?b3
FB0C 31 00 00                     STA ?b15
FB0F 2A 00 0D                     LDA ?b2
FB12 31 00 01                     STA ?b14
FB15 2A 00 0E                     LDA ?b1
FB18 31 00 02                     STA ?b13
FB1B 2A 00 0F                     LDA ?b0
FB1E 31 00 03                     STA ?b12
FB21 07                           RTS
                                  ; Move 32 bits from l1 to l0
FB22 2A 00 08   ?mov32_l0_l1      LDA ?b7
FB25 31 00 0C                     STA ?b3
FB28 2A 00 09                     LDA ?b6
FB2B 31 00 0D                     STA ?b2
FB2E 2A 00 0A                     LDA ?b5
FB31 31 00 0E                     STA ?b1
FB34 2A 00 0B                     LDA ?b4
FB37 31 00 0F                     STA ?b0
FB3A 07                           RTS
                                  ; Move 32 bits from l1 to l2
FB3B 2A 00 08   ?mov32_l2_l1      LDA ?b7
FB3E 31 00 04                     STA ?b11
FB41 2A 00 09                     LDA ?b6
FB44 31 00 05                     STA ?b10
FB47 2A 00 0A                     LDA ?b5
FB4A 31 00 06                     STA ?b9
FB4D 2A 00 0B                     LDA ?b4
FB50 31 00 07                     STA ?b8
FB53 07                           RTS
                                  ; Move 32 bits from l1 to l3
FB54 2A 00 08   ?mov32_l3_l1      LDA ?b7
FB57 31 00 00                     STA ?b15
FB5A 2A 00 09                     LDA ?b6
FB5D 31 00 01                     STA ?b14
FB60 2A 00 0A                     LDA ?b5
FB63 31 00 02                     STA ?b13
FB66 2A 00 0B                     LDA ?b4
FB69 31 00 03                     STA ?b12
FB6C 07                           RTS
                                  ; Move 32 bits from l2 to l0
FB6D 2A 00 04   ?mov32_l0_l2      LDA ?b11
FB70 31 00 0C                     STA ?b3
FB73 2A 00 05                     LDA ?b10
FB76 31 00 0D                     STA ?b2
FB79 2A 00 06                     LDA ?b9
FB7C 31 00 0E                     STA ?b1
FB7F 2A 00 07                     LDA ?b8
FB82 31 00 0F                     STA ?b0
FB85 07                           RTS
                                  ; Move 32 bits from l2 to l1
FB86 2A 00 04   ?mov32_l1_l2      LDA ?b11
FB89 31 00 08                     STA ?b7
FB8C 2A 00 05                     LDA ?b10
FB8F 31 00 09                     STA ?b6
FB92 2A 00 06                     LDA ?b9
FB95 31 00 0A                     STA ?b5
FB98 2A 00 07                     LDA ?b8
FB9B 31 00 0B                     STA ?b4
FB9E 07                           RTS
                                  ; Move 32 bits from l2 to l3
FB9F 2A 00 04   ?mov32_l3_l2      LDA ?b11
FBA2 31 00 00                     STA ?b15
FBA5 2A 00 05                     LDA ?b10
FBA8 31 00 01                     STA ?b14
FBAB 2A 00 06                     LDA ?b9
FBAE 31 00 02                     STA ?b13
FBB1 2A 00 07                     LDA ?b8
FBB4 31 00 03                     STA ?b12
FBB7 07                           RTS
                                  ; Addition on 16 bits  
                                  ; w0 <= w0 + w1
FBB8 2A 00 0F   ?add16_w0_w0_w1   LDA ?b0  
FBBB 29 00 0D                     ADDA ?b2
FBBE 31 00 0F                     STA ?b0
FBC1 2A 00 0E                     LDA ?b1
FBC4 28 00 0C                     ADCA ?b3
FBC7 31 00 0E                     STA ?b1
FBCA 07                           RTS
                                  ; Addition on 32 bits
                                  ; l0 <= l0 + l1
FBCB 2A 00 0F   ?add32_l0_l0_l1   LDA ?b0  
FBCE 29 00 0B                     ADDA ?b4
FBD1 31 00 0F                     STA ?b0
FBD4 2A 00 0E                     LDA ?b1
FBD7 28 00 0A                     ADCA ?b5
FBDA 31 00 0E                     STA ?b1
FBDD 2A 00 0D                     LDA ?b2
FBE0 28 00 09                     ADCA ?b6
FBE3 31 00 0D                     STA ?b2
FBE6 2A 00 0C                     LDA ?b3
FBE9 28 00 08                     ADCA ?b7
FBEC 31 00 0C                     STA ?b3
FBEF 07                           RTS
                                  ; l2 <= l1 + l0
FBF0 2A 00 0F   ?add32_l2_l1_l0   LDA ?b0  
FBF3 29 00 0B                     ADDA ?b4
FBF6 31 00 07                     STA ?b8
FBF9 2A 00 0E                     LDA ?b1
FBFC 28 00 0A                     ADCA ?b5
FBFF 31 00 06                     STA ?b9
FC02 2A 00 0D                     LDA ?b2
FC05 28 00 09                     ADCA ?b6
FC08 31 00 05                     STA ?b10
FC0B 2A 00 0C                     LDA ?b3
FC0E 28 00 08                     ADCA ?b7
FC11 31 00 04                     STA ?b11
FC14 07                           RTS
                                  ; l3 <= l1 + l0
FC15 2A 00 0F   ?add32_l3_l1_l0   LDA ?b0
FC18 29 00 0B                     ADDA ?b4
FC1B 31 00 03                     STA ?b12
FC1E 2A 00 0E                     LDA ?b1
FC21 28 00 0A                     ADCA ?b5
FC24 31 00 02                     STA ?b13
FC27 2A 00 0D                     LDA ?b2
FC2A 28 00 09                     ADCA ?b6
FC2D 31 00 01                     STA ?b14
FC30 2A 00 0C                     LDA ?b3
FC33 28 00 08                     ADCA ?b7
FC36 31 00 00                     STA ?b15
FC39 07                           RTS                  
                                  ; INC 32 bit
                                  ; l0 <= l0 + 1
FC3A 2A 00 0F   ?inc32_l0_l0      LDA ?b0
FC3D 03                           INCA
FC3E 31 00 0F                     STA ?b0
FC41 2B FC 5F                     JNE ?inc32_0x_0x_JP
FC44 2A 00 0E                     LDA ?b1
FC47 03                           INCA
FC48 31 00 0E                     STA ?b1
FC4B 2B FC 5F                     JNE ?inc32_0x_0x_JP
FC4E 2A 00 0D                     LDA ?b2
FC51 03                           INCA
FC52 31 00 0D                     STA ?b2
FC55 2B FC 5F                     JNE ?inc32_0x_0x_JP
FC58 2A 00 0C                     LDA ?b3
FC5B 03                           INCA
FC5C 31 00 0C                     STA ?b3
FC5F 07         ?inc32_0x_0x_JP   RTS

                                  ; Compare 32-bit registers
                                  ; Result: sets E flag if equal, clears if different
FC60 2A 00 07   ?cmp32_l3_l2      LDA ?b8
FC63 1F 00 03                     CMPA ?b12      ; This instruction not available yet
FC66 2B FC 85                     JNE ?cmp32_not_equal
FC69 2A 00 06                     LDA ?b9
FC6C 1F 00 02                     CMPA ?b13
FC6F 2B FC 85                     JNE ?cmp32_not_equal
FC72 2A 00 05                     LDA ?b10
FC75 1F 00 01                     CMPA ?b14
FC78 2B FC 85                     JNE ?cmp32_not_equal
FC7B 2A 00 04                     LDA ?b11
FC7E 1F 00 00                     CMPA ?b15
FC81 2B FC 85                     JNE ?cmp32_not_equal
                                  ; All bytes equal, E flag already set from last comparison
FC84 07                           RTS
FC85 30 00      ?cmp32_not_equal  LDA #0x00   ; Clear E flag    I dont have a direct way to clear E flag
FC87 31 00 0F                     STA ?b0
FC8A 07                           RTS

                                  ; MUL 8-bit
                                  ; w1 (b3,b2) <= b1 * b0
FC8B 30 00      ?mul8_w1_b1_b0    LDA #0x00   ; Only clear ?b3
FC8D 31 00 0C                     STA ?b3
FC90 04 00 08                     LDX #0x0008 ; Loop counter (8 bits)
FC93 15 00 0F   ?mul8_w1_b1_loop  SRL ?b0     ; Shift right ?b0 (check LSB)
FC96 0F 09                        JRNC ?mul8_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FC98 2A 00 0C                     LDA ?b3
FC9B 29 00 0E                     ADDA ?b1    ; Add multiplicand
FC9E 31 00 0C                     STA ?b3     ; Store back
FCA1 14 00 0C   ?mul8_skip_add    RRC ?b3     ; Shift right ?b3 ?b2   C -> 7 6 5 4 3 2 1 0 -> C
FCA4 14 00 0D                     RRC ?b2     ;                       C -> 7 6 5 4 3 2 1 0 -> C
FCA7 13                           DECXL       ; Decrement loop counter
FCA8 2B FC 93                     JNE ?mul8_w1_b1_loop
FCAB 07                           RTS

                                  ; MUL 16-bit
                                  ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
FCAC 30 00      ?mul16_l1_w1_w0   LDA #0x00   ; Only clear ?b7 and ?b6
FCAE 31 00 08                     STA ?b7
FCB1 31 00 09                     STA ?b6
FCB4 04 00 10                     LDX #0x0010 ; Loop counter (16 bits)
FCB7 15 00 0E   ?mul16_l1_w1_loop SRL ?b1     ; Shift right ?w0 (check LSB)  '0' -> 7 6 5 4 3 2 1 0 -> C
FCBA 14 00 0F                     RRC ?b0     ; C  -> 7 6 5 4 3 2 1 0 -> C
FCBD 0F 12                        JRNC ?mul16_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FCBF 2A 00 09                     LDA ?b6
FCC2 29 00 0D                     ADDA ?b2    ; Add multiplicand
FCC5 31 00 09                     STA ?b6     ; Store back
FCC8 2A 00 08                     LDA ?b7
FCCB 28 00 0C                     ADCA ?b3
FCCE 31 00 08                     STA ?b7
FCD1 14 00 08   ?mul16_skip_add   RRC ?b7     ; Shift right ?b7 ?b6 ?b5 ?b4   C -> 7 6 5 4 3 2 1 0 -> C 
FCD4 14 00 09                     RRC ?b6     ;                               C -> 7 6 5 4 3 2 1 0 -> C
FCD7 14 00 0A                     RRC ?b5
FCDA 14 00 0B                     RRC ?b4
FCDD 13                           DECXL       ; Decrement loop counter
FCDE 2B FC B7                     JNE ?mul16_l1_w1_loop
FCE1 07                           RTS


                                  ; MUL 32-bit by 8-bit unsigned
                                  ; l1 = l0 * A   (A = 8-bit multiplier, A <= 12)
                                  ; l0 = (b3,b2,b1,b0)
                                  ; result -> l1 = (b7..b4)
                ;?mul32_l1_l0_u8   ; ---- multiply LOW word ----
                ;                  STA TMPN          ; save multiplier

                ;                  LDA ?b0
                ;                  STA ?b0           ; w0 low
                ;                  LDA ?b1
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2           ; w1 = n
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = LO16 * n

                                  ; save low result
                ;                  LDA ?b4
                ;                  STA RES0
                ;                  LDA ?b5
                ;                  STA RES1

                                  ; ---- multiply HIGH word ----
                ;                  LDA ?b2           ; restore high word of l0
                ;                  STA ?b0
                ;                  LDA ?b3
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = HI16 * n

                                  ; ---- accumulate ----
                ;                  LDA ?b4
                ;                  ADDA RES1
                ;                  STA ?b5
                ;                  LDA ?b5
                ;                  ADCA #0
                ;                  STA ?b6
                ;                  LDA ?b6
                ;                  ADCA #0
                ;                  STA ?b7

                ;                  LDA RES0
                ;                  STA ?b4

                ;                  RTS


                ;--------------------------------------------
                ; LCD Main Initialization Routine
                ;--------------------------------------------
FCE2 30 FF      LCD_Init    LDA #0xFF         ; Wait >40ms (simple busy loop)
FCE4 20         Delay40ms   DECA
FCE5 2B FC E4               JNE Delay40ms

                            ; Function set: 8-bit, 2 line, 5x8 font
                            ; <5> 1
                            ; <4> DL = 1  0: 4-bit inteface, 1:8-bit interface
                            ; <3> N = 1   0: 1 Line, 1: 2 Lines
                            ; <2> F = 0   0: FONT_5x8, 1: FONT_5x10
                            ; <1> -  -
                            ; <0> -  -
FCE8 30 38                  LDA #0x38
FCEA 31 7C 00               STA LCD_CMD

                            ; Wait >4.1ms
FCED 30 F0                  LDA #0xF0
FCEF 20         Delay4ms    DECA
FCF0 2B FC EF               JNE Delay4ms

                            ; Display ON/OFF Control
                            ; Display ON, cursor OFF, blink OFF
                            ; <3> 1
                            ; <2> D = 1  Display ON/OFF Control 0:OFF, 1:ON
                            ; <1> C = 0  Cursor displayed 0:OFF, 1:ON
                            ; <0> B = 0  Blinking of cursor position character 0:OFF, 1:ON
FCF3 30 0C                  LDA #0x0C
FCF5 31 7C 00               STA LCD_CMD

                            ; Entry mode set
                            ; Entry mode: left-to-right, no shift
                            ; <2> 1
                            ; <1> I/D = 1  Increment/Decrement of DDRAM address 1: Increment, 0: Decrement
                            ; <0> S = 0    
FCF8 30 06                  LDA #0x06
FCFA 31 7C 00               STA LCD_CMD
FCFD 07                     RTS

                ;--------------------------------------------
                ; Clear display
                ;--------------------------------------------
FCFE 30 01      LCD_Clear   LDA #0x01      ; Clear display command; <0> = 1
FD00 31 7C 00               STA LCD_CMD
FD03 30 FF                  LDA #0xFF      ; Wait >1.5ms (for clear command)
FD05 20         DelayClear  DECA
FD06 2B FD 05               JNE DelayClear
FD09 07                     RTS

                ;--------------------------------------------
                ; Write a single character
                ; Input: A = ASCII code
                ;--------------------------------------------
FD0A 31 7C 01   LCD_WriteChar  STA LCD_DATA
FD0D 07                        RTS

                ;--------------------------------------------
                ; Print null-terminated string
                ; Input:
                ;   X = address of string
                ;--------------------------------------------
FD0E 0A         LCD_PrintString   LDA (X)        ; A = *X
FD0F 2D 00                        CMPA #0x00     ; end of string?
FD11 2C FD 1A                     JEQ LCD_PrDone
FD14 06 FD 0A                     JSR LCD_WriteChar
FD17 05                           INCX           ; X++
FD18 0C F4                        JRA LCD_PrintString
FD1A 07         LCD_PrDone        RTS

                         ; --------------------------------------------------------------------
                         ; Error routine
                         ; --------------------------------------------------------------------
                         ORG/0xFFB0  ; Diagnostic Error routine   
                         ;STOP        ; Stop execution
FFB0 32 FF B0   FAIL     JMP FAIL    ; Infinite Loop on error

                         ; --------------------------------------------------------------------
                         ; JSR and RTS Test subroutine
                         ; --------------------------------------------------------------------
                         ORG/0xFFC0
FFC0 30 11      TJSR1    LDA #0x11
FFC2 07                  RTS
                         ORG/0xFFC3
FFC3 30 22      TJSR2    LDA #0x22
FFC5 06 FF C0            JSR TJSR1
FFC8 07                  RTS
                         ORG/0xFFC9
FFC9 30 33      TJSR3    LDA #0x33
FFCB 06 FF C3            JSR TJSR2
FFCE 07                  RTS
                         ORG/0xFFCF
FFCF 30 44      TJSR4    LDA #0x44
FFD1 06 FF C9            JSR TJSR3
FFD4 07                  RTS
                         ORG/0xFFD5
FFD5 30 44      TJSR5    LDA #0x44
FFD7 06 FF CF            JSR TJSR4
FFDA 07                  RTS
                         ORG/0xFFDB
FFDB 30 55      TJSR6    LDA #0x55
FFDD 06 FF D5            JSR TJSR5
FFE0 07                  RTS
                         ORG/0xFFE1
FFE1 30 66      TJSR7    LDA #0x66
FFE3 06 FF DB            JSR TJSR6
FFE6 07                  RTS
                         ORG/0xFFE7
FFE7 30 77      TJSR8    LDA #0x77
FFE9 06 FF E1            JSR TJSR7
FFEC 07                  RTS
                         ORG/0xFFED
FFED 30 88      TJSR9    LDA #0x88
FFEF 06 FF E7            JSR TJSR8
FFF2 07                  RTS
                         ORG/0xFFF3
FFF3 30 99      TJSR10   LDA #0x99
FFF5 06 FF ED            JSR TJSR9
FFF8 07                  RTS
                         ; --------------------------------------------------------------------
                         ; Reset Vector
                         ; --------------------------------------------------------------------
                         ORG/0xFFFE  ; Set the Reset vector
FFFE E0                  DB 0xE0     ; MSB Reset Vector
FFFF 00                  DB 0x00     ; LSB Reset Vector


Symbol Table:
?b15                0000
?b14                0001
?b13                0002
?b12                0003
?b11                0004
?b10                0005
?b9                 0006
?b8                 0007
?b7                 0008
?b6                 0009
?b5                 000A
?b4                 000B
?b3                 000C
?b2                 000D
?b1                 000E
?b0                 000F
?w7                 0000
?w6                 0002
?w5                 0004
?w4                 0006
?w3                 0008
?w2                 000A
?w1                 000C
?w0                 000E
?l3                 0000
?l2                 0004
?l1                 0008
?l0                 000C
TEMP0               1FEC
TEMP1               1FED
TEMP2               1FEE
TEMP3               1FEF
SP                  1FF0
JSH                 1FF1
JSL                 1FF2
XH                  1FF3
XL                  1FF4
EQUAL               1FFA
CARRY               1FFB
REG_A               1FFC
IPH                 1FFE
IPL                 1FFF
LCD_CMD             7C00
LCD_DATA            7C01
LEDPORT             C000
START               E000
TST01               E006
TST02               E033
TSTOP03             E060
TSTOP04             E0F7
TSTOP05             E149
TSTOP06             E1C1
TSTOP09             E1E5
TSTOP0A             E1EE
TSTOP0B             E22C
TST0B_0             E288
TST0B_1             E28B
TST0B_2             E28F
TST0B_3             E294
TST0B_4             E29B
TST0B_5             E2AD
TST0B_6             E2B2
TST0B_7             E2C8
TST0B_8             E2CF
TST0B_9             E2D1
TST0B_10            E2D3
TST0B_11            E2E8
TST0B_12            E365
TST0B_13            E368
TSTOP0D             E369
TSTOP0E             E423
TSTOP0F             E4DD
TST0F_0             E4ED
TST0F_1             E4F7
TST0F_2             E4FA
TSTOP10             E4FB
TSTOP11             E57E
TSTOP12             E5A3
TSTOP13             E5C8
TSTOP14             E65E
TSTOP15             E73A
TSTOP16             E884
TSTOP17             E8E2
TSTOP18             E927
TSTOP19             E95A
TSTOP1A             E982
TSTOP1B             EA09
TSTOP1C             EA9B
TSTOP1D             EC20
TSTOP1E             EDDE
TSTOP1F             EE26
TSTOP20             EF03
TSTOP29             EFD8
TSTOP2A             F00C
TSTOP2B             F0D7
TST2C               F0F2
TST2C_1             F117
TST2C_2             F121
TST2C_3             F12B
TST2C_4             F135
TST2C_5             F13F
TST2C_6             F149
TST2C_7             F153
TST2C_8             F15D
TST2C_9             F167
TST2C_10            F171
TSTOP2D             F172
TSTOP2E             F190
TSTOP2F             F1EE
TSTOP30             F238
TSTOP31             F292
TSTOP33             F35B
TSTFB1              F397
LOOPTST             F521
LOOPTST1            F52C
LOOPTST2            F53B
BLKCODESTART        F881
BLKCODEEND          F89F
RAMDESTSTART        1000
LOOPTST47           F8AB
ENDCOPYTST47        F8C1
LOOPCNT             0100
FIBNUMB             1000
FIB32_LOOP          F8E3
FIB_VERIFY          F902
VERIFY_LOOP         F912
MSGTXT1             F941
MSGTXT2             F948
MSGTXT3             F954
?clear32_l0         F991
?clear32_l1         F9A0
?clear32_l2         F9AF
?clear32_l3         F9BE
?clear16_w0         F9CD
?clear16_w1         F9D6
?clear16_w2         F9DF
?clear16_w3         F9E8
?clear16_w4         F9F1
?clear16_w5         F9FA
?clear16_w6         FA03
?clear16_w7         FA0C
?set32_l0_to_1      FA15
?set32_l1_to_1      FA26
?load32_l0          FA37
?load32_l1          FA4B
?load32_l2          FA5F
?load32_l3          FA73
?store32_l0         FA87
?store32_l1         FA9B
?store32_l2         FAAF
?store32_l3         FAC3
?mov32_l1_l0        FAD7
?mov32_l2_l0        FAF0
?mov32_l3_l0        FB09
?mov32_l0_l1        FB22
?mov32_l2_l1        FB3B
?mov32_l3_l1        FB54
?mov32_l0_l2        FB6D
?mov32_l1_l2        FB86
?mov32_l3_l2        FB9F
?add16_w0_w0_w1     FBB8
?add32_l0_l0_l1     FBCB
?add32_l2_l1_l0     FBF0
?add32_l3_l1_l0     FC15
?inc32_l0_l0        FC3A
?inc32_0x_0x_JP     FC5F
?cmp32_l3_l2        FC60
?cmp32_not_equal    FC85
?mul8_w1_b1_b0      FC8B
?mul8_w1_b1_loop    FC93
?mul8_skip_add      FCA1
?mul16_l1_w1_w0     FCAC
?mul16_l1_w1_loop   FCB7
?mul16_skip_add     FCD1
LCD_Init            FCE2
Delay40ms           FCE4
Delay4ms            FCEF
LCD_Clear           FCFE
DelayClear          FD05
LCD_WriteChar       FD0A
LCD_PrintString     FD0E
LCD_PrDone          FD1A
FAIL                FFB0
TJSR1               FFC0
TJSR2               FFC3
TJSR3               FFC9
TJSR4               FFCF
TJSR5               FFD5
TJSR6               FFDB
TJSR7               FFE1
TJSR8               FFE7
TJSR9               FFED
TJSR10              FFF3
Assembly complete
