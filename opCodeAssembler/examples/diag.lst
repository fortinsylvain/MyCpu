                ; -----------------------------------------------------------------
                ; Homebrew MyCPU diagnostic program
                ; Author: Sylvain Fortin sylfortin71@hotmail.com
                ; Date : 3 february 2026
                ; Documentation : diag.asm is a test program that verifying every 
                ;                 assembler instructions of MyCPU.
                ; Memory map of the computer
                ; 0000H - 17FFH Total RAM space
                ; 00A0H - 00FFH Stack
                ; E000H - F000H EEPROM for application program
                ; -----------------------------------------------------------------

                ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------

                ?b15     EQU 0x0000
                ?b14     EQU 0x0001
                ?b13     EQU 0x0002
                ?b12     EQU 0x0003
                ?b11     EQU 0x0004
                ?b10     EQU 0x0005
                ?b9      EQU 0x0006
                ?b8      EQU 0x0007
                ?b7      EQU 0x0008
                ?b6      EQU 0x0009
                ?b5      EQU 0x000A
                ?b4      EQU 0x000B
                ?b3      EQU 0x000C
                ?b2      EQU 0x000D
                ?b1      EQU 0x000E
                ?b0      EQU 0x000F

                ?w7      EQU 0x0000  ; ?b15:?b14
                ?w6      EQU 0x0002  ; ?b13:?b12
                ?w5      EQU 0x0004  ; ?b11:?b10
                ?w4      EQU 0x0006  ; ?b9:?b8
                ?w3      EQU 0x0008  ; ?b7:?b6
                ?w2      EQU 0x000A  ; ?b5:?b4
                ?w1      EQU 0x000C  ; ?b3:?b2
                ?w0      EQU 0x000E  ; ?b1:?b0

                ?l3      EQU 0x0000  ; ?b15,?b14,?b13,?b12
                ?l2      EQU 0x0004  ; ?b11,?b10,?b9,?b8
                ?l1      EQU 0x0008  ; ?b7,?b6,?b5,?b4
                ?l0      EQU 0x000C  ; ?b3,?b2,?b1,?b0

                ; RAM Reserved location
                TEMP0    EQU 0x1FEC  ; TEMP0
                TEMP1    EQU 0x1FED  ; TEMP1
                TEMP2    EQU 0x1FEE  ; TEMP2
                TEMP3    EQU 0x1FEF  ; TEMP3
                SP       EQU 0x1FF0  ; SP      Stack Pointer 8 bit
                JSH      EQU 0x1FF1  ; JSH     Temporary storage for JSR MSB address
                JSL      EQU 0x1FF2  ; JSL          "       "     "   "  LSB    "
                XH       EQU 0x1FF3  ; X MSB   X Register MSB
                XL       EQU 0x1FF4  ; X LSB   X Register LSB
                EQUAL    EQU 0x1FFA  ; E       bit<0> Equal Status bit
                CARRY    EQU 0x1FFB  ; C       bit<0> Carry Status bit
                REG_A    EQU 0x1FFC  ; A       A Register
                IPH      EQU 0x1FFE  ; IPH	    Instruction Pointer MSB
                IPL      EQU 0x1FFF  ; IPL          "         "    LSB

                ; Diagnostic program variable
                DIAGLOOPCOUNTER EQU 0x01E0  ; Loop counter for diagnostics

                ;--------------------------------------------
                ; LCD Memory-Mapped I/O Addresses
                ;--------------------------------------------
                LCD_CMD  EQU 0x7C00
                LCD_DATA EQU 0x7C01
                ;--------------------------------------------
                ; LED PORT
                ;--------------------------------------------
                LEDPORT  EQU 0xC000  ; PORT for the LED

                ; Diagnostic program start
                         ORG/0xE000  ; EEPROM Start of the diagnostic program     
E000 30 00      START    LDA #0x00   ; Initialize diagnostic loop counter
E002 31 01 E0            STA DIAGLOOPCOUNTER
E005 30 00      LOOPDIAG LDA #0x00   ; Clear LED
E007 19                  NOTA
E008 31 C0 00            STA LEDPORT ; Output to LED port         
                         ; --------------------------------------------------------------------
                         ; Test Carry Status bit integrity
                         ; --------------------------------------------------------------------
E00B 30 01      TST01    LDA #0x01
E00D 19                  NOTA
E00E 31 C0 00            STA LEDPORT ; Output to LED port
E011 30 00               LDA #0x00
E013 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E016 2A 1F FB            LDA CARRY   ; Read Carry Status
E019 21 00               TEQA #0x00
E01B 2B FF B0            JNE FAIL
E01E 30 01               LDA #0x01
E020 31 1F FB            STA CARRY   ; Write 1 to carry bit <0>
E023 2A 1F FB            LDA CARRY   ; Read Carry Status
E026 21 01               TEQA #0x01
E028 2B FF B0            JNE FAIL
E02B 30 00               LDA #0x00
E02D 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E030 2A 1F FB            LDA CARRY   ; Read Carry Status
E033 21 00               TEQA #0x00
E035 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; Test Equal Status bit integrity
                         ; --------------------------------------------------------------------
E038 30 02      TST02    LDA #0x02
E03A 19                  NOTA
E03B 31 C0 00            STA LEDPORT ; Output to LED port
E03E 30 00               LDA #0x00
E040 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E043 2A 1F FA            LDA EQUAL   ; Read Equal Status
E046 21 00               TEQA #0x00
E048 2B FF B0            JNE FAIL
E04B 30 01               LDA #0x01
E04D 31 1F FA            STA EQUAL   ; Write 1 to Equal Status bit <0>
E050 2A 1F FA            LDA EQUAL   ; Read Equal Status
E053 21 01               TEQA #0x01
E055 2B FF B0            JNE FAIL
E058 30 00               LDA #0x00
E05A 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E05D 2A 1F FA            LDA EQUAL   ; Read Equal Status
E060 21 00               TEQA #0x00
E062 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.03 INCA  A = A + 1  INCREMENT REGISTRE A
                         ; E UPDATE, C unchanged
                         ; --------------------------------------------------------------------
E065 30 03      TSTOP03  LDA #0x03
E067 19                  NOTA
E068 31 C0 00            STA LEDPORT ; Output to LED port
E06B 30 00               LDA #0x00
E06D 03                  INCA
E06E 21 01               TEQA #0x01
E070 2B FF B0            JNE FAIL
E073 30 01               LDA #0x01
E075 03                  INCA
E076 21 02               TEQA #0x02
E078 2B FF B0            JNE FAIL
E07B 30 7C               LDA #0x7C
E07D 03                  INCA
E07E 03                  INCA
E07F 03                  INCA
E080 03                  INCA
E081 03                  INCA
E082 03                  INCA
E083 03                  INCA
E084 03                  INCA
E085 03                  INCA
E086 03                  INCA
E087 21 86               TEQA #0x86
E089 2B FF B0            JNE FAIL
E08C 30 FE               LDA #0xFE
E08E 03                  INCA
E08F 21 FF               TEQA #0xFF
E091 2B FF B0            JNE FAIL
E094 30 FF               LDA #0xFF
E096 03                  INCA
E097 21 00               TEQA #0x00
E099 2B FF B0            JNE FAIL
E09C 30 FF               LDA #0xFF
E09E 03                  INCA
E09F 03                  INCA
E0A0 21 01               TEQA #0x01
E0A2 2B FF B0            JNE FAIL
E0A5 03                  INCA
E0A6 03                  INCA
E0A7 03                  INCA
E0A8 03                  INCA
E0A9 21 05               TEQA #0x05
E0AB 2B FF B0            JNE FAIL
E0AE 03                  INCA
E0AF 03                  INCA
E0B0 03                  INCA
E0B1 03                  INCA
E0B2 03                  INCA
E0B3 03                  INCA
E0B4 03                  INCA
E0B5 03                  INCA
E0B6 21 0D               TEQA #0x0D
E0B8 2B FF B0            JNE FAIL
E0BB 30 00               LDA #0x00   ; Test Carry unchanged
E0BD 31 1F FB            STA CARRY   ; Clear Carry 
E0C0 30 FF               LDA #0xFF
E0C2 03                  INCA
E0C3 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0C6 21 00               TEQA #0x00  ; Expecting C=0 and <7:1> = 0
E0C8 2B FF B0            JNE FAIL
E0CB 30 01               LDA #0x01   ; Set Carry 
E0CD 31 1F FB            STA CARRY   
E0D0 30 EB               LDA #0xEB
E0D2 03                  INCA
E0D3 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0D6 21 01               TEQA #0x01  ; Expecting C=1 and <7:1> = 0
E0D8 2B FF B0            JNE FAIL
E0DB 30 FE               LDA #0xFE   ; Test Equal (Set when result is 0)
E0DD 03                  INCA
E0DE 2A 1F FA            LDA EQUAL   ; Read Equal status
E0E1 21 00               TEQA #0x00  ; Expecting E=0 and <7:1> = 0
E0E3 2B FF B0            JNE FAIL
E0E6 30 FF               LDA #0xFF
E0E8 03                  INCA
E0E9 2A 1F FA            LDA EQUAL   ; Read Equal status
E0EC 21 01               TEQA #0x01  ; Expecting E=1 and <7:1> = 0
E0EE 2B FF B0            JNE FAIL
E0F1 30 00               LDA #0x00
E0F3 03                  INCA
E0F4 2A 1F FA            LDA EQUAL
E0F7 21 00               TEQA #0x00  ; Expecting E=0 and <7:1> = 0
E0F9 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.04  LDX #0x****   Load X Register with 16 bits immediate value
                         ; --------------------------------------------------------------------
E0FC 30 04      TSTOP04  LDA #0x04
E0FE 19                  NOTA
E0FF 31 C0 00            STA LEDPORT ; Output to LED port
E102 04 12 34            LDX #0x1234
E105 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E108 21 12               TEQA #0x12
E10A 2B FF B0            JNE FAIL
E10D 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E110 21 34               TEQA #0x34
E112 2B FF B0            JNE FAIL
E115 04 AB CD            LDX #0xABCD
E118 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E11B 21 AB               TEQA #0xAB
E11D 2B FF B0            JNE FAIL
E120 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E123 21 CD               TEQA #0xCD
E125 2B FF B0            JNE FAIL
                         ; Test using symbolic
E128 04 00 0F            LDX #?b0    ; ?b0      EQU 0x000F
E12B 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E12E 21 00               TEQA #0x00
E130 2B FF B0            JNE FAIL
E133 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E136 21 0F               TEQA #0x0F
E138 2B FF B0            JNE FAIL
E13B 04 1F F0            LDX #SP     ; SP       EQU 0x1FF0
E13E 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E141 21 1F               TEQA #0x1F
E143 2B FF B0            JNE FAIL
E146 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E149 21 F0               TEQA #0xF0
E14B 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.05  INCX   Increment Register X,  Carry Not Updated
                         ; --------------------------------------------------------------------
E14E 30 05      TSTOP05  LDA #0x05
E150 19                  NOTA
E151 31 C0 00            STA LEDPORT ; Output to LED port
E154 04 00 00            LDX #0x0000 ; Clear X register
E157 05                  INCX        ; Increment X
E158 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E15B 21 01               TEQA #0x01
E15D 2B FF B0            JNE FAIL
E160 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E163 21 00               TEQA #0x00
E165 2B FF B0            JNE FAIL
E168 05                  INCX
E169 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E16C 21 02               TEQA #0x02
E16E 2B FF B0            JNE FAIL
E171 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E174 21 00               TEQA #0x00
E176 2B FF B0            JNE FAIL

E179 04 00 FF            LDX #0x00FF ; Test a carry set
E17C 05                  INCX        ; Increment X
E17D 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E180 21 00               TEQA #0x00
E182 2B FF B0            JNE FAIL
E185 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E188 21 01               TEQA #0x01
E18A 2B FF B0            JNE FAIL
E18D 05                  INCX        ; Increment X
E18E 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E191 21 01               TEQA #0x01
E193 2B FF B0            JNE FAIL
E196 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E199 21 01               TEQA #0x01
E19B 2B FF B0            JNE FAIL

E19E 04 1E FF            LDX #0x1EFF
E1A1 05                  INCX        ; Increment X
E1A2 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1A5 21 00               TEQA #0x00
E1A7 2B FF B0            JNE FAIL
E1AA 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1AD 21 1F               TEQA #0x1F
E1AF 2B FF B0            JNE FAIL

E1B2 04 FF FF            LDX #0xFFFF
E1B5 05                  INCX        ; Increment X
E1B6 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1B9 21 00               TEQA #0x00
E1BB 2B FF B0            JNE FAIL
E1BE 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1C1 21 00               TEQA #0x00
E1C3 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.06 JSR    Jump to SubRoutine
                         ; --------------------------------------------------------------------
E1C6 30 06      TSTOP06  LDA #0x06
E1C8 19                  NOTA
E1C9 31 C0 00            STA LEDPORT ; Output to LED port
E1CC 06 FF C0            JSR TJSR1   ; 1 layer
E1CF 06 FF C3            JSR TJSR2   ; 2
E1D2 06 FF C9            JSR TJSR3   ; 3
E1D5 06 FF CF            JSR TJSR4   ; 4
E1D8 06 FF D5            JSR TJSR5   ; 5
E1DB 06 FF DB            JSR TJSR6   ; 6
E1DE 06 FF E1            JSR TJSR7   ; 7
E1E1 06 FF E7            JSR TJSR8   ; 8
E1E4 06 FF ED            JSR TJSR9   ; 9
E1E7 06 FF F3            JSR TJSR10  ; 10
                         ; --------------------------------------------------------------------
                         ; OP.07 RTS    ReTurn from Subroutine
                         ; Tested in OP.06 JSR
                         ; --------------------------------------------------------------------
                         ;LDA #07H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.08 STOP
                         ; STOP EXECUTING
                         ; Cannot test here it will stop execution...
                         ; A diagnostic test failure is expected to call this instruction ending 
                         ; program exectution.
                         ; --------------------------------------------------------------------
                         ;LDA #08H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ;STOP
                         ; --------------------------------------------------------------------
                         ; OP.09 NOP   NO OPERATION
                         ; --------------------------------------------------------------------
E1EA 30 09      TSTOP09  LDA #0x09
E1EC 19                  NOTA
E1ED 31 C0 00            STA LEDPORT ; Output to LED port
E1F0 09                  NOP
E1F1 09                  NOP
E1F2 09                  NOP
                         ; --------------------------------------------------------------------
                         ; OP.0A LDA (X) Load Reg A Indexed
                         ; --------------------------------------------------------------------
E1F3 30 0A      TSTOP0A  LDA #0x0A
E1F5 19                  NOTA
E1F6 31 C0 00            STA LEDPORT ; Output to LED port
E1F9 30 55               LDA #0x55   ; Store some value in RAM
E1FB 31 01 00            STA 0x0100
E1FE 30 AA               LDA #0xAA
E200 31 01 01            STA 0x0101
E203 30 DE               LDA #0xDE
E205 31 01 F0            STA 0x01F0
E208 30 CA               LDA #0xCA
E20A 31 01 FF            STA 0x01FF
E20D 04 01 00            LDX #0x0100 ; Verify each locations
E210 0A                  LDA (X)
E211 21 55               TEQA #0x55
E213 2B FF B0            JNE FAIL    ; Jump if result not good
E216 04 01 01            LDX #0x0101
E219 0A                  LDA (X)
E21A 21 AA               TEQA #0xAA
E21C 2B FF B0            JNE FAIL
E21F 04 01 F0            LDX #0x01F0
E222 0A                  LDA (X)
E223 21 DE               TEQA #0xDE
E225 2B FF B0            JNE FAIL
E228 04 01 FF            LDX #0x01FF
E22B 0A                  LDA (X)
E22C 21 CA               TEQA #0xCA
E22E 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.0B STA (X) Store Reg A Indexed
                         ; --------------------------------------------------------------------
E231 30 0B      TSTOP0B  LDA #0x0B
E233 19                  NOTA
E234 31 C0 00            STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.0C JRA 0x** Unconditional relative jump
                         ; --------------------------------------------------------------------
                         ; Testing using hexadecimal value after the mnemonic
E237 30 0C               LDA #0x0C
E239 19                  NOTA
E23A 31 C0 00            STA LEDPORT ; Output to LED port
E23D 0C 00               JRA 0x00    ; Test jump foward, Execute next instruction
E23F 0C 01               JRA 0x01    ; Skip next instruction
E241 09                  NOP         ; 1
E242 0C 02               JRA 0x02    ; Skip next 2 instructions
E244 09                  NOP         ; 1
E245 09                  NOP         ; 2
E246 0C 03               JRA 0x03    ; Skip next 3 instructions
E248 09                  NOP         ; 1 
E249 09                  NOP         ; 2
E24A 09                  NOP         ; 3
E24B 0C 05               JRA 0x05    ; Skip next 5 instructions
E24D 09                  NOP         ; 1
E24E 09                  NOP         ; 2
E24F 09                  NOP         ; 3
E250 09                  NOP         ; 4
E251 09                  NOP         ; 5
E252 0C 10               JRA 0x10    ; Skip next 16 instructions
E254 09                  NOP         ; 1
E255 09                  NOP         ; 2
E256 09                  NOP         ; 3
E257 09                  NOP         ; 4
E258 09                  NOP         ; 5
E259 09                  NOP         ; 6
E25A 09                  NOP         ; 7
E25B 09                  NOP         ; 8
E25C 09                  NOP         ; 9
E25D 09                  NOP         ; 10
E25E 09                  NOP         ; 11
E25F 09                  NOP         ; 12
E260 09                  NOP         ; 13
E261 09                  NOP         ; 14
E262 09                  NOP         ; 15
E263 09                  NOP         ; 16
E264 0C 22               JRA 0x22    ; Skip next 34 bytes
E266 09                  NOP         ; 1
E267 09                  NOP         ; 2
E268 09                  NOP         ; 3
E269 0C 1F               JRA 0x1F   ; 4-5   Final jump to the end of thest
E26B 09                  NOP         ; 6
E26C 09                  NOP         ; 7
E26D 09                  NOP         ; 8
E26E 09                  NOP         ; 9
E26F 09                  NOP         ; 10
E270 09                  NOP         ; 11
E271 09                  NOP         ; 12
E272 09                  NOP         ; 13
E273 09                  NOP         ; 14
E274 09                  NOP         ; 15
E275 09                  NOP         ; 16
E276 09                  NOP         ; 17
E277 09                  NOP         ; 18
E278 09                  NOP         ; 19
E279 09                  NOP         ; 20
E27A 09                  NOP         ; 21
E27B 09                  NOP         ; 22
E27C 09                  NOP         ; 23
E27D 09                  NOP         ; 24
E27E 09                  NOP         ; 25
E27F 0C E8               JRA 0xE8    ; 26-27 Third Backward jump
E281 09                  NOP         ; 28
E282 09                  NOP         ; 29
E283 09                  NOP         ; 30
E284 09                  NOP         ; 31
E285 09                  NOP         ; 32
E286 0C F7               JRA 0xF7    ; 33-34 Second Backward jump
E288 0C FC               JRA 0xFC    ; First Backward jump
E28A 09                  NOP         ; Arrival of the last jump to end the test
                         ; Testing using symbolic address after the mnemonic
E28B 0C 00               JRA TST0B_0 ; Test jump foward, Execute next instruction
E28D 0C 01      TST0B_0  JRA TST0B_1 ; Skip next instruction
E28F 09                  NOP         ; 1
E290 0C 02      TST0B_1  JRA TST0B_2 ; Skip next 2 instructions
E292 09                  NOP         ; 1
E293 09                  NOP         ; 2
E294 0C 03      TST0B_2  JRA TST0B_3 ; Skip next 3 instructions
E296 09                  NOP         ; 1 
E297 09                  NOP         ; 2
E298 09                  NOP         ; 3
E299 0C 05      TST0B_3  JRA TST0B_4 ; Skip next 5 instructions
E29B 09                  NOP         ; 1
E29C 09                  NOP         ; 2
E29D 09                  NOP         ; 3
E29E 09                  NOP         ; 4
E29F 09                  NOP         ; 5
E2A0 0C 10      TST0B_4  JRA TST0B_5 ; Skip next 16 instructions
E2A2 09                  NOP         ; 1
E2A3 09                  NOP         ; 2
E2A4 09                  NOP         ; 3
E2A5 09                  NOP         ; 4
E2A6 09                  NOP         ; 5
E2A7 09                  NOP         ; 6
E2A8 09                  NOP         ; 7
E2A9 09                  NOP         ; 8
E2AA 09                  NOP         ; 9
E2AB 09                  NOP         ; 10
E2AC 09                  NOP         ; 11
E2AD 09                  NOP         ; 12
E2AE 09                  NOP         ; 13
E2AF 09                  NOP         ; 14
E2B0 09                  NOP         ; 15
E2B1 09                  NOP         ; 16
E2B2 0C 22      TST0B_5  JRA TST0B_9 ; Skip next 34 bytes
E2B4 09                  NOP         ; 1
E2B5 09                  NOP         ; 2
E2B6 09                  NOP         ; 3
E2B7 0C 1F      TST0B_6  JRA TST0B_10 ; 4-5   Final jump to the end of test
E2B9 09                  NOP         ; 6
E2BA 09                  NOP         ; 7
E2BB 09                  NOP         ; 8
E2BC 09                  NOP         ; 9
E2BD 09                  NOP         ; 10
E2BE 09                  NOP         ; 11
E2BF 09                  NOP         ; 12
E2C0 09                  NOP         ; 13
E2C1 09                  NOP         ; 14
E2C2 09                  NOP         ; 15
E2C3 09                  NOP         ; 16
E2C4 09                  NOP         ; 17
E2C5 09                  NOP         ; 18
E2C6 09                  NOP         ; 19
E2C7 09                  NOP         ; 20
E2C8 09                  NOP         ; 21
E2C9 09                  NOP         ; 22
E2CA 09                  NOP         ; 23
E2CB 09                  NOP         ; 24
E2CC 09                  NOP         ; 25
E2CD 0C E8      TST0B_7  JRA TST0B_6 ; 26-27 Third Backward jump
E2CF 09                  NOP         ; 28
E2D0 09                  NOP         ; 29
E2D1 09                  NOP         ; 30
E2D2 09                  NOP         ; 31
E2D3 09                  NOP         ; 32
E2D4 0C F7      TST0B_8  JRA TST0B_7 ; 33-34 Second Backward jump
E2D6 0C FC      TST0B_9  JRA TST0B_8 ; First Backward jump
E2D8 09         TST0B_10 NOP         ; Arrival of the last jump to end the test
                ;         ; Higher range testing using symbolic address after the mnemonic
E2D9 09                  NOP         ; These NOP make relative jump to exercise carry on MSB address boundary
E2DA 09                  NOP
E2DB 09                  NOP
E2DC 09                  NOP
E2DD 09                  NOP
E2DE 09                  NOP
E2DF 09                  NOP
E2E0 09                  NOP
E2E1 09                  NOP
E2E2 09                  NOP
E2E3 09                  NOP
E2E4 09                  NOP
E2E5 09                  NOP
E2E6 09                  NOP
E2E7 09                  NOP
E2E8 09                  NOP
E2E9 0C 7F               JRA TST0B_12
E2EB 09                  NOP         ; 1     1     
E2EC 09                  NOP
                ;         NOP
                ;         NOP
E2ED 0C 7E      TST0B_11 JRA TST0B_13
E2EF 09                  NOP
E2F0 09                  NOP
E2F1 09                  NOP
E2F2 09                  NOP
E2F3 09                  NOP
E2F4 09                  NOP         
E2F5 09                  NOP
E2F6 09                  NOP
E2F7 09                  NOP
E2F8 09                  NOP
E2F9 09                  NOP
E2FA 09                  NOP         ; 16
E2FB 09                  NOP         ; 1     2   
E2FC 09                  NOP
E2FD 09                  NOP
E2FE 09                  NOP
E2FF 09                  NOP
E300 09                  NOP
E301 09                  NOP
E302 09                  NOP
E303 09                  NOP
E304 09                  NOP         
E305 09                  NOP
E306 09                  NOP
E307 09                  NOP
E308 09                  NOP
E309 09                  NOP
E30A 09                  NOP         ; 16
E30B 09                  NOP         ; 1   3
E30C 09                  NOP
E30D 09                  NOP
E30E 09                  NOP
E30F 09                  NOP
E310 09                  NOP
E311 09                  NOP
E312 09                  NOP
E313 09                  NOP
E314 09                  NOP         
E315 09                  NOP
E316 09                  NOP
E317 09                  NOP
E318 09                  NOP
E319 09                  NOP
E31A 09                  NOP         ; 16
E31B 09                  NOP         ; 1   4
E31C 09                  NOP
E31D 09                  NOP
E31E 09                  NOP
E31F 09                  NOP
E320 09                  NOP
E321 09                  NOP
E322 09                  NOP
E323 09                  NOP
E324 09                  NOP         
E325 09                  NOP
E326 09                  NOP
E327 09                  NOP
E328 09                  NOP
E329 09                  NOP
E32A 09                  NOP         ; 16
E32B 09                  NOP         ; 1   5
E32C 09                  NOP
E32D 09                  NOP
E32E 09                  NOP
E32F 09                  NOP
E330 09                  NOP
E331 09                  NOP
E332 09                  NOP
E333 09                  NOP
E334 09                  NOP         
E335 09                  NOP
E336 09                  NOP
E337 09                  NOP
E338 09                  NOP
E339 09                  NOP
E33A 09                  NOP         ; 16
E33B 09                  NOP         ; 1   5
E33C 09                  NOP
E33D 09                  NOP
E33E 09                  NOP
E33F 09                  NOP
E340 09                  NOP
E341 09                  NOP
E342 09                  NOP
E343 09                  NOP
E344 09                  NOP         
E345 09                  NOP
E346 09                  NOP
E347 09                  NOP
E348 09                  NOP
E349 09                  NOP
E34A 09                  NOP         ; 16
E34B 09                  NOP         ; 1   6
E34C 09                  NOP
E34D 09                  NOP
E34E 09                  NOP
E34F 09                  NOP
E350 09                  NOP
E351 09                  NOP
E352 09                  NOP
E353 09                  NOP
E354 09                  NOP         
E355 09                  NOP
E356 09                  NOP
E357 09                  NOP
E358 09                  NOP
E359 09                  NOP
E35A 09                  NOP         ; 16
E35B 09                  NOP         ; 1   7
E35C 09                  NOP
E35D 09                  NOP
E35E 09                  NOP
E35F 09                  NOP
E360 09                  NOP
E361 09                  NOP
E362 09                  NOP
E363 09                  NOP
E364 09                  NOP         
E365 09                  NOP
E366 09                  NOP
E367 09                  NOP
E368 09                  NOP
E369 09                  NOP
                ;         NOP        ; 16
E36A 09         TST0B_12 NOP
E36B 0C 80               JRA TST0B_11
E36D 09         TST0B_13 NOP         ; final foward jump destination     
                         ; --------------------------------------------------------------------
                         ; OP.0D SRLA Shift Right Logical on Reg A
                         ;            0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E36E 30 0D      TSTOP0D  LDA #0x0D
E370 19                  NOTA
E371 31 C0 00            STA LEDPORT ; Output to LED port
E374 30 A5               LDA #0xA5
E376 0D                  SRLA
E377 21 52               TEQA #0x52
E379 2B FF B0            JNE FAIL    ; Jump if result not good
E37C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E37F 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E381 2B FF B0            JNE FAIL    ; Error if different
E384 30 A5               LDA #0xA5
E386 0D                  SRLA
E387 0D                  SRLA
E388 21 29               TEQA #0x29
E38A 2B FF B0            JNE FAIL    ; Jump if result not good
E38D 2A 1F FB            LDA CARRY   ; Read the Carry Status
E390 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E392 2B FF B0            JNE FAIL    ; Error if different
E395 30 A5               LDA #0xA5
E397 0D                  SRLA
E398 0D                  SRLA
E399 0D                  SRLA
E39A 21 14               TEQA #0x14
E39C 2B FF B0            JNE FAIL    ; Jump if result not good
E39F 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3A2 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E3A4 2B FF B0            JNE FAIL    ; Error if different
E3A7 30 A5               LDA #0xA5
E3A9 0D                  SRLA
E3AA 0D                  SRLA
E3AB 0D                  SRLA
E3AC 0D                  SRLA
E3AD 21 0A               TEQA #0x0A
E3AF 2B FF B0            JNE FAIL    ; Jump if result not good
E3B2 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3B5 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3B7 2B FF B0            JNE FAIL    ; Error if different
E3BA 30 A5               LDA #0xA5
E3BC 0D                  SRLA
E3BD 0D                  SRLA
E3BE 0D                  SRLA
E3BF 0D                  SRLA
E3C0 0D                  SRLA
E3C1 21 05               TEQA #0x05
E3C3 2B FF B0            JNE FAIL    ; Jump if result not good
E3C6 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3C9 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3CB 2B FF B0            JNE FAIL    ; Error if different
E3CE 30 A5               LDA #0xA5
E3D0 0D                  SRLA
E3D1 0D                  SRLA
E3D2 0D                  SRLA
E3D3 0D                  SRLA
E3D4 0D                  SRLA
E3D5 0D                  SRLA
E3D6 21 02               TEQA #0x02
E3D8 2B FF B0            JNE FAIL    ; Jump if result not good
E3DB 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3DE 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E3E0 2B FF B0            JNE FAIL    ; Error if different
E3E3 30 A5               LDA #0xA5
E3E5 0D                  SRLA
E3E6 0D                  SRLA
E3E7 0D                  SRLA
E3E8 0D                  SRLA
E3E9 0D                  SRLA
E3EA 0D                  SRLA
E3EB 0D                  SRLA
E3EC 21 01               TEQA #0x01
E3EE 2B FF B0            JNE FAIL    ; Jump if result not good
E3F1 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3F4 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3F6 2B FF B0            JNE FAIL    ; Error if different
E3F9 30 A5               LDA #0xA5
E3FB 0D                  SRLA
E3FC 0D                  SRLA
E3FD 0D                  SRLA
E3FE 0D                  SRLA
E3FF 0D                  SRLA
E400 0D                  SRLA
E401 0D                  SRLA
E402 0D                  SRLA
E403 21 00               TEQA #0x00
E405 2B FF B0            JNE FAIL    ; Jump if result not good
E408 2A 1F FB            LDA CARRY   ; Read the Carry Status
E40B 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E40D 2B FF B0            JNE FAIL    ; Error if different
E410 30 A5               LDA #0xA5
E412 0D                  SRLA
E413 0D                  SRLA
E414 0D                  SRLA
E415 0D                  SRLA
E416 0D                  SRLA
E417 0D                  SRLA
E418 0D                  SRLA
E419 0D                  SRLA
E41A 0D                  SRLA
E41B 21 00               TEQA #0x00
E41D 2B FF B0            JNE FAIL    ; Jump if result not good
E420 2A 1F FB            LDA CARRY   ; Read the Carry Status
E423 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E425 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0E SLLA Shift Left Logical on Reg A
                         ;       SLAA Shift Left Arithmetic on Reg A (SLAA same as SLLA)
                         ;            C <- b7 b6 b5 b4 b3 b2 b1 b0 <- 0
                         ; --------------------------------------------------------------------
E428 30 0E      TSTOP0E  LDA #0x0E
E42A 19                  NOTA
E42B 31 C0 00            STA LEDPORT ; Output to LED port
E42E 30 A5               LDA #0xA5
E430 0E                  SLLA
E431 21 4A               TEQA #0x4A
E433 2B FF B0            JNE FAIL    ; Jump if result not good
E436 2A 1F FB            LDA CARRY   ; Read the Carry Status
E439 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E43B 2B FF B0            JNE FAIL    ; Error if different
E43E 30 A5               LDA #0xA5
E440 0E                  SLLA
E441 0E                  SLLA
E442 21 94               TEQA #0x94
E444 2B FF B0            JNE FAIL    ; Jump if result not good
E447 2A 1F FB            LDA CARRY   ; Read the Carry Status
E44A 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E44C 2B FF B0            JNE FAIL    ; Error if different
E44F 30 A5               LDA #0xA5
E451 0E                  SLLA
E452 0E                  SLLA
E453 0E                  SLLA
E454 21 28               TEQA #0x28
E456 2B FF B0            JNE FAIL    ; Jump if result not good
E459 2A 1F FB            LDA CARRY   ; Read the Carry Status
E45C 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E45E 2B FF B0            JNE FAIL    ; Error if different
E461 30 A5               LDA #0xA5
E463 0E                  SLLA
E464 0E                  SLLA
E465 0E                  SLLA
E466 0E                  SLLA
E467 21 50               TEQA #0x50
E469 2B FF B0            JNE FAIL    ; Jump if result not good
E46C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E46F 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E471 2B FF B0            JNE FAIL    ; Error if different
E474 30 A5               LDA #0xA5
E476 0E                  SLLA
E477 0E                  SLLA
E478 0E                  SLLA
E479 0E                  SLLA
E47A 0E                  SLLA
E47B 21 A0               TEQA #0xA0
E47D 2B FF B0            JNE FAIL    ; Jump if result not good
E480 2A 1F FB            LDA CARRY   ; Read the Carry Status
E483 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E485 2B FF B0            JNE FAIL    ; Error if different
E488 30 A5               LDA #0xA5
E48A 0E                  SLLA
E48B 0E                  SLLA
E48C 0E                  SLLA
E48D 0E                  SLLA
E48E 0E                  SLLA
E48F 0E                  SLAA
E490 21 40               TEQA #0x40
E492 2B FF B0            JNE FAIL    ; Jump if result not good
E495 2A 1F FB            LDA CARRY   ; Read the Carry Status
E498 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E49A 2B FF B0            JNE FAIL    ; Error if different
E49D 30 A5               LDA #0xA5
E49F 0E                  SLLA
E4A0 0E                  SLLA
E4A1 0E                  SLLA
E4A2 0E                  SLLA
E4A3 0E                  SLLA
E4A4 0E                  SLAA
E4A5 0E                  SLAA
E4A6 21 80               TEQA #0x80
E4A8 2B FF B0            JNE FAIL    ; Jump if result not good
E4AB 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4AE 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4B0 2B FF B0            JNE FAIL    ; Error if different
E4B3 30 A5               LDA #0xA5
E4B5 0E                  SLLA
E4B6 0E                  SLLA
E4B7 0E                  SLLA
E4B8 0E                  SLLA
E4B9 0E                  SLLA
E4BA 0E                  SLAA
E4BB 0E                  SLAA
E4BC 0E                  SLAA
E4BD 21 00               TEQA #0x00
E4BF 2B FF B0            JNE FAIL    ; Jump if result not good
E4C2 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4C5 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E4C7 2B FF B0            JNE FAIL    ; Error if different
E4CA 30 A5               LDA #0xA5
E4CC 0E                  SLLA
E4CD 0E                  SLLA
E4CE 0E                  SLLA
E4CF 0E                  SLLA
E4D0 0E                  SLLA
E4D1 0E                  SLAA
E4D2 0E                  SLAA
E4D3 0E                  SLAA
E4D4 0E                  SLAA
E4D5 21 00               TEQA #0x00
E4D7 2B FF B0            JNE FAIL    ; Jump if result not good
E4DA 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4DD 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4DF 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0F 
                         ; JRNC Jump Relatif if Not Carry
                         ; --------------------------------------------------------------------
E4E2 30 0F      TSTOP0F  LDA #0x0F
E4E4 19                  NOTA
E4E5 31 C0 00            STA LEDPORT ; Output to LED port
E4E8 30 00               LDA #0x00   ; Clear carry
E4EA 31 1F FB            STA CARRY
E4ED 0F 03               JRNC TST0F_0
E4EF 32 FF B0            JMP FAIL
E4F2 30 01      TST0F_0  LDA #0x01   ; Set carry
E4F4 31 1F FB            STA CARRY
E4F7 0F 03               JRNC TST0F_1
E4F9 32 E4 FF            JMP TST0F_2
E4FC 32 FF B0   TST0F_1  JMP FAIL
E4FF 09         TST0F_2  NOP
                         ; --------------------------------------------------------------------
                         ; OP.10  RRCA   Rotate Right Logical Reg A through Carry 
                         ;               C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E500 30 10      TSTOP10  LDA #0x10
E502 19                  NOTA
E503 31 C0 00            STA LEDPORT ; Output to LED port
E506 30 00               LDA #0x00   ; Clear Carry
E508 31 1F FB            STA CARRY
E50B 10                  RRCA
E50C 21 00               TEQA #0x00
E50E 2B FF B0            JNE FAIL
E511 30 00               LDA #0x00   ; Clear Carry
E513 31 1F FB            STA CARRY
E516 10                  RRCA
E517 2A 1F FB            LDA CARRY
E51A 21 00               TEQA #0x00
E51C 2B FF B0            JNE FAIL
E51F 30 AA               LDA #0xAA   ; Test shifting
E521 10                  RRCA
E522 21 55               TEQA #0x55
E524 2B FF B0            JNE FAIL
E527 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E529 10                  RRCA
E52A 2A 1F FB            LDA CARRY
E52D 21 01               TEQA #0x01
E52F 2B FF B0            JNE FAIL
E532 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E534 31 1F FB            STA CARRY   ; insure carry is clear
E537 30 01               LDA #0x01   ; set bit <0> to '1'
E539 10                  RRCA
E53A 21 00               TEQA #0x00
E53C 2B FF B0            JNE FAIL
E53F 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E541 31 1F FB            STA CARRY   ; insure carry is clear
E544 30 01               LDA #0x01
E546 10                  RRCA
E547 10                  RRCA
E548 21 80               TEQA #0x80
E54A 2B FF B0            JNE FAIL
E54D 10                  RRCA        ; continue rotating this bit
E54E 21 40               TEQA #0x40
E550 2B FF B0            JNE FAIL
E553 10                  RRCA
E554 21 20               TEQA #0x20
E556 2B FF B0            JNE FAIL
E559 10                  RRCA
E55A 21 10               TEQA #0x10
E55C 2B FF B0            JNE FAIL
E55F 10                  RRCA
E560 21 08               TEQA #0x08
E562 2B FF B0            JNE FAIL
E565 10                  RRCA
E566 21 04               TEQA #0x04
E568 2B FF B0            JNE FAIL
E56B 10                  RRCA
E56C 21 02               TEQA #0x02
E56E 2B FF B0            JNE FAIL
E571 10                  RRCA
E572 21 01               TEQA #0x01
E574 2B FF B0            JNE FAIL
E577 10                  RRCA
E578 21 00               TEQA #0x00
E57A 2B FF B0            JNE FAIL
E57D 10                  RRCA
E57E 21 80               TEQA #0x80
E580 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.11  RCF   Reset Carry Flag   C <- 0
                         ; --------------------------------------------------------------------
E583 30 11      TSTOP11  LDA #0x11
E585 19                  NOTA
E586 31 C0 00            STA LEDPORT ; Output to LED port
E589 30 01               LDA #0x01   ; Set carry flag to 1
E58B 31 1F FB            STA CARRY
E58E 11                  RCF         ; Reset Carry Flag 
E58F 2A 1F FB            LDA CARRY   ; Check carry is now cleared
E592 21 00               TEQA #0x00
E594 2B FF B0            JNE FAIL
E597 11                  RCF         ; Do again a Reset Carry Flag 
E598 2A 1F FB            LDA CARRY   ; Check carry is still cleared
E59B 21 00               TEQA #0x00
E59D 2B FF B0            JNE FAIL
E5A0 30 A5               LDA #0xA5   ; Check register A is not affected by a Reset Carry Flag
E5A2 11                  RCF         ; Reset Carry Flag
E5A3 21 A5               TEQA #0xA5  ; If A value not same then fail
E5A5 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.12  SCF   Set Carry Flag   C <- 1
                         ; --------------------------------------------------------------------
E5A8 30 12      TSTOP12  LDA #0x12
E5AA 19                  NOTA
E5AB 31 C0 00            STA LEDPORT ; Output to LED port
E5AE 30 00               LDA #0x00   ; Clear carry flag
E5B0 31 1F FB            STA CARRY
E5B3 12                  SCF         ; Set Carry Flag 
E5B4 2A 1F FB            LDA CARRY   ; Check carry is set
E5B7 21 01               TEQA #0x01
E5B9 2B FF B0            JNE FAIL
E5BC 12                  SCF         ; Set Carry Flag again
E5BD 2A 1F FB            LDA CARRY   ; Check carry is still set
E5C0 21 01               TEQA #0x01
E5C2 2B FF B0            JNE FAIL
E5C5 30 BE               LDA #0xBE   ; Check register A is not affected by a Set Carry Flag
E5C7 12                  SCF         ; Set Carry Flag
E5C8 21 BE               TEQA #0xBE  ; If A value not same then fail
E5CA 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.13  DECXL   Decrement XL   E updated
                         ; --------------------------------------------------------------------
E5CD 30 13      TSTOP13  LDA #0x13
E5CF 19                  NOTA
E5D0 31 C0 00            STA LEDPORT ; Output to LED port
E5D3 04 FF FF            LDX #0xFFFF
E5D6 13                  DECXL
E5D7 2A 1F F3            LDA XH
E5DA 21 FF               TEQA #0xFF
E5DC 2B FF B0            JNE FAIL
E5DF 2A 1F F4            LDA XL
E5E2 21 FE               TEQA #0xFE
E5E4 2B FF B0            JNE FAIL
E5E7 13                  DECXL
E5E8 2A 1F F3            LDA XH
E5EB 21 FF               TEQA #0xFF
E5ED 2B FF B0            JNE FAIL
E5F0 2A 1F F4            LDA XL
E5F3 21 FD               TEQA #0xFD
E5F5 2B FF B0            JNE FAIL
E5F8 04 A5 02            LDX #0xA502
E5FB 13                  DECXL
E5FC 2A 1F F3            LDA XH
E5FF 21 A5               TEQA #0xA5
E601 2B FF B0            JNE FAIL
E604 2A 1F F4            LDA XL
E607 21 01               TEQA #0x01
E609 2B FF B0            JNE FAIL
E60C 13                  DECXL
E60D 2A 1F F3            LDA XH
E610 21 A5               TEQA #0xA5
E612 2B FF B0            JNE FAIL
E615 2A 1F F4            LDA XL
E618 21 00               TEQA #0x00
E61A 2B FF B0            JNE FAIL
E61D 13                  DECXL
E61E 2A 1F F3            LDA XH
E621 21 A5               TEQA #0xA5
E623 2B FF B0            JNE FAIL
E626 2A 1F F4            LDA XL
E629 21 FF               TEQA #0xFF
E62B 2B FF B0            JNE FAIL
E62E 13                  DECXL 
E62F 2A 1F F3            LDA XH
E632 21 A5               TEQA #0xA5
E634 2B FF B0            JNE FAIL
E637 2A 1F F4            LDA XL
E63A 21 FE               TEQA #0xFE
E63C 2B FF B0            JNE FAIL
E63F 04 00 02            LDX #0x0002 ; Check E status
E642 13                  DECXL
E643 2A 1F FA            LDA EQUAL
E646 21 00               TEQA #0x00
E648 2B FF B0            JNE FAIL
E64B 04 00 01            LDX #0x0001
E64E 13                  DECXL
E64F 2A 1F FA            LDA EQUAL
E652 21 01               TEQA #0x01
E654 2B FF B0            JNE FAIL
E657 04 FF FF            LDX #0xFFFF
E65A 13                  DECXL
E65B 2A 1F FA            LDA EQUAL
E65E 21 00               TEQA #0x00
E660 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.14  RRC 0x****   Rotate Right Logical Address location through Carry 
                         ;                     C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E663 30 14      TSTOP14  LDA #0x14
E665 19                  NOTA
E666 31 C0 00            STA LEDPORT ; Output to LED port
E669 30 00               LDA #0x00   ; Clear Carry
E66B 31 1F FB            STA CARRY
E66E 31 00 0F            STA ?b0
E671 14 00 0F            RRC ?b0
E674 2A 00 0F            LDA ?b0
E677 21 00               TEQA #0x00
E679 2B FF B0            JNE FAIL
E67C 30 00               LDA #0x00   ; Clear Carry
E67E 31 1F FB            STA CARRY
E681 31 00 0F            STA ?b0
E684 14 00 0F            RRC ?b0
E687 2A 1F FB            LDA CARRY
E68A 21 00               TEQA #0x00
E68C 2B FF B0            JNE FAIL
E68F 30 AA               LDA #0xAA   ; Test shifting
E691 31 00 0F            STA ?b0
E694 14 00 0F            RRC ?b0
E697 2A 00 0F            LDA ?b0
E69A 21 55               TEQA #0x55
E69C 2B FF B0            JNE FAIL
E69F 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E6A1 31 00 0F            STA ?b0
E6A4 14 00 0F            RRC ?b0
E6A7 2A 1F FB            LDA CARRY
E6AA 21 01               TEQA #0x01
E6AC 2B FF B0            JNE FAIL
E6AF 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E6B1 31 1F FB            STA CARRY   ; insure carry is clear
E6B4 30 01               LDA #0x01   ; set bit <0> to '1'
E6B6 31 00 0F            STA ?b0
E6B9 14 00 0F            RRC ?b0
E6BC 2A 00 0F            LDA ?b0
E6BF 21 00               TEQA #0x00
E6C1 2B FF B0            JNE FAIL
E6C4 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E6C6 31 1F FB            STA CARRY   ; insure carry is clear
E6C9 30 01               LDA #0x01
E6CB 31 00 0F            STA ?b0
E6CE 14 00 0F            RRC ?b0
E6D1 14 00 0F            RRC ?b0
E6D4 2A 00 0F            LDA ?b0
E6D7 21 80               TEQA #0x80
E6D9 2B FF B0            JNE FAIL
E6DC 14 00 0F            RRC ?b0     ; continue rotating this bit
E6DF 2A 00 0F            LDA ?b0
E6E2 21 40               TEQA #0x40
E6E4 2B FF B0            JNE FAIL
E6E7 14 00 0F            RRC ?b0
E6EA 2A 00 0F            LDA ?b0
E6ED 21 20               TEQA #0x20
E6EF 2B FF B0            JNE FAIL
E6F2 14 00 0F            RRC ?b0
E6F5 2A 00 0F            LDA ?b0
E6F8 21 10               TEQA #0x10
E6FA 2B FF B0            JNE FAIL
E6FD 14 00 0F            RRC ?b0
E700 2A 00 0F            LDA ?b0
E703 21 08               TEQA #0x08
E705 2B FF B0            JNE FAIL
E708 14 00 0F            RRC ?b0
E70B 2A 00 0F            LDA ?b0
E70E 21 04               TEQA #0x04
E710 2B FF B0            JNE FAIL
E713 14 00 0F            RRC ?b0
E716 2A 00 0F            LDA ?b0
E719 21 02               TEQA #0x02
E71B 2B FF B0            JNE FAIL
E71E 14 00 0F            RRC ?b0
E721 2A 00 0F            LDA ?b0
E724 21 01               TEQA #0x01
E726 2B FF B0            JNE FAIL
E729 14 00 0F            RRC ?b0
E72C 2A 00 0F            LDA ?b0
E72F 21 00               TEQA #0x00
E731 2B FF B0            JNE FAIL
E734 14 00 0F            RRC ?b0
E737 2A 00 0F            LDA ?b0
E73A 21 80               TEQA #0x80
E73C 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.15 SRL 0x****   Shift Right Logical on Address
                         ;                    0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E73F 30 15      TSTOP15  LDA #0x15
E741 19                  NOTA
E742 31 C0 00            STA LEDPORT ; Output to LED port
E745 30 A5               LDA #0xA5
E747 31 00 0F            STA ?b0
E74A 15 00 0F            SRL ?b0
E74D 2A 00 0F            LDA ?b0
E750 21 52               TEQA #0x52
E752 2B FF B0            JNE FAIL    ; Jump if result not good
E755 2A 1F FB            LDA CARRY   ; Read the Carry Status
E758 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E75A 2B FF B0            JNE FAIL    ; Error if different
E75D 30 A5               LDA #0xA5
E75F 31 00 0F            STA ?b0
E762 15 00 0F            SRL ?b0
E765 15 00 0F            SRL ?b0
E768 2A 00 0F            LDA ?b0
E76B 21 29               TEQA #0x29
E76D 2B FF B0            JNE FAIL    ; Jump if result not good
E770 2A 1F FB            LDA CARRY   ; Read the Carry Status
E773 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E775 2B FF B0            JNE FAIL    ; Error if different
E778 30 A5               LDA #0xA5
E77A 31 00 0F            STA ?b0
E77D 15 00 0F            SRL ?b0
E780 15 00 0F            SRL ?b0
E783 15 00 0F            SRL ?b0
E786 2A 00 0F            LDA ?b0
E789 21 14               TEQA #0x14
E78B 2B FF B0            JNE FAIL    ; Jump if result not good
E78E 2A 1F FB            LDA CARRY   ; Read the Carry Status
E791 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E793 2B FF B0            JNE FAIL    ; Error if different
E796 30 A5               LDA #0xA5
E798 31 00 0F            STA ?b0
E79B 15 00 0F            SRL ?b0
E79E 15 00 0F            SRL ?b0
E7A1 15 00 0F            SRL ?b0
E7A4 15 00 0F            SRL ?b0
E7A7 2A 00 0F            LDA ?b0
E7AA 21 0A               TEQA #0x0A
E7AC 2B FF B0            JNE FAIL    ; Jump if result not good
E7AF 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7B2 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7B4 2B FF B0            JNE FAIL    ; Error if different
E7B7 30 A5               LDA #0xA5
E7B9 31 00 0F            STA ?b0
E7BC 15 00 0F            SRL ?b0
E7BF 15 00 0F            SRL ?b0
E7C2 15 00 0F            SRL ?b0
E7C5 15 00 0F            SRL ?b0
E7C8 15 00 0F            SRL ?b0
E7CB 2A 00 0F            LDA ?b0
E7CE 21 05               TEQA #0x05
E7D0 2B FF B0            JNE FAIL    ; Jump if result not good
E7D3 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7D6 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7D8 2B FF B0            JNE FAIL    ; Error if different
E7DB 30 A5               LDA #0xA5
E7DD 31 00 0F            STA ?b0
E7E0 15 00 0F            SRL ?b0
E7E3 15 00 0F            SRL ?b0
E7E6 15 00 0F            SRL ?b0
E7E9 15 00 0F            SRL ?b0
E7EC 15 00 0F            SRL ?b0
E7EF 15 00 0F            SRL ?b0
E7F2 2A 00 0F            LDA ?b0
E7F5 21 02               TEQA #0x02
E7F7 2B FF B0            JNE FAIL    ; Jump if result not good
E7FA 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7FD 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E7FF 2B FF B0            JNE FAIL    ; Error if different
E802 30 A5               LDA #0xA5
E804 31 00 0F            STA ?b0
E807 15 00 0F            SRL ?b0
E80A 15 00 0F            SRL ?b0
E80D 15 00 0F            SRL ?b0
E810 15 00 0F            SRL ?b0
E813 15 00 0F            SRL ?b0
E816 15 00 0F            SRL ?b0
E819 15 00 0F            SRL ?b0
E81C 2A 00 0F            LDA ?b0
E81F 21 01               TEQA #0x01
E821 2B FF B0            JNE FAIL    ; Jump if result not good
E824 2A 1F FB            LDA CARRY   ; Read the Carry Status
E827 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E829 2B FF B0            JNE FAIL    ; Error if different
E82C 30 A5               LDA #0xA5
E82E 31 00 0F            STA ?b0
E831 15 00 0F            SRL ?b0
E834 15 00 0F            SRL ?b0
E837 15 00 0F            SRL ?b0
E83A 15 00 0F            SRL ?b0
E83D 15 00 0F            SRL ?b0
E840 15 00 0F            SRL ?b0
E843 15 00 0F            SRL ?b0
E846 15 00 0F            SRL ?b0
E849 2A 00 0F            LDA ?b0
E84C 21 00               TEQA #0x00
E84E 2B FF B0            JNE FAIL    ; Jump if result not good
E851 2A 1F FB            LDA CARRY   ; Read the Carry Status
E854 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E856 2B FF B0            JNE FAIL    ; Error if different
E859 30 A5               LDA #0xA5
E85B 31 00 0F            STA ?b0
E85E 15 00 0F            SRL ?b0
E861 15 00 0F            SRL ?b0
E864 15 00 0F            SRL ?b0
E867 15 00 0F            SRL ?b0
E86A 15 00 0F            SRL ?b0
E86D 15 00 0F            SRL ?b0
E870 15 00 0F            SRL ?b0
E873 15 00 0F            SRL ?b0
E876 15 00 0F            SRL ?b0
E879 2A 00 0F            LDA ?b0
E87C 21 00               TEQA #0x00
E87E 2B FF B0            JNE FAIL    ; Jump if result not good
E881 2A 1F FB            LDA CARRY   ; Read the Carry Status
E884 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E886 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.16 STX 0x****   STORE X REGISTER TO ADDRESS
                         ; --------------------------------------------------------------------
E889 30 16      TSTOP16  LDA #0x16
E88B 19                  NOTA
E88C 31 C0 00            STA LEDPORT ; Output to LED port
E88F 04 12 34            LDX #0x1234 ; Test a STX using immediate Hex address value
E892 16 00 00            STX 0x0000  
E895 2A 00 00            LDA 0x0000
E898 21 12               TEQA #0x12
E89A 2B FF B0            JNE FAIL
E89D 2A 00 01            LDA 0x0001
E8A0 21 34               TEQA #0x34
E8A2 2B FF B0            JNE FAIL
E8A5 04 CA FE            LDX #0xCAFE ; Test a STX at address boundary requiring a carry to MSB
E8A8 16 10 FF            STX 0x10FF  
E8AB 2A 10 FF            LDA 0x10FF
E8AE 21 CA               TEQA #0xCA
E8B0 2B FF B0            JNE FAIL
E8B3 2A 11 00            LDA 0x1100
E8B6 21 FE               TEQA #0xFE
E8B8 2B FF B0            JNE FAIL
E8BB 04 BE EF            LDX #0xBEEF ; Test a STX on another boundary
E8BE 16 12 FF            STX 0x12FF  
E8C1 2A 12 FF            LDA 0x12FF
E8C4 21 BE               TEQA #0xBE
E8C6 2B FF B0            JNE FAIL
E8C9 2A 13 00            LDA 0x1300
E8CC 21 EF               TEQA #0xEF
E8CE 2B FF B0            JNE FAIL
E8D1 04 67 89            LDX #0x6789 ; Test a STX using symbolic address
E8D4 16 00 0E            STX ?b1
E8D7 2A 00 0E            LDA ?b1
E8DA 21 67               TEQA #0x67
E8DC 2B FF B0            JNE FAIL
E8DF 2A 00 0F            LDA ?b0
E8E2 21 89               TEQA #0x89
E8E4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.17 ORA #0x**   LOGICAL OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E8E7 30 17      TSTOP17  LDA #0x17
E8E9 19                  NOTA
E8EA 31 C0 00            STA LEDPORT ; Output to LED port
E8ED 30 FF               LDA #0xFF
E8EF 17 FF               ORA #0xFF
E8F1 2D FF               CMPA #0xFF
E8F3 2B FF B0            JNE FAIL
E8F6 30 00               LDA #0x00
E8F8 17 00               ORA #0x00
E8FA 2D 00               CMPA #0x00
E8FC 2B FF B0            JNE FAIL
E8FF 30 25               LDA #0x25
E901 17 D3               ORA #0xD3
E903 2D F7               CMPA #0xF7
E905 2B FF B0            JNE FAIL
E908 30 00               LDA #0x00
E90A 17 FF               ORA #0xFF
E90C 2D FF               CMPA #0xFF
E90E 2B FF B0            JNE FAIL
E911 30 FF               LDA #0xFF
E913 17 00               ORA #0x00
E915 2D FF               CMPA #0xFF
E917 2B FF B0            JNE FAIL
E91A 30 14               LDA #0x14
E91C 17 C1               ORA #0xC1
E91E 2D D5               CMPA #0xD5
E920 2B FF B0            JNE FAIL
E923 30 AA               LDA #0xAA
E925 17 55               ORA #0x55
E927 2D FF               CMPA #0xFF
E929 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.18 XORA #0x**  EXCLUSIVE OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E92C 30 18      TSTOP18  LDA #0x18
E92E 19                  NOTA
E92F 31 C0 00            STA LEDPORT ; Output to LED port
E932 30 00               LDA #0x00
E934 18 00               XORA #0x00
E936 2D 00               CMPA #0x00
E938 2B FF B0            JNE FAIL
E93B 30 00               LDA #0x00
E93D 18 FF               XORA #0xFF
E93F 2D FF               CMPA #0xFF
E941 2B FF B0            JNE FAIL
E944 30 FF               LDA #0xFF
E946 18 FF               XORA #0xFF
E948 2D 00               CMPA #0x00
E94A 2B FF B0            JNE FAIL
E94D 30 FF               LDA #0xFF
E94F 18 55               XORA #0x55
E951 2D AA               CMPA #0xAA
E953 2B FF B0            JNE FAIL
E956 30 CE               LDA #0xCE
E958 18 5A               XORA #0x5A
E95A 2D 94               CMPA #0x94
E95C 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.19 NOTA  LOGIC NOT ON REG A
                         ; --------------------------------------------------------------------
E95F 30 19      TSTOP19  LDA #0x19
E961 19                  NOTA
E962 31 C0 00            STA LEDPORT ; Output to LED port
E965 30 00               LDA #0x00
E967 19                  NOTA
E968 2D FF               CMPA #0xFF
E96A 2B FF B0            JNE FAIL
E96D 19                  NOTA
E96E 2D 00               CMPA #0x00
E970 2B FF B0            JNE FAIL
E973 30 55               LDA #0x55
E975 19                  NOTA
E976 2D AA               CMPA #0xAA
E978 2B FF B0            JNE FAIL
E97B 19                  NOTA
E97C 2D 55               CMPA #0x55
E97E 2B FF B0            JNE FAIL
E981 19                  NOTA
E982 2D AA               CMPA #0xAA
E984 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1A CMPX #0x****   COMPARE X to immediate value
                         ; --------------------------------------------------------------------
E987 30 1A      TSTOP1A  LDA #0x1A
E989 19                  NOTA
E98A 31 C0 00            STA LEDPORT ; Output to LED port
E98D 04 00 00            LDX #0x0000 ; Load 0x0000 in X  (Testing with immediate hex value)
E990 1A 00 00            CMPX #0x0000
E993 2B FF B0            JNE FAIL
E996 1A 00 01            CMPX #0x0001
E999 2C FF B0            JEQ FAIL    ; good up tho here
E99C 1A FF FF            CMPX #0xFFFF
E99F 2C FF B0            JEQ FAIL
E9A2 04 FF 00            LDX #0xFF00 ; Load 0xFF00 in X
E9A5 1A FF 00            CMPX #0xFF00
E9A8 2B FF B0            JNE FAIL
E9AB 1A 00 FF            CMPX #0x00FF
E9AE 2C FF B0            JEQ FAIL
E9B1 1A FF FF            CMPX #0xFFFF
E9B4 2C FF B0            JEQ FAIL
E9B7 04 00 FF            LDX #0x00FF ; Load 0x00FF in X
E9BA 1A 00 FF            CMPX #0x00FF
E9BD 2B FF B0            JNE FAIL
E9C0 1A FF 00            CMPX #0xFF00
E9C3 2C FF B0            JEQ FAIL
E9C6 1A FF FF            CMPX #0xFFFF
E9C9 2C FF B0            JEQ FAIL
E9CC 04 FF FF            LDX #0xFFFF ; Load 0xFFFF in X
E9CF 1A FF FF            CMPX #0xFFFF
E9D2 2B FF B0            JNE FAIL
E9D5 1A FF 00            CMPX #0xFF00
E9D8 2C FF B0            JEQ FAIL
E9DB 1A 00 FF            CMPX #0x00FF
E9DE 2C FF B0            JEQ FAIL
E9E1 04 AB CD            LDX #0xABCD
E9E4 1A A5 CD            CMPX #0xA5CD
E9E7 2C FF B0            JEQ FAIL
E9EA 04 12 34            LDX #0x1234
E9ED 1A 12 AA            CMPX #0x12AA
E9F0 2C FF B0            JEQ FAIL
E9F3 04 AE C3            LDX #0xAEC3
E9F6 1A AE C3            CMPX #0xAEC3
E9F9 2B FF B0            JNE FAIL
E9FC 1A AE DB            CMPX #0xAEDB
E9FF 2C FF B0            JEQ FAIL
EA02 1A 12 C3            CMPX #0x12C3
EA05 2C FF B0            JEQ FAIL
EA08 1A FF FF            CMPX #0xFFFF
EA0B 2C FF B0            JEQ FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1B LDX 0x**  
                         ; LDX using a 8-bit direct address (8-bit offset into 0x000xFF page)
                         ; --------------------------------------------------------------------
EA0E 30 1B      TSTOP1B  LDA #0x1B
EA10 19                  NOTA
EA11 31 C0 00            STA LEDPORT    ; Output to LED port
EA14 30 00               LDA #0x00
EA16 31 00 00            STA 0x0000
EA19 30 00               LDA #0x00
EA1B 31 00 01            STA 0x0001
EA1E 1B 00               LDX 0x00       ; Load index pointer from this 8 bit address
EA20 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA23 2D 00               CMPA #0x00
EA25 2B FF B0            JNE FAIL
EA28 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA2B 2D 00               CMPA #0x00
EA2D 2B FF B0            JNE FAIL       ;
EA30 30 AB               LDA #0xAB
EA32 31 00 02            STA 0x0002
EA35 30 CD               LDA #0xCD
EA37 31 00 03            STA 0x0003
EA3A 1B 02               LDX 0x02       ; Load index pointer from this 8 bit address
EA3C 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA3F 2D AB               CMPA #0xAB
EA41 2B FF B0            JNE FAIL
EA44 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA47 2D CD               CMPA #0xCD
EA49 2B FF B0            JNE FAIL       ;      
EA4C 30 CA               LDA #0xCA
EA4E 31 00 48            STA 0x0048
EA51 30 FE               LDA #0xFE
EA53 31 00 49            STA 0x0049
EA56 1B 48               LDX 0x48       ; Load index pointer from this 8 bit address
EA58 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA5B 2D CA               CMPA #0xCA
EA5D 2B FF B0            JNE FAIL
EA60 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA63 2D FE               CMPA #0xFE
EA65 2B FF B0            JNE FAIL
EA68 30 12               LDA #0x12      ; Test using symbolic adress
EA6A 31 00 0E            STA 0x000E     ; ?b1
EA6D 30 34               LDA #0x34
EA6F 31 00 0F            STA 0x000F     ; ?b0
EA72 1B 0E               LDX ?b1        ; Load index pointer using symbolic LSB 8 bit address
EA74 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA77 2D 12               CMPA #0x12
EA79 2B FF B0            JNE FAIL
EA7C 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA7F 2D 34               CMPA #0x34
EA81 2B FF B0            JNE FAIL
EA84 30 56               LDA #0x56      ; Test using symbolic adress
EA86 31 00 09            STA 0x0009     ; ?b6
EA89 30 78               LDA #0x78
EA8B 31 00 0A            STA 0x000A     ; ?b7
EA8E 1B 09               LDX ?b6        ; Load index pointer using symbolic LSB 8 bit address
EA90 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA93 2D 56               CMPA #0x56
EA95 2B FF B0            JNE FAIL
EA98 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA9B 2D 78               CMPA #0x78
EA9D 2B FF B0            JNE FAIL
                         ; Test symbolic +- offset

                         ; --------------------------------------------------------------------
                         ; OP.1C LDA (****H,X)
                         ; LDA indexed indirect addressing
                         ; --------------------------------------------------------------------
EAA0 30 1C      TSTOP1C  LDA #0x1C
EAA2 19                  NOTA
EAA3 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM to be read using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EAA6 30 55               LDA #0x55
EAA8 31 00 00            STA 0x0000
EAAB 30 AA               LDA #0xAA
EAAD 31 00 01            STA 0x0001
EAB0 30 BE               LDA #0xBE
EAB2 31 00 02            STA 0x0002
EAB5 04 00 00            LDX #0x0000
EAB8 1C 00 00            LDA (0x0000,X)
EABB 2D 55               CMPA #0x55
EABD 2B FF B0            JNE FAIL
EAC0 05                  INCX
EAC1 1C 00 00            LDA (0x0000,X)
EAC4 2D AA               CMPA #0xAA
EAC6 2B FF B0            JNE FAIL
EAC9 05                  INCX
EACA 1C 00 00            LDA (0x0000,X) 
EACD 2D BE               CMPA #0xBE
EACF 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x00FF and incrementing
                         ; storing data at 0x10FE onwards
EAD2 30 12               LDA #0x12
EAD4 31 10 FE            STA 0x10FE
EAD7 30 34               LDA #0x34
EAD9 31 10 FF            STA 0x10FF
EADC 30 56               LDA #0x56
EADE 31 11 00            STA 0x1100
EAE1 30 78               LDA #0x78
EAE3 31 11 01            STA 0x1101
EAE6 04 00 00            LDX #0x0000 ; Point to LSB of base address   
EAE9 1C 10 FE            LDA (0x10FE,X)
EAEC 2D 12               CMPA #0x12
EAEE 2B FF B0            JNE FAIL
EAF1 05                  INCX
EAF2 1C 10 FE            LDA (0x10FE,X)
EAF5 2D 34               CMPA #0x34
EAF7 2B FF B0            JNE FAIL
EAFA 05                  INCX
EAFB 1C 10 FE            LDA (0x10FE,X)
EAFE 2D 56               CMPA #0x56
EB00 2B FF B0            JNE FAIL
EB03 05                  INCX
EB04 1C 10 FE            LDA (0x10FE,X)
EB07 2D 78               CMPA #0x78
EB09 2B FF B0            JNE FAIL 
                         ; Finally test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EB0C 30 12               LDA #0x12
EB0E 31 12 34            STA 0x1234
EB11 30 34               LDA #0x34
EB13 31 12 35            STA 0x1235
EB16 30 56               LDA #0x56
EB18 31 12 36            STA 0x1236
EB1B 30 78               LDA #0x78
EB1D 31 12 37            STA 0x1237
EB20 04 12 34            LDX #0x1234 ; Point to base address
EB23 1C 00 00            LDA (0x0000,X)
EB26 2D 12               CMPA #0x12
EB28 2B FF B0            JNE FAIL
EB2B 1C 00 01            LDA (0x0001,X)
EB2E 2D 34               CMPA #0x34
EB30 2B FF B0            JNE FAIL
EB33 1C 00 02            LDA (0x0002,X)
EB36 2D 56               CMPA #0x56
EB38 2B FF B0            JNE FAIL
EB3B 1C 00 03            LDA (0x0003,X)
EB3E 2D 78               CMPA #0x78
EB40 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
EB43 30 9A               LDA #0x9A
EB45 31 12 FE            STA 0x12FE
EB48 30 BC               LDA #0xBC   
EB4A 31 12 FF            STA 0x12FF
EB4D 30 DE               LDA #0xDE
EB4F 31 13 00            STA 0x1300
EB52 30 F0               LDA #0xF0
EB54 31 13 01            STA 0x1301
EB57 04 01 FE            LDX #0x01FE ; Point to base address
EB5A 1C 11 00            LDA (0x1100,X)
EB5D 2D 9A               CMPA #0x9A
EB5F 2B FF B0            JNE FAIL
EB62 1C 11 01            LDA (0x1101,X)
EB65 2D BC               CMPA #0xBC
EB67 2B FF B0            JNE FAIL
EB6A 1C 11 02            LDA (0x1102,X)
EB6D 2D DE               CMPA #0xDE
EB6F 2B FF B0            JNE FAIL
EB72 1C 11 03            LDA (0x1103,X)
EB75 2D F0               CMPA #0xF0
EB77 2B FF B0            JNE FAIL
                         ; Test using symbolic with fixed index register to 0
EB7A 30 DE               LDA #0xDE
EB7C 31 00 00            STA 0x0000
EB7F 30 AD               LDA #0xAD
EB81 31 00 01            STA 0x0001
EB84 30 BE               LDA #0xBE
EB86 31 00 02            STA 0x0002
EB89 30 EF               LDA #0xEF
EB8B 31 00 03            STA 0x0003
EB8E 04 00 00            LDX #0x0000 ; Clear index
EB91 1C 00 00            LDA (?b15,X)
EB94 2D DE               CMPA #0xDE
EB96 2B FF B0            JNE FAIL
EB99 1C 00 01            LDA (?b14,X)
EB9C 2D AD               CMPA #0xAD
EB9E 2B FF B0            JNE FAIL
EBA1 1C 00 02            LDA (?b13,X)
EBA4 2D BE               CMPA #0xBE
EBA6 2B FF B0            JNE FAIL
EBA9 1C 00 03            LDA (?b12,X)
EBAC 2D EF               CMPA #0xEF
EBAE 2B FF B0            JNE FAIL
                         ; Test using symbolic and incrementing index
EBB1 30 CA               LDA #0xCA   ; ?b7      EQU 0x0008
EBB3 31 00 08            STA 0x0008
EBB6 30 FE               LDA #0xFE
EBB8 31 00 09            STA 0x0009
EBBB 30 55               LDA #0x55
EBBD 31 00 0A            STA 0x000A
EBC0 30 AA               LDA #0xAA
EBC2 31 00 0B            STA 0x000B
EBC5 04 00 00            LDX #0x0000 ; Clear index
EBC8 1C 00 08            LDA (?b7,X)
EBCB 2D CA               CMPA #0xCA
EBCD 2B FF B0            JNE FAIL
EBD0 05                  INCX
EBD1 1C 00 08            LDA (?b7,X)
EBD4 2D FE               CMPA #0xFE
EBD6 2B FF B0            JNE FAIL
EBD9 05                  INCX
EBDA 1C 00 08            LDA (?b7,X)
EBDD 2D 55               CMPA #0x55
EBDF 2B FF B0            JNE FAIL
EBE2 05                  INCX
EBE3 1C 00 08            LDA (?b7,X)
EBE6 2D AA               CMPA #0xAA
EBE8 2B FF B0            JNE FAIL              
                         ; Test using symbolic and incrementing index with a carry
EBEB 30 12               LDA #0x12   ; ?b0      EQU 0x000F
EBED 31 16 FE            STA 0x16FE
EBF0 30 34               LDA #0x34
EBF2 31 16 FF            STA 0x16FF
EBF5 30 56               LDA #0x56
EBF7 31 17 00            STA 0x1700
EBFA 30 78               LDA #0x78
EBFC 31 17 01            STA 0x1701
EBFF 04 16 EF            LDX #0x16EF ; Set base index
EC02 1C 00 0F            LDA (?b0,X)
EC05 2D 12               CMPA #0x12
EC07 2B FF B0            JNE FAIL              
EC0A 05                  INCX
EC0B 1C 00 0F            LDA (?b0,X)
EC0E 2D 34               CMPA #0x34
EC10 2B FF B0            JNE FAIL              
EC13 05                  INCX        ; carry on MSB
EC14 1C 00 0F            LDA (?b0,X)
EC17 2D 56               CMPA #0x56
EC19 2B FF B0            JNE FAIL              
EC1C 05                  INCX
EC1D 1C 00 0F            LDA (?b0,X)
EC20 2D 78               CMPA #0x78
EC22 2B FF B0            JNE FAIL              
                         ; --------------------------------------------------------------------
                         ; OP.1D STA (****H,X)
                         ; STA indexed indirect addressing
                         ; --------------------------------------------------------------------
EC25 30 1D      TSTOP1D  LDA #0x1D
EC27 19                  NOTA
EC28 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EC2B 30 55               LDA #0x55      ; store data at 0x0000 onwards
EC2D 04 00 00            LDX #0x0000
EC30 1D 00 00            STA (0x0000,X)
EC33 30 AA               LDA #0xAA
EC35 05                  INCX
EC36 1D 00 00            STA (0x0000,X)
EC39 30 BE               LDA #0xBE
EC3B 05                  INCX
EC3C 1D 00 00            STA (0x0000,X)
EC3F 04 00 00            LDX #0x0000    ; Now read back the stored data
EC42 0A                  LDA (X)
EC43 2D 55               CMPA #0x55
EC45 2B FF B0            JNE FAIL
EC48 05                  INCX
EC49 0A                  LDA (X)
EC4A 2D AA               CMPA #0xAA
EC4C 2B FF B0            JNE FAIL 
EC4F 05                  INCX
EC50 0A                  LDA (X) 
EC51 2D BE               CMPA #0xBE
EC53 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x10FE and incrementing storing data
EC56 30 12               LDA #0x12
EC58 04 10 FE            LDX #0x10FE
EC5B 1D 00 00            STA (0x0000,X)
EC5E 30 34               LDA #0x34
EC60 05                  INCX
EC61 1D 00 00            STA (0x0000,X)
EC64 30 56               LDA #0x56
EC66 05                  INCX
EC67 1D 00 00            STA (0x0000,X)
EC6A 30 78               LDA #0x78
EC6C 05                  INCX
EC6D 1D 00 00            STA (0x0000,X)
EC70 04 10 FE            LDX #0x10FE ; Initialize X to base address
EC73 0A                  LDA (X)
EC74 2D 12               CMPA #0x12
EC76 2B FF B0            JNE FAIL
EC79 05                  INCX
EC7A 0A                  LDA (X)
EC7B 2D 34               CMPA #0x34
EC7D 2B FF B0            JNE FAIL
EC80 05                  INCX
EC81 0A                  LDA (X)
EC82 2D 56               CMPA #0x56
EC84 2B FF B0            JNE FAIL
EC87 05                  INCX
EC88 0A                  LDA (X)
EC89 2D 78               CMPA #0x78
EC8B 2B FF B0            JNE FAIL
                         ; Test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EC8E 30 12               LDA #0x12
EC90 04 12 34            LDX #0x1234
EC93 1D 00 00            STA (0x0000,X)
EC96 30 34               LDA #0x34
EC98 1D 00 01            STA (0x0001,X)
EC9B 30 56               LDA #0x56
EC9D 1D 00 02            STA (0x0002,X)
ECA0 30 78               LDA #0x78
ECA2 1D 00 03            STA (0x0003,X)
ECA5 04 12 34            LDX #0x1234 ; Point to base address
ECA8 0A                  LDA (X)
ECA9 2D 12               CMPA #0x12
ECAB 2B FF B0            JNE FAIL
ECAE 1C 00 01            LDA (0x0001,X)
ECB1 2D 34               CMPA #0x34
ECB3 2B FF B0            JNE FAIL
ECB6 1C 00 02            LDA (0x0002,X)
ECB9 2D 56               CMPA #0x56
ECBB 2B FF B0            JNE FAIL
ECBE 1C 00 03            LDA (0x0003,X)
ECC1 2D 78               CMPA #0x78
ECC3 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
ECC6 30 9A               LDA #0x9A
ECC8 04 14 FE            LDX #0x14FE
ECCB 1D 00 00            STA (0x0000,X)
ECCE 30 BC               LDA #0xBC
ECD0 1D 00 01            STA (0x0001,X)
ECD3 30 DE               LDA #0xDE
ECD5 1D 00 02            STA (0x0002,X)
ECD8 30 F0               LDA #0xF0
ECDA 1D 00 03            STA (0x0003,X)
ECDD 04 14 FE            LDX #0x14FE ; Point to base address
ECE0 0A                  LDA (X)
ECE1 2D 9A               CMPA #0x9A
ECE3 2B FF B0            JNE FAIL
ECE6 05                  INCX
ECE7 0A                  LDA (X)
ECE8 2D BC               CMPA #0xBC
ECEA 2B FF B0            JNE FAIL
ECED 05                  INCX
ECEE 0A                  LDA (X)
ECEF 2D DE               CMPA #0xDE
ECF1 2B FF B0            JNE FAIL
ECF4 05                  INCX
ECF5 0A                  LDA (X)
ECF6 2D F0               CMPA #0xF0
ECF8 2B FF B0            JNE FAIL
                         ; Test with carry to MSB on index and base address
ECFB 30 45               LDA #0x45
ECFD 04 02 FE            LDX #0x02FE
ED00 1D 11 00            STA (0x1100,X)
ED03 30 67               LDA #0x67
ED05 1D 11 01            STA (0x1101,X)
ED08 30 89               LDA #0x89
ED0A 1D 11 02            STA (0x1102,X)
ED0D 30 AB               LDA #0xAB
ED0F 1D 11 03            STA (0x1103,X)
ED12 04 01 FE            LDX #0x01FE ; Point to base address
ED15 1C 12 00            LDA (0x1200,X)
ED18 2D 45               CMPA #0x45
ED1A 2B FF B0            JNE FAIL
ED1D 05                  INCX
ED1E 1C 12 00            LDA (0x1200,X)
ED21 2D 67               CMPA #0x67
ED23 2B FF B0            JNE FAIL
ED26 05                  INCX
ED27 1C 12 00            LDA (0x1200,X)
ED2A 2D 89               CMPA #0x89
ED2C 2B FF B0            JNE FAIL
ED2F 05                  INCX
ED30 1C 12 00            LDA (0x1200,X)
ED33 2D AB               CMPA #0xAB
ED35 2B FF B0            JNE FAIL
                         ; test using symbolic with fixed index register to 0
ED38 04 00 00            LDX #0x0000 ; Clear index
ED3B 30 DE               LDA #0xDE
ED3D 1D 00 05            STA (?b10,X)
ED40 30 AD               LDA #0xAD
ED42 1D 00 06            STA (?b9,X)
ED45 30 BE               LDA #0xBE
ED47 1D 00 07            STA (?b8,X)   
ED4A 30 EF               LDA #0xEF
ED4C 1D 00 08            STA (?b7,X)
ED4F 2A 00 05            LDA 0x0005
ED52 2D DE               CMPA #0xDE
ED54 2B FF B0            JNE FAIL
ED57 2A 00 06            LDA 0x0006
ED5A 2D AD               CMPA #0xAD
ED5C 2B FF B0            JNE FAIL
ED5F 2A 00 07            LDA 0x0007
ED62 2D BE               CMPA #0xBE
ED64 2B FF B0            JNE FAIL
ED67 2A 00 08            LDA 0x0008
ED6A 2D EF               CMPA #0xEF
ED6C 2B FF B0            JNE FAIL
                         ; test using symbolic and incrementing index
ED6F 04 00 00            LDX #0x0000 ; Clear index
ED72 30 CA               LDA #0xCA   
ED74 1D 00 0F            STA (?b0,X) ; ?b0      EQU 0x000F
ED77 05                  INCX
ED78 30 FE               LDA #0xFE
ED7A 1D 00 0F            STA (?b0,X)
ED7D 05                  INCX 
ED7E 30 55               LDA #0x55
ED80 1D 00 0F            STA (?b0,X)
ED83 05                  INCX
ED84 30 AA               LDA #0xAA
ED86 1D 00 0F            STA (?b0,X)
ED89 2A 00 0F            LDA 0x000F
ED8C 2D CA               CMPA #0xCA
ED8E 2B FF B0            JNE FAIL
ED91 2A 00 10            LDA 0x0010
ED94 2D FE               CMPA #0xFE
ED96 2B FF B0            JNE FAIL
ED99 2A 00 11            LDA 0x0011
ED9C 2D 55               CMPA #0x55
ED9E 2B FF B0            JNE FAIL
EDA1 2A 00 12            LDA 0x0012
EDA4 2D AA               CMPA #0xAA
EDA6 2B FF B0            JNE FAIL         
                         ; Test using symbolic and incrementing index with a carry
EDA9 04 14 EF            LDX #0x14EF ; Set base index
EDAC 30 12               LDA #0x12
EDAE 1D 00 0F            STA (?b0,X) ; 0x14FE
EDB1 05                  INCX
EDB2 30 34               LDA #0x34
EDB4 1D 00 0F            STA (?b0,X) ; 0x14FF
EDB7 05                  INCX
EDB8 30 56               LDA #0x56
EDBA 1D 00 0F            STA (?b0,X) ; 0x1500
EDBD 05                  INCX
EDBE 30 78               LDA #0x78
EDC0 1D 00 0F            STA (?b0,X) ; 0x1501
EDC3 2A 14 FE            LDA 0x14FE
EDC6 2D 12               CMPA #0x12
EDC8 2B FF B0            JNE FAIL
EDCB 2A 14 FF            LDA 0x14FF
EDCE 2D 34               CMPA #0x34
EDD0 2B FF B0            JNE FAIL
EDD3 2A 15 00            LDA 0x1500
EDD6 2D 56               CMPA #0x56
EDD8 2B FF B0            JNE FAIL
EDDB 2A 15 01            LDA 0x1501
EDDE 2D 78               CMPA #0x78
EDE0 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1E CLRX
                         ; CLEAR X REGISTER
                         ; --------------------------------------------------------------------
EDE3 30 1E      TSTOP1E  LDA #0x1E
EDE5 19                  NOTA
EDE6 31 C0 00            STA LEDPORT ; Output to LED port
EDE9 30 00               LDA #0x00   ; Clear E equal flag
EDEB 31 1F FA            STA 0x1FFA
EDEE 04 FF FF            LDX #0xFFFF ; Load X with non zero value
EDF1 1E                  CLRX
EDF2 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EDF5 2D 00               CMPA #0x00
EDF7 2B FF B0            JNE FAIL
EDFA 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EDFD 2D 00               CMPA #0x00
EDFF 2B FF B0            JNE FAIL
EE02 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE05 2D 01               CMPA #0x01
EE07 2B FF B0            JNE FAIL
EE0A 30 01               LDA #0x01   ; Set E equal flag
EE0C 31 1F FA            STA 0x1FFA
EE0F 04 12 34            LDX #0x1234 ; Load X with non zero value
EE12 1E                  CLRX
EE13 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EE16 2D 00               CMPA #0x00
EE18 2B FF B0            JNE FAIL
EE1B 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EE1E 2D 00               CMPA #0x00
EE20 2B FF B0            JNE FAIL
EE23 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE26 2D 01               CMPA #0x01  
EE28 2B FF B0            JNE FAIL
                         ; -----------------------------------------------------
                         ; OP.1F CMPA 0x**** 
                         ; Compare A with direct-addressed byte
                         ; A - Direct Addressing, A unchanged, E and C updated
                         ; -----------------------------------------------------
EE2B 30 1F      TSTOP1F  LDA #0x1F
EE2D 19                  NOTA
EE2E 31 C0 00            STA LEDPORT ; Output to LED port
EE31 30 5A               LDA #0x5A   ; Store a value in RAM
EE33 31 02 00            STA 0x0200   
EE36 30 5A               LDA #0x5A   ; -- Compare with same value --
EE38 1F 02 00            CMPA 0x0200 
EE3B 2B FF B0            JNE FAIL    ; Jump if result say not equal
EE3E 2A 1F FA            LDA EQUAL   ; Read E flag and check it is set
EE41 21 01               TEQA #0x01
EE43 2B FF B0            JNE FAIL
EE46 2A 1F FB            LDA CARRY   ; Read Carry flag and check it is set
EE49 21 01               TEQA #0x01
EE4B 2B FF B0            JNE FAIL
EE4E 30 3C               LDA #0x3C   ; -- Compare with A < Memory --
EE50 1F 02 00            CMPA 0x0200 
EE53 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE56 2A 1F FA            LDA EQUAL   ; Read E flag and check it is cleared
EE59 21 00               TEQA #0x00
EE5B 2B FF B0            JNE FAIL
EE5E 2A 1F FB            LDA CARRY   ; Read Carry flag and check it is cleared
EE61 21 00               TEQA #0x00
EE63 2B FF B0            JNE FAIL
EE66 30 7E               LDA #0x7E   ; -- Compare with A > Memory --
EE68 1F 02 00            CMPA 0x0200 
EE6B 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE6E 2A 1F FA            LDA EQUAL   ; Read E flag and check it is cleared
EE71 2D 00               CMPA #0x00  
EE73 2B FF B0            JNE FAIL
EE76 2A 1F FB            LDA CARRY   ; Read Carry flag and check it is set
EE79 21 01               TEQA #0x01
EE7B 2B FF B0            JNE FAIL
                         ; Test all bits for CMPA operation
EE7E 30 00               LDA #0x00
EE80 31 15 67            STA 0x1567
EE83 30 FF               LDA #0xFF
EE85 31 17 89            STA 0x1789
EE88 30 00               LDA #0x00
EE8A 1F 15 67            CMPA 0x1567
EE8D 2B FF B0            JNE FAIL
EE90 2A 1F FA            LDA EQUAL
EE93 21 01               TEQA #0x01
EE95 2B FF B0            JNE FAIL
EE98 30 FF               LDA #0xFF
EE9A 1F 17 89            CMPA 0x1789
EE9D 2B FF B0            JNE FAIL
EEA0 2A 1F FA            LDA EQUAL
EEA3 21 01               TEQA #0x01
EEA5 2B FF B0            JNE FAIL 
EEA8 30 AA               LDA #0xAA
EEAA 1F 15 67            CMPA 0x1567
EEAD 2C FF B0            JEQ FAIL
EEB0 2A 1F FA            LDA EQUAL
EEB3 21 00               TEQA #0x00
EEB5 2B FF B0            JNE FAIL
EEB8 30 55               LDA #0x55
EEBA 1F 17 89            CMPA 0x1789
EEBD 2C FF B0            JEQ FAIL
EEC0 2A 1F FA            LDA EQUAL
EEC3 21 00               TEQA #0x00
EEC5 2B FF B0            JNE FAIL
                         ; Test with symbolic address
EEC8 30 41               LDA #0x41      ; 'A'
EECA 1F FB 99            CMPA MSGTXT1   ; '1' 
EECD 2C FF B0            JEQ FAIL
EED0 30 31               LDA #0x31      ; '1'
EED2 1F FB 99            CMPA MSGTXT1   ; '1'
EED5 2B FF B0            JNE FAIL
EED8 30 57               LDA #0x57      ; 'W'
EEDA 1F FB A6            CMPA MSGTXT2+6 ; 'W'
EEDD 2B FF B0            JNE FAIL
EEE0 30 54               LDA #0x54
EEE2 1F FB AC            CMPA MSGTXT3   ; 'T'
EEE5 2B FF B0            JNE FAIL
EEE8 30 68               LDA #0x68
EEEA 1F FB AD            CMPA MSGTXT3+1 ; 'h'
EEED 2B FF B0            JNE FAIL
EEF0 30 69               LDA #0x69
EEF2 1F FB AE            CMPA MSGTXT3+2 ; 'i'
EEF5 2B FF B0            JNE FAIL
EEF8 30 73               LDA #0x73
EEFA 1F FB AF            CMPA MSGTXT3+3 ; 's'
EEFD 2B FF B0            JNE FAIL
EF00 30 20               LDA #0x20
EF02 1F FB B0            CMPA MSGTXT3+4 ; ' '
EF05 2B FF B0            JNE FAIL
EF08 30 69               LDA #0x69
EF0A 1F FB B1            CMPA MSGTXT3+5 ; 'i'
EF0D 2B FF B0            JNE FAIL
EF10 30 73               LDA #0x73
EF12 1F FB B2            CMPA MSGTXT3+6 ; 's'
EF15 2B FF B0            JNE FAIL
EF18 30 72               LDA #0x72      ; 'r'
EF1A 1F FB E7            CMPA MSGTXT3+59
EF1D 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.20 DECA  
                         ; DECREMENT REGISTER A
                         ; --------------------------------------------------------------------
EF20 30 20      TSTOP20  LDA #0x20
EF22 19                  NOTA
EF23 31 C0 00            STA LEDPORT ; Output to LED port
EF26 30 01               LDA #0x01
EF28 20                  DECA
EF29 2D 00               CMPA #0x00
EF2B 2B FF B0            JNE FAIL
EF2E 20                  DECA
EF2F 2D FF               CMPA #0xFF
EF31 2B FF B0            JNE FAIL
EF34 20                  DECA
EF35 2D FE               CMPA #0xFE
EF37 2B FF B0            JNE FAIL
EF3A 30 80               LDA #0x80
EF3C 20                  DECA
EF3D 2D 7F               CMPA #0x7F
EF3F 2B FF B0            JNE FAIL
                         ; Test E flag
EF42 30 00               LDA #0x00   ; Clear E equal flag
EF44 31 1F FA            STA 0x1FFA 
EF47 30 01               LDA #0x01
EF49 20                  DECA
EF4A 2A 1F FA            LDA 0x1FFA
EF4D 2D 01               CMPA #0x01 ; Check E flag is set
EF4F 2B FF B0            JNE FAIL
EF52 30 00               LDA #0x00
EF54 20                  DECA
EF55 2A 1F FA            LDA 0x1FFA
EF58 2D 00               CMPA #0x00 ; Check E flag is cleared
EF5A 2B FF B0            JNE FAIL
                         ; Check all bits for the E flag
EF5D 30 81               LDA #0x81
EF5F 20                  DECA
EF60 2A 1F FA            LDA 0x1FFA
EF63 2D 00               CMPA #0x00 ; Check E flag is cleared
EF65 2B FF B0            JNE FAIL
EF68 30 41               LDA #0x41
EF6A 20                  DECA
EF6B 2A 1F FA            LDA 0x1FFA
EF6E 2D 00               CMPA #0x00 ; Check E flag is cleared
EF70 2B FF B0            JNE FAIL
EF73 30 21               LDA #0x21
EF75 20                  DECA
EF76 2A 1F FA            LDA 0x1FFA
EF79 2D 00               CMPA #0x00 ; Check E flag is cleared
EF7B 2B FF B0            JNE FAIL
EF7E 30 11               LDA #0x11
EF80 20                  DECA
EF81 2A 1F FA            LDA 0x1FFA
EF84 2D 00               CMPA #0x00 ; Check E flag is cleared
EF86 2B FF B0            JNE FAIL
EF89 30 09               LDA #0x09
EF8B 20                  DECA
EF8C 2A 1F FA            LDA 0x1FFA
EF8F 2D 00               CMPA #0x00 ; Check E flag is cleared
EF91 2B FF B0            JNE FAIL
EF94 30 05               LDA #0x05
EF96 20                  DECA
EF97 2A 1F FA            LDA 0x1FFA
EF9A 2D 00               CMPA #0x00 ; Check E flag is cleared
EF9C 2B FF B0            JNE FAIL
EF9F 30 03               LDA #0x03
EFA1 20                  DECA
EFA2 2A 1F FA            LDA 0x1FFA
EFA5 2D 00               CMPA #0x00 ; Check E flag is cleared
EFA7 2B FF B0            JNE FAIL
EFAA 30 02               LDA #0x02
EFAC 20                  DECA
EFAD 2A 1F FA            LDA 0x1FFA
EFB0 2D 00               CMPA #0x00 ; Check E flag is cleared
EFB2 2B FF B0            JNE FAIL
                         ; Test all bits for DECA operation
EFB5 30 FF               LDA #0xFF
EFB7 20                  DECA
EFB8 2D FE               CMPA #0xFE
EFBA 2B FF B0            JNE FAIL
EFBD 30 7F               LDA #0x7F
EFBF 20                  DECA
EFC0 2D 7E               CMPA #0x7E
EFC2 2B FF B0            JNE FAIL
EFC5 30 3F               LDA #0x3F
EFC7 20                  DECA
EFC8 2D 3E               CMPA #0x3E
EFCA 2B FF B0            JNE FAIL
EFCD 30 1F               LDA #0x1F
EFCF 20                  DECA
EFD0 2D 1E               CMPA #0x1E
EFD2 2B FF B0            JNE FAIL
EFD5 30 0F               LDA #0x0F
EFD7 20                  DECA
EFD8 2D 0E               CMPA #0x0E
EFDA 2B FF B0            JNE FAIL
EFDD 30 07               LDA #0x07
EFDF 20                  DECA
EFE0 2D 06               CMPA #0x06
EFE2 2B FF B0            JNE FAIL
EFE5 30 03               LDA #0x03
EFE7 20                  DECA
EFE8 2D 02               CMPA #0x02
EFEA 2B FF B0            JNE FAIL
EFED 30 01               LDA #0x01
EFEF 20                  DECA
EFF0 2D 00               CMPA #0x00
EFF2 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.21 TEQA #0x**  
                         ; TEST EQUAL A with imm, A preserved, E updated, C preserved
                         ; --------------------------------------------------------------------
EFF5 30 21      TSTOP21  LDA #0x21
EFF7 19                  NOTA
EFF8 31 C0 00            STA LEDPORT ; Output to LED port
EFFB 30 00               LDA #0x00   ; Clear Carry flag first
EFFD 31 1F FB            STA CARRY
F000 30 5A               LDA #0x5A
F002 21 5A               TEQA #0x5A
F004 2B FF B0            JNE FAIL
F007 2A 1F FA            LDA EQUAL
F00A 21 01               TEQA #0x01
F00C 2B FF B0            JNE FAIL
F00F 2A 1F FB            LDA CARRY   ; Test Carry flag still cleared
F012 21 00               TEQA #0x00
F014 2B FF B0            JNE FAIL
                         ; Now do the same using a set carry flag
F017 30 01               LDA #0x01
F019 31 1F FB            STA CARRY
F01C 30 BD               LDA #0xBD
F01E 21 BD               TEQA #0xBD
F020 2B FF B0            JNE FAIL
F023 2A 1F FA            LDA EQUAL
F026 21 01               TEQA #0x01
F028 2B FF B0            JNE FAIL
F02B 2A 1F FB            LDA CARRY   ; Test Carry flag still set
F02E 21 01               TEQA #0x01
F030 2B FF B0            JNE FAIL
                         ; Now test for not equal
F033 30 00               LDA #0x00   ; Clear Carry flag first
F035 31 1F FB            STA CARRY
F038 30 3C               LDA #0x3C
F03A 21 4D               TEQA #0x4D
F03C 2C FF B0            JEQ FAIL
F03F 2A 1F FA            LDA EQUAL
F042 21 00               TEQA #0x00
F044 2B FF B0            JNE FAIL
F047 2A 1F FB            LDA CARRY   ; Test Carry flag still cleared
F04A 21 00               TEQA #0x00
F04C 2B FF B0            JNE FAIL
                         ; Now do the same using a set carry flag
F04F 30 01               LDA #0x01
F051 31 1F FB            STA CARRY
F054 30 7E               LDA #0x7E      
F056 21 6F               TEQA #0x6F
F058 2C FF B0            JEQ FAIL
F05B 2A 1F FA            LDA EQUAL
F05E 21 00               TEQA #0x00
F060 2B FF B0            JNE FAIL
F063 2A 1F FB            LDA CARRY   ; Test Carry flag still set
F066 21 01               TEQA #0x01
F068 2B FF B0            JNE FAIL
                         ; Test all bits for TEQA operation
F06B 30 FF               LDA #0xFF
F06D 21 FF               TEQA #0xFF
F06F 2B FF B0            JNE FAIL
F072 2A 1F FA            LDA EQUAL
F075 21 01               TEQA #0x01
F077 2B FF B0            JNE FAIL
F07A 30 00               LDA #0x00
F07C 21 00               TEQA #0x00
F07E 2B FF B0            JNE FAIL
F081 2A 1F FA            LDA EQUAL
F084 21 01               TEQA #0x01
F086 2B FF B0            JNE FAIL
F089 30 AA               LDA #0xAA
F08B 21 AA               TEQA #0xAA
F08D 2B FF B0            JNE FAIL
F090 2A 1F FA            LDA EQUAL
F093 21 01               TEQA #0x01
F095 2B FF B0            JNE FAIL
F098 30 55               LDA #0x55
F09A 21 55               TEQA #0x55
F09C 2B FF B0            JNE FAIL
F09F 2A 1F FA            LDA EQUAL
F0A2 21 01               TEQA #0x01
F0A4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.22 TEQA 0x****  
                         ; TEST EQUAL A with MEM, A preserved, E updated, C preserved
                         ; --------------------------------------------------------------------
F0A7 30 22      TSTOP22  LDA #0x22
F0A9 19                  NOTA
F0AA 31 C0 00            STA LEDPORT ; Output to LED port
F0AD 30 00               LDA #0x00   ; Clear Carry flag first
F0AF 31 1F FB            STA CARRY
F0B2 30 5A               LDA #0x5A   ; Store a value in RAM
F0B4 31 02 00            STA 0x0200   
F0B7 30 5A               LDA #0x5A   ; -- Compare with same value --
F0B9 22 02 00            TEQA 0x0200
F0BC 2B FF B0            JNE FAIL    ; Jump if result say not equal
F0BF 2A 1F FA            LDA EQUAL   ; Read E flag and check it is set
F0C2 21 01               TEQA #0x01
F0C4 2B FF B0            JNE FAIL
F0C7 2A 1F FB            LDA CARRY   ; Read Carry flag and check it is still cleared
F0CA 21 00               TEQA #0x00
F0CC 2B FF B0            JNE FAIL
                         ; Now do the same using a set carry flag
F0CF 30 01               LDA #0x01   ; set Carry flag
F0D1 31 1F FB            STA CARRY
F0D4 30 BD               LDA #0xBD
F0D6 31 05 00            STA 0x0500
F0D9 22 05 00            TEQA 0x0500
F0DC 2B FF B0            JNE FAIL
F0DF 2A 1F FA            LDA EQUAL
F0E2 21 01               TEQA #0x01
F0E4 2B FF B0            JNE FAIL
F0E7 2A 1F FB            LDA CARRY   ; Test Carry flag still set
F0EA 21 01               TEQA #0x01
F0EC 2B FF B0            JNE FAIL
                         ; Now test for not equal
F0EF 30 00               LDA #0x00   ; Clear Carry flag first
F0F1 31 1F FB            STA CARRY
F0F4 30 3C               LDA #0x3C
F0F6 31 06 00            STA 0x0600
F0F9 30 4D               LDA #0x4D
F0FB 22 06 00            TEQA 0x0600
F0FE 2C FF B0            JEQ FAIL
F101 2A 1F FA            LDA EQUAL
F104 21 00               TEQA #0x00
F106 2B FF B0            JNE FAIL
F109 2A 1F FB            LDA CARRY   ; Test Carry flag still cleared
F10C 21 00               TEQA #0x00
F10E 2B FF B0            JNE FAIL
                         ; Now do the same using a set carry flag
F111 30 01               LDA #0x01
F113 31 1F FB            STA CARRY
F116 30 7E               LDA #0x7E      
F118 31 07 00            STA 0x0700
F11B 30 6F               LDA #0x6F
F11D 22 07 00            TEQA 0x0700
F120 2C FF B0            JEQ FAIL
F123 2A 1F FA            LDA EQUAL
F126 21 00               TEQA #0x00
F128 2B FF B0            JNE FAIL
F12B 2A 1F FB            LDA CARRY   ; Test Carry flag still set
F12E 21 01               TEQA #0x01
F130 2B FF B0            JNE FAIL
                         ; Test all bits for TEQA operation
F133 30 FF               LDA #0xFF
F135 31 08 00            STA 0x0800
F138 22 08 00            TEQA 0x0800
F13B 2B FF B0            JNE FAIL
F13E 2A 1F FA            LDA EQUAL
F141 21 01               TEQA #0x01
F143 2B FF B0            JNE FAIL
F146 30 00               LDA #0x00
F148 31 09 00            STA 0x0900
F14B 22 09 00            TEQA 0x0900
F14E 2B FF B0            JNE FAIL
F151 2A 1F FA            LDA EQUAL
F154 21 01               TEQA #0x01
F156 2B FF B0            JNE FAIL
F159 30 AA               LDA #0xAA
F15B 31 0A 00            STA 0x0A00
F15E 22 0A 00            TEQA 0x0A00
F161 2B FF B0            JNE FAIL
F164 2A 1F FA            LDA EQUAL
F167 21 01               TEQA #0x01
F169 2B FF B0            JNE FAIL
F16C 30 55               LDA #0x55
F16E 31 0B 00            STA 0x0B00
F171 22 0B 00            TEQA 0x0B00
F174 2B FF B0            JNE FAIL
F177 2A 1F FA            LDA EQUAL
F17A 21 01               TEQA #0x01
F17C 2B FF B0            JNE FAIL
                         ; Test with symbolic address
F17F 30 31               LDA #0x31      ; '1'
F181 22 FB 99            TEQA MSGTXT1
F184 2B FF B0            JNE FAIL
F187 30 32               LDA #0x32      ; '2'
F189 22 FB 9A            TEQA MSGTXT1+1
F18C 2B FF B0            JNE FAIL
F18F 30 33               LDA #0x33      ; '3'
F191 22 FB 9B            TEQA MSGTXT1+2
F194 2B FF B0            JNE FAIL
F197 30 41               LDA #0x41      ; 'A'
F199 22 FB 9C            TEQA MSGTXT1+3
F19C 2B FF B0            JNE FAIL     
                         ; --------------------------------------------------------------------
                         ; OP.23 JRUGE Jump Relative Unsigned Greater or Equal (Condition C = 1)
                         ; --------------------------------------------------------------------
F19F 30 23      TSTOP23  LDA #0x23
F1A1 19                  NOTA
F1A2 31 C0 00            STA LEDPORT    ; Output to LED port
F1A5 30 C4               LDA #0xC4      ; -- Test when equal (C=1)
F1A7 2D C4               CMPA #0xC4
F1A9 23 03               JRUGE TSTOP23A ; Jump if A >= 0xC4
F1AB 32 FF B0            JMP FAIL       ; Error if jump not taken
F1AE 2A 1F FB   TSTOP23A LDA CARRY
F1B1 21 01               TEQA #0x01     ; Check Carry Set
F1B3 2B FF B0            JNE FAIL
F1B6 30 3A               LDA #0x3A      ; -- Test when A < value (C=0)
F1B8 2D 4B               CMPA #0x4B
F1BA 23 1B               JRUGE TSTOP23X ; Error if jump taken
F1BC 2A 1F FB            LDA CARRY
F1BF 21 00               TEQA #0x00     ; Check Carry Cleared
F1C1 2B FF B0            JNE FAIL
F1C4 30 EF               LDA #0xEF      ;-- test when A > value (C=1)
F1C6 2D BE               CMPA #0xBE
F1C8 23 03               JRUGE TSTOP23B ; Jump if A >= 0xBE
F1CA 32 FF B0            JMP FAIL       ; Error if jump not taken
F1CD 2A 1F FB   TSTOP23B LDA CARRY
F1D0 21 01               TEQA #0x01     ; Check Carry Set
F1D2 2B FF B0            JNE FAIL
                         ; Test all bits for JRUGE operation
                ;         LDA #0x00
                ;         CMPA #0x00
                ;         JRUGE TSTOP23C
                ;         JMP FAIL
                ;TSTOP23C LDA CARRY
                ;         TEQA #0x01
                ;         JNE FAIL
                ;         LDA #0x7F
                ;         CMPA #0xFF
                ;         JRUGE TSTOP23X
                ;         LDA CARRY
                ;         TEQA #0x00
                ;         JNE FAIL
                ;         LDA #0x80
                ;         CMPA #0x7F
                ;         JRUGE TSTOP23D
                ;         JMP FAIL
                ;TSTOP23D LDA CARRY
                ;         TEQA #0x01
                ;         JNE FAIL
                ;         LDA #0xFF
                ;         CMPA #0x00
                ;         JRUGE TSTOP23E
                ;         JMP FAIL
                ;TSTOP23E LDA CARRY
                ;         TEQA #0x01
                ;         JNE FAIL
F1D5 0C 03               JRA TSTOP23Z
F1D7 32 FF B0   TSTOP23X JMP FAIL
F1DA 09         TSTOP23Z NOP         
                         ; --------------------------------------------------------------------
                         ; OP.29 ADDA 0x****  
                         ; ADD A WITH BYTE AT ADDRESS, C UPDATE
                         ; --------------------------------------------------------------------
F1DB 30 29      TSTOP29  LDA #0x29
F1DD 19                  NOTA
F1DE 31 C0 00            STA LEDPORT ; Output to LED port
F1E1 30 5F               LDA #0x5F   ; Store a value in RAM
F1E3 31 01 23            STA 0x0123   
F1E6 30 63               LDA #0x63
F1E8 29 01 23            ADDA 0x0123 ; Add to A the byte at address location
F1EB 21 C2               TEQA #0xC2  ; Check the sum
F1ED 2B FF B0            JNE FAIL    ; Jump if result not good
F1F0 2A 1F FB            LDA CARRY   ; Read the Carry Status
F1F3 21 00               TEQA #0x00  ; No carry expected then C should be '0'
F1F5 2B FF B0            JNE FAIL    ; Error if carry is set

F1F8 30 AC               LDA #0xAC   ; Store another value in RAM
F1FA 31 10 56            STA 0x1056   
F1FD 30 D9               LDA #0xD9
F1FF 29 10 56            ADDA 0x1056 ; Add to A the byte at address location
F202 21 85               TEQA #0x85  ; Check the sum LSB
F204 2B FF B0            JNE FAIL    ; Jump if result not as expected
F207 2A 1F FB            LDA CARRY   ; Read the Carry Status
F20A 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
F20C 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.2A LDA 0x****  
                         ; LOAD A WITH BYTE AT ADDRESS (Direct Addressing)
                         ; --------------------------------------------------------------------
F20F 30 2A      TSTOP2A  LDA #0x2A
F211 19                  NOTA
F212 31 C0 00            STA LEDPORT ; Output to LED port
F215 30 AA               LDA #0xAA   ; Load immediate in register A
F217 2D AA               CMPA #0xAA
F219 2B FF B0            JNE FAIL
F21C 30 01               LDA #0x01
F21E 2D 01               CMPA #0x01
F220 2B FF B0            JNE FAIL
F223 30 02               LDA #0x02
F225 2D 02               CMPA #0x02
F227 2B FF B0            JNE FAIL
F22A 30 04               LDA #0x04
F22C 2D 04               CMPA #0x04
F22E 2B FF B0            JNE FAIL
F231 30 08               LDA #0x08
F233 2D 08               CMPA #0x08
F235 2B FF B0            JNE FAIL
F238 30 10               LDA #0x10
F23A 2D 10               CMPA #0x10
F23C 2B FF B0            JNE FAIL
F23F 30 20               LDA #0x20
F241 2D 20               CMPA #0x20
F243 2B FF B0            JNE FAIL
F246 30 40               LDA #0x40
F248 2D 40               CMPA #0x40
F24A 2B FF B0            JNE FAIL
F24D 30 80               LDA #0x80
F24F 2D 80               CMPA #0x80
F251 2B FF B0            JNE FAIL
F254 30 55               LDA #0x55
F256 2D 55               CMPA #0x55
F258 2B FF B0            JNE FAIL
F25B 30 FF               LDA #0xFF
F25D 2D FF               CMPA #0xFF
F25F 2B FF B0            JNE FAIL
                         ; Now test symbolic with positive offset
F262 2A FB 99            LDA MSGTXT1
F265 2D 31               CMPA #0x31     ; '1'
F267 2B FF B0            JNE FAIL
F26A 2A FB 9A            LDA MSGTXT1+1
F26D 2D 32               CMPA #0x32     ; '2'
F26F 2B FF B0            JNE FAIL
F272 2A FB 9B            LDA MSGTXT1+2
F275 2D 33               CMPA #0x33     ; '3'
F277 2B FF B0            JNE FAIL
F27A 2A FB 9C            LDA MSGTXT1+3
F27D 2D 41               CMPA #0x41     ; 'A'
F27F 2B FF B0            JNE FAIL
F282 2A FB 9D            LDA MSGTXT1+4
F285 2D 42               CMPA #0x42     ; 'B'
F287 2B FF B0            JNE FAIL
F28A 2A FB 9E            LDA MSGTXT1+5
F28D 2D 43               CMPA #0x43     ; 'C'
F28F 2B FF B0            JNE FAIL
F292 2A FB 9F            LDA MSGTXT1+6
F295 2D 00               CMPA #0x00     ; null terminator
F297 2B FF B0            JNE FAIL
F29A 2A FB A3            LDA MSGTXT1+10
F29D 2D 6C               CMPA #0x6C
F29F 2B FF B0            JNE FAIL
F2A2 2A FB A4            LDA MSGTXT1+11
F2A5 2D 6F               CMPA #0x6F
F2A7 2B FF B0            JNE FAIL
                         ; Now test symbolic with negative offset
F2AA 2A FB AC            LDA MSGTXT3
F2AD 2D 54               CMPA #0x54     ; 'T'
F2AF 2B FF B0            JNE FAIL
F2B2 2A FB AB            LDA MSGTXT3-1
F2B5 2D 00               CMPA #0x00     ; null terminator
F2B7 2B FF B0            JNE FAIL
F2BA 2A FB AA            LDA MSGTXT3-2
F2BD 2D 64               CMPA #0x64     ; 'd'
F2BF 2B FF B0            JNE FAIL
F2C2 2A FB A9            LDA MSGTXT3-3
F2C5 2D 6C               CMPA #0x6C     ; 'l'
F2C7 2B FF B0            JNE FAIL
F2CA 2A FB A2            LDA MSGTXT3-10
F2CD 2D 6C               CMPA #0x6C
F2CF 2B FF B0            JNE FAIL
F2D2 2A FB A1            LDA MSGTXT3-11
F2D5 2D 65               CMPA #0x65
F2D7 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2B JNE 0x****  
                         ; JUMP IF E=0
                         ; Only a partial validation because i do not have symbolic address
                         ; processing in the assembler program.
                         ; --------------------------------------------------------------------
F2DA 30 2B      TSTOP2B  LDA #0x2B
F2DC 19                  NOTA
F2DD 31 C0 00            STA LEDPORT ; Output to LED port
F2E0 30 6D               LDA #0x6D   ; Load a value in A
F2E2 21 6D               TEQA #0x6D  ; Compare with the same value
F2E4 2B FF B0            JNE FAIL    ; Error if values are different
F2E7 30 10               LDA #0x10
F2E9 21 10               TEQA #0x10
F2EB 2B FF B0            JNE FAIL
F2EE 30 01               LDA #0x01
F2F0 21 01               TEQA #0x01
F2F2 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2C JEQ 0x****
                         ; JUMP IF E=1
                         ; --------------------------------------------------------------------
F2F5 30 2C      TST2C    LDA #0x2C
F2F7 19                  NOTA
F2F8 31 C0 00            STA LEDPORT ; Output to LED port
F2FB 30 7A               LDA #0x7A   ; Load a value in A
F2FD 21 28               TEQA #0x28  ; Compare with a different value
F2FF 2C FF B0            JEQ FAIL    ; If appear identical then it's and error
F302 30 FE               LDA #0xFE   ; Again with adifference 
F304 21 FF               TEQA #0xFF
F306 2C FF B0            JEQ FAIL 
F309 30 01               LDA #0x01   ; Another with difference
F30B 21 10               TEQA #0x10
F30D 2C FF B0            JEQ FAIL
F310 30 AB               LDA #0xAB   ; Now compare when values are identical
F312 21 AB               TEQA #0xAB
F314 2C F3 1A            JEQ TST2C_1 ; Testing if equal?
F317 32 FF B0            JMP FAIL    ; Result say both are not equal then it's a failure
F31A 30 00      TST2C_1  LDA #0x00   ; Result say the values are identical so we are passing
F31C 21 00               TEQA #0x00
F31E 2C F3 24            JEQ TST2C_2 ; Testing if equal?
F321 32 FF B0            JMP FAIL    ; if different then it's a failure
F324 30 01      TST2C_2  LDA #0x01
F326 21 01               TEQA #0x01
F328 2C F3 2E            JEQ TST2C_3 ; Testing if equal?
F32B 32 FF B0            JMP FAIL    ; if different then it's a failure
F32E 30 02      TST2C_3  LDA #0x02
F330 21 02               TEQA #0x02
F332 2C F3 38            JEQ TST2C_4 ; Testing if equal?
F335 32 FF B0            JMP FAIL    ; if different then it's a failure
F338 30 04      TST2C_4  LDA #0x04
F33A 21 04               TEQA #0x04
F33C 2C F3 42            JEQ TST2C_5 ; Testing if equal?
F33F 32 FF B0            JMP FAIL    ; if different then it's a failure
F342 30 08      TST2C_5  LDA #0x08
F344 21 08               TEQA #0x08
F346 2C F3 4C            JEQ TST2C_6 ; Testing if equal?
F349 32 FF B0            JMP FAIL    ; if different then it's a failure
F34C 30 10      TST2C_6  LDA #0x10
F34E 21 10               TEQA #0x10
F350 2C F3 56            JEQ TST2C_7 ; Testing if equal?
F353 32 FF B0            JMP FAIL    ; if different then it's a failure
F356 30 20      TST2C_7  LDA #0x20
F358 21 20               TEQA #0x20
F35A 2C F3 60            JEQ TST2C_8 ; Testing if equal?
F35D 32 FF B0            JMP FAIL    ; if different then it's a failure         
F360 30 40      TST2C_8  LDA #0x40
F362 21 40               TEQA #0x40
F364 2C F3 6A            JEQ TST2C_9 ; Testing if equal?
F367 32 FF B0            JMP FAIL    ; if different then it's a failure         
F36A 30 80      TST2C_9  LDA #0x80
F36C 21 80               TEQA #0x80
F36E 2C F3 74            JEQ TST2C_10 ; Testing if equal?
F371 32 FF B0            JMP FAIL    ; if different then it's a failure         
F374 09         TST2C_10 NOP
                         ; --------------------------------------------------------------------
                         ; OP.2D CMPA #0x**
                         ; Compare A with Imm (A-Imm)    A unchanged, E and C are updated
                         ; Note: CMPA  updates E and C  but  TEQA  updates E
                         ; --------------------------------------------------------------------
F375 30 2D      TSTOP2D  LDA #0x2D
F377 19                  NOTA
F378 31 C0 00            STA LEDPORT ; Output to LED port
F37B 30 CA               LDA #0xCA   ;  -- Compare with identical value --
F37D 2D CA               CMPA #0xCA
                         ;TEQA #0xCA  ; Verify A is unchanged  CAN'T DO THIS IT WILL OVERWRITE E
                         ;JNE FAIL
F37F 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS 
F382 21 01               TEQA #0x01  ; Verify bit<0> E = '1' and all others bits <7:1> are '0'
F384 2B FF B0            JNE FAIL
F387 2A 1F FB            LDA CARRY   ; Inspect CARRY STATUS
F38A 21 01               TEQA #0x01  ; Verify bit<0> C = '1' and all others bits <7:1> are '0'
F38C 2B FF B0            JNE FAIL
F38F 30 B5               LDA #0xB5   ;  -- Compare with different value (A > Imm) --
F391 2D 4D               CMPA #0x4D
                         ;TEQA #0xB5  ; Verify A is unchanged  CAN'T DO THIS IT WILL OVERWRITE E
                         ;JNE FAIL
F393 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS
F396 21 00               TEQA #0x00  ; Verify bit<0> E = '0'
F398 2B FF B0            JNE FAIL
F39B 2A 1F FB            LDA CARRY   ; Inspect CARRY STATUS
F39E 21 01               TEQA #0x01  ; Verify bit<0> C = '1'
F3A0 2B FF B0            JNE FAIL
F3A3 30 5B               LDA #0x5B   ;  -- Compare with different value (A < Imm) --
F3A5 2D EE               CMPA #0xEE
                         ;TEQA #0x5B  ; Verify A is unchanged  CAN'T DO THIS IT WILL OVERWRITE E
                         ;JNE FAIL
F3A7 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS
F3AA 21 00               TEQA #0x00  ; Verify bit<0> E = '0'
F3AC 2B FF B0            JNE FAIL
F3AF 2A 1F FB            LDA CARRY   ; Inspect CARRY STATUS
F3B2 21 00               TEQA #0x00  ; Verify bit<0> C = '0'
F3B4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2E ADCA #0x**
                         ; REG A = REG A + IMMEDIATE BYTE + CARRY (C)   
                         ; CARRY STATUS (C) IS UPDATED
                         ; --------------------------------------------------------------------
F3B7 30 2E      TSTOP2E  LDA #0x2E
F3B9 19                  NOTA
F3BA 31 C0 00            STA LEDPORT ; Output to LED port
F3BD 30 00               LDA #0x00   ; Clear CARRY (C)
F3BF 31 1F FB            STA CARRY      
F3C2 30 45               LDA #0x45
F3C4 2E 5B               ADCA #0x5B
F3C6 21 A0               TEQA #0xA0  ; Verify summ
F3C8 2B FF B0            JNE FAIL
F3CB 2A 1F FB            LDA CARRY   ; Check carry
F3CE 21 00               TEQA #0x00  ; Should be clear
F3D0 2B FF B0            JNE FAIL

F3D3 30 01               LDA #0x01   ; Set CARRY (C)
F3D5 31 1F FB            STA CARRY
F3D8 30 56               LDA #0x56
F3DA 2E 6D               ADCA #0x6D
F3DC 21 C4               TEQA #0xC4   ; Verify summ
F3DE 2B FF B0            JNE FAIL
F3E1 2A 1F FB            LDA CARRY   ; Check carry
F3E4 21 00               TEQA #0x00  ; Should be clear
F3E6 2B FF B0            JNE FAIL

F3E9 30 00               LDA #0x00   ; Clear CARRY (C)
F3EB 31 1F FB            STA CARRY
F3EE 30 7F               LDA #0x7F
F3F0 2E DE               ADCA #0xDE
F3F2 21 5D               TEQA #0x5D  ; Verify summ
F3F4 2B FF B0            JNE FAIL
F3F7 2A 1F FB            LDA CARRY   ; Check carry
F3FA 21 01               TEQA #0x01  ; Should be set
F3FC 2B FF B0            JNE FAIL

F3FF 30 01               LDA #0x01   ; Set CARRY (C)
F401 31 1F FB            STA CARRY
F404 30 FF               LDA #0xFF
F406 2E FF               ADCA #0xFF
F408 21 FF               TEQA #0xFF  ; Verify summ
F40A 2B FF B0            JNE FAIL
F40D 2A 1F FB            LDA CARRY   ; Check carry
F410 21 01               TEQA #0x01  ; Should be set
F412 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2F ADDA #0x**
                         ; ACCA+M>ACCA     C UPDATED
                         ; --------------------------------------------------------------------
F415 30 2F      TSTOP2F  LDA #0x2F
F417 19                  NOTA
F418 31 C0 00            STA LEDPORT ; Output to LED port
F41B 30 23               LDA #0x23
F41D 2F 45               ADDA #0x45
F41F 21 68               TEQA #0x68
F421 2B FF B0            JNE FAIL
F424 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F427 21 00               TEQA #0x00  ; Expecting C=0
F429 2B FF B0            JNE FAIL
F42C 30 8A               LDA #0x8A
F42E 2F BD               ADDA #0xBD
F430 21 47               TEQA #0x47   
F432 2B FF B0            JNE FAIL
F435 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F438 21 01               TEQA #0x01  ; Expecting C=1
F43A 2B FF B0            JNE FAIL
F43D 30 01               LDA #0x01
F43F 2F 02               ADDA #0x02
F441 21 03               TEQA #0x03
F443 2B FF B0            JNE FAIL
F446 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F449 21 00               TEQA #0x00  ; Expecting C=0
F44B 2B FF B0            JNE FAIL
F44E 30 FF               LDA #0xFF
F450 2F FF               ADDA #0xFF
F452 21 FE               TEQA #0xFE
F454 2B FF B0            JNE FAIL
F457 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F45A 21 01               TEQA #0x01   ; Expecting C=1
F45C 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.30 LDA #0x**  
                         ; LOAD IMMEDIATE VALUE IN REGISTER A
                         ; --------------------------------------------------------------------
F45F 30 30      TSTOP30  LDA #0x30
F461 19                  NOTA
F462 31 C0 00            STA LEDPORT ; Output to LED port
F465 30 00               LDA #0x00
F467 21 00               TEQA #0x00
F469 2B FF B0            JNE FAIL
F46C 30 01               LDA #0x01
F46E 21 01               TEQA #0x01
F470 2B FF B0            JNE FAIL
F473 30 02               LDA #0x02
F475 21 02               TEQA #0x02
F477 2B FF B0            JNE FAIL
F47A 30 04               LDA #0x04
F47C 21 04               TEQA #0x04
F47E 2B FF B0            JNE FAIL
F481 30 08               LDA #0x08
F483 21 08               TEQA #0x08
F485 2B FF B0            JNE FAIL
F488 30 10               LDA #0x10
F48A 21 10               TEQA #0x10
F48C 2B FF B0            JNE FAIL
F48F 30 20               LDA #0x20
F491 21 20               TEQA #0x20
F493 2B FF B0            JNE FAIL
F496 30 40               LDA #0x40
F498 21 40               TEQA #0x40
F49A 2B FF B0            JNE FAIL
F49D 30 80               LDA #0x80
F49F 21 80               TEQA #0x80
F4A1 2B FF B0            JNE FAIL
F4A4 30 55               LDA #0x55
F4A6 21 55               TEQA #0x55
F4A8 2B FF B0            JNE FAIL
F4AB 30 AA               LDA #0xAA
F4AD 21 AA               TEQA #0xAA
F4AF 2B FF B0            JNE FAIL
F4B2 30 FF               LDA #0xFF
F4B4 21 FF               TEQA #0xFF
F4B6 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.31 STA 0x**** 
                         ; STORE REG.A TO ADDRESSE
                         ; --------------------------------------------------------------------
F4B9 30 31      TSTOP31  LDA #0x31
F4BB 19                  NOTA
F4BC 31 C0 00            STA LEDPORT ; Output to LED port
F4BF 30 12               LDA #0x12   ; Write to RAM
F4C1 31 00 00            STA 0x0000
F4C4 30 23               LDA #0x23
F4C6 31 00 01            STA 0x0001
F4C9 30 34               LDA #0x34
F4CB 31 00 02            STA 0x0002
F4CE 30 45               LDA #0x45
F4D0 31 00 04            STA 0x0004
F4D3 30 56               LDA #0x56
F4D5 31 00 08            STA 0x0008
F4D8 30 67               LDA #0x67
F4DA 31 00 10            STA 0x0010
F4DD 30 78               LDA #0x78
F4DF 31 00 20            STA 0x0020
F4E2 30 89               LDA #0x89
F4E4 31 00 40            STA 0x0040
F4E7 30 AB               LDA #0xAB
F4E9 31 00 80            STA 0x0080
F4EC 30 BC               LDA #0xBC
F4EE 31 01 00            STA 0x0100
F4F1 30 CD               LDA #0xCD
F4F3 31 02 00            STA 0x0200
F4F6 30 DE               LDA #0xDE
F4F8 31 04 00            STA 0x0400
F4FB 30 22               LDA #0x22
F4FD 31 08 00            STA 0x0800
F500 30 33               LDA #0x33
F502 31 10 00            STA 0x1000
F505 30 44               LDA #0x44
F507 31 17 00            STA 0x1700
F50A 2A 00 00            LDA 0x0000  ; Read from RAM and compare
F50D 21 12               TEQA #0x12
F50F 2B FF B0            JNE FAIL
F512 2A 00 01            LDA 0x0001
F515 21 23               TEQA #0x23
F517 2B FF B0            JNE FAIL
F51A 2A 00 02            LDA 0x0002
F51D 21 34               TEQA #0x34
F51F 2B FF B0            JNE FAIL
F522 2A 00 04            LDA 0x0004
F525 21 45               TEQA #0x45
F527 2B FF B0            JNE FAIL
F52A 2A 00 08            LDA 0x0008
F52D 21 56               TEQA #0x56
F52F 2B FF B0            JNE FAIL
F532 2A 00 10            LDA 0x0010
F535 21 67               TEQA #0x67
F537 2B FF B0            JNE FAIL
F53A 2A 00 20            LDA 0x0020
F53D 21 78               TEQA #0x78
F53F 2B FF B0            JNE FAIL
F542 2A 00 40            LDA 0x0040
F545 21 89               TEQA #0x89
F547 2B FF B0            JNE FAIL
F54A 2A 00 80            LDA 0x0080
F54D 21 AB               TEQA #0xAB
F54F 2B FF B0            JNE FAIL
F552 2A 01 00            LDA 0x0100
F555 21 BC               TEQA #0xBC
F557 2B FF B0            JNE FAIL
F55A 2A 02 00            LDA 0x0200
F55D 21 CD               TEQA #0xCD
F55F 2B FF B0            JNE FAIL
F562 2A 04 00            LDA 0x0400
F565 21 DE               TEQA #0xDE
F567 2B FF B0            JNE FAIL
F56A 2A 08 00            LDA 0x0800
F56D 21 22               TEQA #0x22
F56F 2B FF B0            JNE FAIL
F572 2A 10 00            LDA 0x1000
F575 21 33               TEQA #0x33
F577 2B FF B0            JNE FAIL
F57A 2A 17 00            LDA 0x1700
F57D 21 44               TEQA #0x44
F57F 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.32 JMP 0x**** 
                         ; JUMP INCONDITIONAL TO ADDRESS
                         ; --------------------------------------------------------------------
                         ;LDA #0x32
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port

                         ; --------------------------------------------------------------------
                         ; OP.33 ANDA #0x**  REGISTER A AND LOGICAL IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
F582 30 33      TSTOP33  LDA #0x33
F584 19                  NOTA
F585 31 C0 00            STA LEDPORT ; Output to LED port
F588 30 FF               LDA #0xFF
F58A 33 52               ANDA #0x52
F58C 21 52               TEQA #0x52
F58E 2B FF B0            JNE FAIL
F591 30 E7               LDA #0xE7
F593 33 3C               ANDA #0x3C
F595 21 24               TEQA #0x24
F597 2B FF B0            JNE FAIL
F59A 30 00               LDA #0x00
F59C 33 00               ANDA #0x00
F59E 21 00               TEQA #0x00
F5A0 2B FF B0            JNE FAIL
F5A3 30 FF               LDA #0xFF
F5A5 33 FF               ANDA #0xFF
F5A7 21 FF               TEQA #0xFF
F5A9 2B FF B0            JNE FAIL
F5AC 30 FF               LDA #0xFF
F5AE 33 55               ANDA #0x55
F5B0 21 55               TEQA #0x55
F5B2 2B FF B0            JNE FAIL
F5B5 30 FF               LDA #0xFF
F5B7 33 00               ANDA #0x00
F5B9 21 00               TEQA #0x00
F5BB 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; FIBONACCI TEST
                         ; first method using direct addressing
                         ; --------------------------------------------------------------------         
F5BE 30 40      TSTFB1   LDA #0x40
F5C0 19                  NOTA
F5C1 31 C0 00            STA LEDPORT ; Output to LED port
                                     ;
F5C4 30 00               LDA #0x00   ; Init first number with 00H
F5C6 31 10 00            STA 0x1000
F5C9 30 01               LDA #0x01   ; Init second number with 01H
F5CB 31 10 01            STA 0x1001
F5CE 2A 10 00            LDA 0x1000  ; Load first number in A
F5D1 29 10 01            ADDA 0x1001 ; Add second number to A
F5D4 31 10 02            STA 0x1002  ; Store the summ
F5D7 21 01               TEQA #0x01  ; HEX   Decimal  Real Value (in 8 bit storage only)
F5D9 2B FF B0            JNE FAIL    ; x01   1        1

F5DC 2A 10 01            LDA 0x1001  ; Move second number to the first number
F5DF 31 10 00            STA 0x1000
F5E2 2A 10 02            LDA 0x1002  ; Move summ to the second number
F5E5 31 10 01            STA 0x1001
F5E8 2A 10 00            LDA 0x1000  ; Load first number in A
F5EB 29 10 01            ADDA 0x1001 ; Add second number to A
F5EE 31 10 02            STA 0x1002  ; Store the summ
F5F1 21 02               TEQA #0x02  ; HEX   Decimal  Real Value
F5F3 2B FF B0            JNE FAIL    ; x02   2        2

F5F6 2A 10 01            LDA 0x1001  ; Move second number to the first number
F5F9 31 10 00            STA 0x1000
F5FC 2A 10 02            LDA 0x1002   ; Move summ to the second number
F5FF 31 10 01            STA 0x1001
F602 2A 10 00            LDA 0x1000  ; Load first number in A
F605 29 10 01            ADDA 0x1001 ; Add second number to A
F608 31 10 02            STA 0x1002  ; Store the summ
F60B 21 03               TEQA #0x03  ; HEX   Decimal  Real Value
F60D 2B FF B0            JNE FAIL    ; x03   3        3

F610 2A 10 01            LDA 0x1001  ; Move second number to the first number
F613 31 10 00            STA 0x1000
F616 2A 10 02            LDA 0x1002  ; Move summ to the second number
F619 31 10 01            STA 0x1001
F61C 2A 10 00            LDA 0x1000  ; Load first number in A
F61F 29 10 01            ADDA 0x1001 ; Add second number to A
F622 31 10 02            STA 0x1002  ; Store the summ
F625 21 05               TEQA #0x05  ; HEX   Decimal  Real Value
F627 2B FF B0            JNE FAIL    ; x05   5        5

F62A 2A 10 01            LDA 0x1001  ; Move second number to the first number
F62D 31 10 00            STA 0x1000
F630 2A 10 02            LDA 0x1002  ; Move summ to the second number
F633 31 10 01            STA 0x1001
F636 2A 10 00            LDA 0x1000  ; Load first number in A
F639 29 10 01            ADDA 0x1001 ; Add second number to A
F63C 31 10 02            STA 0x1002  ; Store the summ
F63F 21 08               TEQA #0x08  ; HEX   Decimal  Real Value
F641 2B FF B0            JNE FAIL    ; x08   8        8

F644 2A 10 01            LDA 0x1001  ; Move second number to the first number
F647 31 10 00            STA 0x1000
F64A 2A 10 02            LDA 0x1002  ; Move summ to the second number
F64D 31 10 01            STA 0x1001
F650 2A 10 00            LDA 0x1000  ; Load first number in A
F653 29 10 01            ADDA 0x1001 ; Add second number to A
F656 31 10 02            STA 0x1002  ; Store the summ
F659 21 0D               TEQA #0x0D  ; HEX   Decimal  Real Value
F65B 2B FF B0            JNE FAIL    ; x0D   13       13

F65E 2A 10 01            LDA 0x1001  ; Move second number to the first number
F661 31 10 00            STA 0x1000
F664 2A 10 02            LDA 0x1002  ; Move summ to the second number
F667 31 10 01            STA 0x1001
F66A 2A 10 00            LDA 0x1000  ; Load first number in A
F66D 29 10 01            ADDA 0x1001 ; Add second number to A
F670 31 10 02            STA 0x1002  ; Store the summ
F673 21 15               TEQA #0x15  ; HEX   Decimal  Real Value
F675 2B FF B0            JNE FAIL    ; x15   21       21

F678 2A 10 01            LDA 0x1001  ; Move second number to the first number
F67B 31 10 00            STA 0x1000
F67E 2A 10 02            LDA 0x1002  ; Move summ to the second number
F681 31 10 01            STA 0x1001
F684 2A 10 00            LDA 0x1000  ; Load first number in A
F687 29 10 01            ADDA 0x1001 ; Add second number to A
F68A 31 10 02            STA 0x1002  ; Store the summ
F68D 21 22               TEQA #0x22  ; HEX   Decimal  Real Value
F68F 2B FF B0            JNE FAIL    ; x22   34       34

F692 2A 10 01            LDA 0x1001  ; Move second number to the first number
F695 31 10 00            STA 0x1000
F698 2A 10 02            LDA 0x1002  ; Move summ to the second number
F69B 31 10 01            STA 0x1001
F69E 2A 10 00            LDA 0x1000  ; Load first number in A
F6A1 29 10 01            ADDA 0x1001 ; Add second number to A
F6A4 31 10 02            STA 0x1002  ; Store the summ
F6A7 21 37               TEQA #0x37  ; HEX   Decimal  Real Value
F6A9 2B FF B0            JNE FAIL    ; x37   55       55

F6AC 2A 10 01            LDA 0x1001  ; Move second number to the first number
F6AF 31 10 00            STA 0x1000
F6B2 2A 10 02            LDA 0x1002  ; Move summ to the second number
F6B5 31 10 01            STA 0x1001
F6B8 2A 10 00            LDA 0x1000  ; Load first number in A
F6BB 29 10 01            ADDA 0x1001 ; Add second number to A
F6BE 31 10 02            STA 0x1002  ; Store the summ
F6C1 21 59               TEQA #0x59  ; HEX   Decimal  Real Value
F6C3 2B FF B0            JNE FAIL    ; x59   89       89

F6C6 2A 10 01            LDA 0x1001  ; Move second number to the first number
F6C9 31 10 00            STA 0x1000
F6CC 2A 10 02            LDA 0x1002  ; Move summ to the second number
F6CF 31 10 01            STA 0x1001
F6D2 2A 10 00            LDA 0x1000  ; Load first number in A
F6D5 29 10 01            ADDA 0x1001 ; Add second number to A
F6D8 31 10 02            STA 0x1002  ; Store the summ
F6DB 21 90               TEQA #0x90  ; HEX   Decimal  Real Value
F6DD 2B FF B0            JNE FAIL    ; x90   144      144

F6E0 2A 10 01            LDA 0x1001  ; Move second number to the first number
F6E3 31 10 00            STA 0x1000
F6E6 2A 10 02            LDA 0x1002  ; Move summ to the second number
F6E9 31 10 01            STA 0x1001
F6EC 2A 10 00            LDA 0x1000  ; Load first number in A
F6EF 29 10 01            ADDA 0x1001 ; Add second number to A
F6F2 31 10 02            STA 0x1002  ; Store the summ
F6F5 21 E9               TEQA #0xE9  ; HEX   Decimal  Real Value
F6F7 2B FF B0            JNE FAIL    ; xE9   233      233

F6FA 2A 10 01            LDA 0x1001  ; Move second number to the first number
F6FD 31 10 00            STA 0x1000
F700 2A 10 02            LDA 0x1002  ; Move summ to the second number
F703 31 10 01            STA 0x1001
F706 2A 10 00            LDA 0x1000  ; Load first number in A
F709 29 10 01            ADDA 0x1001 ; Add second number to A
F70C 31 10 02            STA 0x1002  ; Store the summ
F70F 21 79               TEQA #0x79  ; HEX   Decimal  Real Value
F711 2B FF B0            JNE FAIL    ; x79   121      377 - (256*1) = 121

F714 2A 10 01            LDA 0x1001  ; Move second number to the first number
F717 31 10 00            STA 0x1000
F71A 2A 10 02            LDA 0x1002  ; Move summ to the second number
F71D 31 10 01            STA 0x1001
F720 2A 10 00            LDA 0x1000  ; Load first number in A
F723 29 10 01            ADDA 0x1001 ; Add second number to A
F726 31 10 02            STA 0x1002  ; Store the summ
F729 21 62               TEQA #0x62  ; HEX   Decimal  Real Value
F72B 2B FF B0            JNE FAIL    ; x62   98       610 - (256*2) = 98

F72E 2A 10 01            LDA 0x1001  ; Move second number to the first number
F731 31 10 00            STA 0x1000
F734 2A 10 02            LDA 0x1002  ; Move summ to the second number
F737 31 10 01            STA 0x1001
F73A 2A 10 00            LDA 0x1000  ; Load first number in A
F73D 29 10 01            ADDA 0x1001 ; Add second number to A
F740 31 10 02            STA 0x1002  ; Store the summ
F743 21 DB               TEQA #0xDB  ; HEX   Decimal  Real Value
F745 2B FF B0            JNE FAIL    ; xDB   219      987 - (256*3) = 219         
                         ; --------------------------------------------------------------------      
                         ; END OF FIBONACCI TEST (method using direct addressing)
                         ; --------------------------------------------------------------------          

                         ; ---------
                         ; Loop test
                         ; ---------
F748 30 41      LOOPTST  LDA #0x41
F74A 19                  NOTA
F74B 31 C0 00            STA LEDPORT    ; Output to LED port
F74E 30 05               LDA #0x05      ; Init a counter of iterations
F750 31 00 0F            STA ?b0
F753 2A 00 0F   LOOPTST1 LDA ?b0        ; Read counter
F756 21 00               TEQA #0x00     ; Is it 0?
F758 2C F7 62            JEQ LOOPTST2   ; Yes then it's the end fo the test
F75B 2F FF               ADDA #0xFF     ; Add -1 in complement 2 (equivalent to decrement)
F75D 31 00 0F            STA ?b0        ; Save decremented count
F760 0C F1               JRA LOOPTST1
F762 09         LOOPTST2 NOP            ; End of decrement loop         

                         ; -----------------
                         ; Math Library Test
                         ; -----------------
                         ; Test add16_w0_w0_w1  w0 <= w0 + w1
F763 30 42               LDA #0x42
F765 19                  NOTA
F766 31 C0 00            STA LEDPORT ; Output to LED port
F769 30 BE               LDA #0xBE   ; w0 = 0xBEEF
F76B 31 00 0E            STA ?b1
F76E 30 EF               LDA #0xEF
F770 31 00 0F            STA ?b0
F773 30 DE               LDA #0xDE   ; w1 = 0xDEAD
F775 31 00 0C            STA ?b3
F778 30 AD               LDA #0xAD
F77A 31 00 0D            STA ?b2
F77D 06 FE 16            JSR ?add16_w0_w0_w1  ; w0 <= w0 + w1
F780 2A 00 0E            LDA ?b1              ; Expected w0 = 9D9C + C set
F783 21 9D               TEQA #0x9D
F785 2B FF B0            JNE FAIL
F788 2A 00 0F            LDA ?b0
F78B 21 9C               TEQA #0x9C
F78D 2B FF B0            JNE FAIL
F790 2A 1F FB            LDA CARRY
F793 21 01               TEQA #0x01
F795 2B FF B0            JNE FAIL

                         ; Test add32_l0_l0_l1  l0 <= l0 + l1
F798 30 43               LDA #0x43
F79A 19                  NOTA
F79B 31 C0 00            STA LEDPORT ; Output to LED port
F79E 30 89               LDA #0x89   ; l0 = 0x89ABCDEF
F7A0 31 00 0C            STA ?b3
F7A3 30 AB               LDA #0xAB
F7A5 31 00 0D            STA ?b2
F7A8 30 CD               LDA #0xCD
F7AA 31 00 0E            STA ?b1
F7AD 30 EF               LDA #0xEF
F7AF 31 00 0F            STA ?b0
F7B2 30 DE               LDA #0xDE   ; l1 = DEADBEEF
F7B4 31 00 08            STA ?b7
F7B7 30 AD               LDA #0xAD
F7B9 31 00 09            STA ?b6
F7BC 30 BE               LDA #0xBE
F7BE 31 00 0A            STA ?b5
F7C1 30 EF               LDA #0xEF
F7C3 31 00 0B            STA ?b4
F7C6 06 FE 29            JSR ?add32_l0_l0_l1  ; l0 <= l0 + l1
F7C9 2A 00 0C            LDA ?b3              ; Expected l0 = 0x68598CDE + C set
F7CC 21 68               TEQA #0x68
F7CE 2B FF B0            JNE FAIL
F7D1 2A 00 0D            LDA ?b2
F7D4 21 59               TEQA #0x59
F7D6 2B FF B0            JNE FAIL
F7D9 2A 00 0E            LDA ?b1
F7DC 21 8C               TEQA #0x8C
F7DE 2B FF B0            JNE FAIL
F7E1 2A 00 0F            LDA ?b0
F7E4 21 DE               TEQA #0xDE
F7E6 2B FF B0            JNE FAIL
F7E9 2A 1F FB            LDA CARRY
F7EC 21 01               TEQA #0x01
F7EE 2B FF B0            JNE FAIL

                         ; Test ?inc32_l0_l0   l0 <= l0 + 1
F7F1 30 44               LDA #0x44
F7F3 19                  NOTA
F7F4 31 C0 00            STA LEDPORT ; Output to LED port
F7F7 30 FF               LDA #0xFF   ; l0 = 0xFFFFFFFF
F7F9 31 00 0C            STA ?b3
F7FC 30 FF               LDA #0xFF
F7FE 31 00 0D            STA ?b2
F801 30 FF               LDA #0xFF
F803 31 00 0E            STA ?b1
F806 30 FF               LDA #0xFF
F808 31 00 0F            STA ?b0
F80B 06 FE 98            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
                         ; Expected l0 = 0x00000000
F80E 2A 00 0C            LDA ?b3     ; Expected l0 = 0x00000000
F811 21 00               TEQA #0x00
F813 2B FF B0            JNE FAIL
F816 2A 00 0D            LDA ?b2
F819 21 00               TEQA #0x00
F81B 2B FF B0            JNE FAIL
F81E 2A 00 0E            LDA ?b1
F821 21 00               TEQA #0x00
F823 2B FF B0            JNE FAIL
F826 2A 00 0F            LDA ?b0
F829 21 00               TEQA #0x00
F82B 2B FF B0            JNE FAIL
F82E 06 FE 98            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
F831 2A 00 0C            LDA ?b3
F834 21 00               TEQA #0x00
F836 2B FF B0            JNE FAIL
F839 2A 00 0D            LDA ?b2
F83C 21 00               TEQA #0x00
F83E 2B FF B0            JNE FAIL
F841 2A 00 0E            LDA ?b1
F844 21 00               TEQA #0x00
F846 2B FF B0            JNE FAIL
F849 2A 00 0F            LDA ?b0
F84C 21 01               TEQA #0x01
F84E 2B FF B0            JNE FAIL
F851 06 FE 98            JSR ?inc32_l0_l0
F854 06 FE 98            JSR ?inc32_l0_l0
F857 06 FE 98            JSR ?inc32_l0_l0
F85A 06 FE 98            JSR ?inc32_l0_l0
F85D 06 FE 98            JSR ?inc32_l0_l0
F860 06 FE 98            JSR ?inc32_l0_l0
F863 06 FE 98            JSR ?inc32_l0_l0
F866 06 FE 98            JSR ?inc32_l0_l0
F869 06 FE 98            JSR ?inc32_l0_l0
F86C 06 FE 98            JSR ?inc32_l0_l0
F86F 06 FE 98            JSR ?inc32_l0_l0
F872 06 FE 98            JSR ?inc32_l0_l0
F875 06 FE 98            JSR ?inc32_l0_l0
F878 06 FE 98            JSR ?inc32_l0_l0
F87B 06 FE 98            JSR ?inc32_l0_l0
F87E 06 FE 98            JSR ?inc32_l0_l0
F881 06 FE 98            JSR ?inc32_l0_l0
F884 2A 00 0C            LDA ?b3
F887 21 00               TEQA #0x00
F889 2B FF B0            JNE FAIL
F88C 2A 00 0D            LDA ?b2
F88F 21 00               TEQA #0x00
F891 2B FF B0            JNE FAIL
F894 2A 00 0E            LDA ?b1
F897 21 00               TEQA #0x00
F899 2B FF B0            JNE FAIL
F89C 2A 00 0F            LDA ?b0
F89F 21 12               TEQA #0x12
F8A1 2B FF B0            JNE FAIL

                         ; Test  MUL 8-bit
                         ; mul8_w1_b1_b0   w1 (b3,b2) <= b1 * b0
F8A4 30 45               LDA #0x45
F8A6 19                  NOTA
F8A7 31 C0 00            STA LEDPORT ; Output to LED port
F8AA 30 02               LDA #0x02   ; 3 * 2 = 6
F8AC 31 00 0F            STA ?b0
F8AF 30 03               LDA #0x03
F8B1 31 00 0E            STA ?b1
F8B4 06 FE E9            JSR ?mul8_w1_b1_b0
F8B7 2A 00 0C            LDA ?b3
F8BA 21 00               TEQA #0x00
F8BC 2B FF B0            JNE FAIL
F8BF 2A 00 0D            LDA ?b2
F8C2 21 06               TEQA #0x06
F8C4 2B FF B0            JNE FAIL

F8C7 30 FF               LDA #0xFF   ; 255 * 255 = 65025 (0xFF * 0xFF = 0xFE01)
F8C9 31 00 0F            STA ?b0
F8CC 31 00 0E            STA ?b1
F8CF 06 FE E9            JSR ?mul8_w1_b1_b0
F8D2 2A 00 0C            LDA ?b3
F8D5 21 FE               TEQA #0xFE
F8D7 2B FF B0            JNE FAIL
F8DA 2A 00 0D            LDA ?b2
F8DD 21 01               TEQA #0x01
F8DF 2B FF B0            JNE FAIL

F8E2 30 AB               LDA #0xAB   ; 171 * 205 = 35055 (0xAB * 0xCD = 0x88EF)
F8E4 31 00 0F            STA ?b0
F8E7 30 CD               LDA #0xCD
F8E9 31 00 0E            STA ?b1
F8EC 06 FE E9            JSR ?mul8_w1_b1_b0
F8EF 2A 00 0C            LDA ?b3
F8F2 21 88               TEQA #0x88
F8F4 2B FF B0            JNE FAIL
F8F7 2A 00 0D            LDA ?b2
F8FA 21 EF               TEQA #0xEF
F8FC 2B FF B0            JNE FAIL

F8FF 30 00               LDA #0x00   ; 0 * 0 = 0 (0x00 * 0x00 = 0x0000)
F901 31 00 0F            STA ?b0
F904 31 00 0E            STA ?b1
F907 06 FE E9            JSR ?mul8_w1_b1_b0
F90A 2A 00 0C            LDA ?b3
F90D 21 00               TEQA #0x00
F90F 2B FF B0            JNE FAIL
F912 2A 00 0D            LDA ?b2
F915 21 00               TEQA #0x00
F917 2B FF B0            JNE FAIL

                         ; Test  MUL 16-bit
                         ; Total time for 3 multiplications 140ms @ 2 MHz
                         ; 46ms per 16bit mult (21.7 multiplications per second)
                         ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
F91A 30 46               LDA #0x46
F91C 19                  NOTA
F91D 31 C0 00            STA LEDPORT ; Output to LED port

F920 30 00               LDA #0x00   ; 0 * 0 = 0 (0x0000 * 0x0000 = 0x00000000)
F922 31 00 0F            STA ?b0
F925 31 00 0E            STA ?b1
F928 31 00 0D            STA ?b2
F92B 31 00 0C            STA ?b3
F92E 06 FF 0A            JSR ?mul16_l1_w1_w0
F931 2A 00 08            LDA ?b7
F934 21 00               TEQA #0x00
F936 2B FF B0            JNE FAIL
F939 2A 00 09            LDA ?b6
F93C 21 00               TEQA #0x00
F93E 2B FF B0            JNE FAIL
F941 2A 00 0A            LDA ?b5
F944 21 00               TEQA #0x00
F946 2B FF B0            JNE FAIL
F949 2A 00 0B            LDA ?b4
F94C 21 00               TEQA #0x00
F94E 2B FF B0            JNE FAIL

F951 30 FF               LDA #0xFF   ; 65535 * 65535 = 4294836225  (0xFFFF * 0xFFFF = 0xFFFE0001)
F953 31 00 0F            STA ?b0
F956 31 00 0E            STA ?b1
F959 31 00 0D            STA ?b2
F95C 31 00 0C            STA ?b3
F95F 06 FF 0A            JSR ?mul16_l1_w1_w0
F962 2A 00 08            LDA ?b7
F965 21 FF               TEQA #0xFF
F967 2B FF B0            JNE FAIL
F96A 2A 00 09            LDA ?b6
F96D 21 FE               TEQA #0xFE
F96F 2B FF B0            JNE FAIL
F972 2A 00 0A            LDA ?b5
F975 21 00               TEQA #0x00
F977 2B FF B0            JNE FAIL
F97A 2A 00 0B            LDA ?b4
F97D 21 01               TEQA #0x01
F97F 2B FF B0            JNE FAIL

F982 30 31               LDA #0x31   ; 12345 * 54321 = 670592745  (0x3039 * 0xD431 = 0x27F86EE9)
F984 31 00 0F            STA ?b0
F987 30 D4               LDA #0xD4
F989 31 00 0E            STA ?b1
F98C 30 39               LDA #0x39
F98E 31 00 0D            STA ?b2
F991 30 30               LDA #0x30
F993 31 00 0C            STA ?b3
F996 06 FF 0A            JSR ?mul16_l1_w1_w0   
F999 2A 00 08            LDA ?b7
F99C 21 27               TEQA #0x27
F99E 2B FF B0            JNE FAIL
F9A1 2A 00 09            LDA ?b6
F9A4 21 F8               TEQA #0xF8
F9A6 2B FF B0            JNE FAIL
F9A9 2A 00 0A            LDA ?b5
F9AC 21 6E               TEQA #0x6E
F9AE 2B FF B0            JNE FAIL
F9B1 2A 00 0B            LDA ?b4
F9B4 21 E9               TEQA #0xE9
F9B6 2B FF B0            JNE FAIL  

                         ; Test load32_l0, load32_l1, load32_l2, load32_l3
F9B9 30 47               LDA #0x47
F9BB 19                  NOTA
F9BC 31 C0 00            STA LEDPORT ; Output to LED port
                         ; Test load32_l0
F9BF 04 12 34            LDX #0x1234
F9C2 16 15 00            STX 0x1500        ; Store test address
F9C5 04 56 78            LDX #0x5678
F9C8 16 15 02            STX 0x1502        ; Store test address
F9CB 04 15 00            LDX #0x1500       ; Load address of test data
F9CE 06 FC 95            JSR ?load32_l0    ; Load 32-bit value from memory to l0
F9D1 2A 00 0C            LDA ?b3           ; Verify loaded value
F9D4 21 12               TEQA #0x12
F9D6 2B FF B0            JNE FAIL
F9D9 2A 00 0D            LDA ?b2
F9DC 21 34               TEQA #0x34
F9DE 2B FF B0            JNE FAIL
F9E1 2A 00 0E            LDA ?b1
F9E4 21 56               TEQA #0x56
F9E6 2B FF B0            JNE FAIL
F9E9 2A 00 0F            LDA ?b0
F9EC 21 78               TEQA #0x78
F9EE 2B FF B0            JNE FAIL 
F9F1 1A 15 03            CMPX #0x1503      ; also verify current X value
F9F4 2B FF B0            JNE FAIL
                         ; Test load32_l1
F9F7 04 AB CD            LDX #0xABCD
F9FA 16 16 00            STX 0x1600        ; Store test address
F9FD 04 DE AD            LDX #0xDEAD
FA00 16 16 02            STX 0x1602        ; Store test address
FA03 04 16 00            LDX #0x1600       ; Load address of test data
FA06 06 FC A9            JSR ?load32_l1    ; Load 32-bit value from memory to l1
FA09 2A 00 08            LDA ?b7           ; Verify loaded value
FA0C 21 AB               TEQA #0xAB
FA0E 2B FF B0            JNE FAIL
FA11 2A 00 09            LDA ?b6
FA14 21 CD               TEQA #0xCD
FA16 2B FF B0            JNE FAIL
FA19 2A 00 0A            LDA ?b5
FA1C 21 DE               TEQA #0xDE
FA1E 2B FF B0            JNE FAIL
FA21 2A 00 0B            LDA ?b4
FA24 21 AD               TEQA #0xAD
FA26 2B FF B0            JNE FAIL 
FA29 1A 16 03            CMPX #0x1603      ; also verify current X value
FA2C 2B FF B0            JNE FAIL
                         ; Test load32_l2
FA2F 04 1A 2B            LDX #0x1A2B
FA32 16 17 00            STX 0x1700        ; Store test address
FA35 04 3C 4D            LDX #0x3C4D
FA38 16 17 02            STX 0x1702        ; Store test address
FA3B 04 17 00            LDX #0x1700       ; Load address of test data
FA3E 06 FC BD            JSR ?load32_l2    ; Load 32-bit value from memory to l2
FA41 2A 00 04            LDA ?b11          ; Verify loaded value
FA44 21 1A               TEQA #0x1A
FA46 2B FF B0            JNE FAIL
FA49 2A 00 05            LDA ?b10
FA4C 21 2B               TEQA #0x2B
FA4E 2B FF B0            JNE FAIL
FA51 2A 00 06            LDA ?b9
FA54 21 3C               TEQA #0x3C
FA56 2B FF B0            JNE FAIL
FA59 2A 00 07            LDA ?b8
FA5C 21 4D               TEQA #0x4D
FA5E 2B FF B0            JNE FAIL 
FA61 1A 17 03            CMPX #0x1703      ; also verify current X value
FA64 2B FF B0            JNE FAIL
                         ; Test load32_l3
FA67 04 2F 3E            LDX #0x2F3E
FA6A 16 18 00            STX 0x1800        ; Store test address
FA6D 04 4D 5C            LDX #0x4D5C
FA70 16 18 02            STX 0x1802        ; Store test address
FA73 04 18 00            LDX #0x1800       ; Load address of test data
FA76 06 FC D1            JSR ?load32_l3    ; Load 32-bit value from memory to l3
FA79 2A 00 00            LDA ?b15          ; Verify loaded value
FA7C 21 2F               TEQA #0x2F
FA7E 2B FF B0            JNE FAIL
FA81 2A 00 01            LDA ?b14
FA84 21 3E               TEQA #0x3E
FA86 2B FF B0            JNE FAIL
FA89 2A 00 02            LDA ?b13
FA8C 21 4D               TEQA #0x4D
FA8E 2B FF B0            JNE FAIL
FA91 2A 00 03            LDA ?b12
FA94 21 5C               TEQA #0x5C
FA96 2B FF B0            JNE FAIL 
FA99 1A 18 03            CMPX #0x1803      ; also verify current X value
FA9C 2B FF B0            JNE FAIL         

                         ; ---------------------
                         ; END Math Library Test
                         ; ---------------------

                               ; TEST EXECUTION FROM RAM
                               ; Copy a block of code from EEPROM to RAM
                               ; then call to execute this block in RAM. Resume execution from EEPROM
FA9F 30 80                     LDA #0x80
FAA1 19                        NOTA
FAA2 31 C0 00                  STA LEDPORT ; Output to LED port
FAA5 32 FA C6                  JMP BLKCODEEND   ; We skip the nex block of code to be copied in RAM
                               ; Simple 8 bit multiplication test code
FAA8 30 56      BLKCODESTART   LDA #0x56   ; 86 * 171 = 14706   (0x56 * 0xAB = 0x3972)
FAAA 31 00 0F                  STA ?b0
FAAD 30 AB                     LDA #0xAB
FAAF 31 00 0E                  STA ?b1
FAB2 06 FE E9                  JSR ?mul8_w1_b1_b0
FAB5 2A 00 0C                  LDA ?b3
FAB8 21 39                     TEQA #0x39
FABA 2B FF B0                  JNE FAIL
FABD 2A 00 0D                  LDA ?b2
FAC0 21 72                     TEQA #0x72
FAC2 2B FF B0                  JNE FAIL
FAC5 07                        RTS
                               ; Copy the Block of code from EEPROM to RAM
FAC6 04 FA A8   BLKCODEEND     LDX #BLKCODESTART ; Load address of BLKCODESTART
FAC9 16 00 0E                  STX ?b1           ; Store this adddress in ?b1:?b0
                RAMDESTSTART   EQU 0x1000
FACC 04 10 00                  LDX #RAMDESTSTART ; Load address of RAM destination
FACF 16 00 0C                  STX ?b3           ; Store this adddress in ?b3:?b2
                               ; copy a byte from source to destination
FAD2 1B 0E      LOOPTST47      LDX ?b1           ; Load X with source address in ?b1:?b0
FAD4 1A FA C6                  CMPX #BLKCODEEND  ; Check if last byte copied
FAD7 2C FA E8                  JEQ ENDCOPYTST47  ; if yes then quit copy loop
FADA 0A                        LDA (X)           ; Load byte pointed by X
FADB 05                        INCX
FADC 16 00 0E                  STX ?b1
FADF 1B 0C                     LDX ?b3           ; Load X with destination address in ?b3:?b2
FAE1 0B                        STA (X)           ; Store byte to address pointed by X
FAE2 05                        INCX
FAE3 16 00 0C                  STX ?b3
FAE6 0C EA                     JRA LOOPTST47
FAE8 06 10 00   ENDCOPYTST47   JSR RAMDESTSTART ; Jump to ram for code execution

                            ; ---------------------------------------
                            ; 32-bit Fibonacci using library routines
                            ; l2 = F(n), l1 = F(n-1), l0 = F(n-2)
                            ; ---------------------------------------
FAEB 30 81                  LDA #0x81
FAED 19                     NOTA
FAEE 31 C0 00               STA LEDPORT
                LOOPCNT     EQU 0x0100           ; Loop counter storage
                FIBNUMB     EQU 0x1000           ; Output buffer for Fibonacci numbers
                            ; Initialize Fibonacci state
FAF1 06 FB EF               JSR ?clear32_l0      ; F(0) = 0
FAF4 06 FC 84               JSR ?set32_l1_to_1   ; F(1) = 1
FAF7 06 FC 0D               JSR ?clear32_l2
                            ; Output buffer
FAFA 04 10 00               LDX #FIBNUMB
FAFD 06 FC E5               JSR ?store32_l0      ; F(0)
FB00 05                     INCX                 ; advance to next 32-bit slot
FB01 06 FC F9               JSR ?store32_l1      ; F(1)
FB04 05                     INCX                 ; advance to next 32-bit slot
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
FB05 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
FB07 31 01 00               STA LOOPCNT
FB0A 06 FE 4E   FIB32_LOOP  JSR ?add32_l2_l1_l0  ; l2 = l1 + l0
FB0D 06 FD 0D               JSR ?store32_l2      ; store F(n)
FB10 05                     INCX                 ; advance to next 32-bit slot
                            ; rotate registers
FB11 06 FD 80               JSR ?mov32_l0_l1     ; l0 = l1
FB14 06 FD E4               JSR ?mov32_l1_l2     ; l1 = l2
                            ;  DEC LOOPCNT    ; i dont have a DEC direct instruction for now
FB17 2A 01 00               LDA LOOPCNT
FB1A 20                     DECA
FB1B 31 01 00               STA LOOPCNT
FB1E 21 00                  TEQA #0x00
FB20 2B FB 0A               JNE FIB32_LOOP
                            ; End of fibonacci number computation
                            ; Verify Fibonacci numbers stored in memory
FB23 30 82                  LDA #0x82
FB25 19                     NOTA
FB26 31 C0 00               STA LEDPORT             
                            ; Memory layout:
                            ;   FIBNUMB: F(0), F(1), F(2), ...
                            ; Registers:
                            ;   l0 = previous-previous (F(n-2))
                            ;   l1 = previous          (F(n-1))
                            ;   l2 = current from mem  (F(n))
                            ;-----------------------------------------------
FB29 04 10 00   FIB_VERIFY  LDX #FIBNUMB         ; pointer to first Fibonacci number
                            ; Load first two Fibonacci numbers from memory
FB2C 06 FC 95               JSR ?load32_l0       ; l0 = F(0)
FB2F 05                     INCX  
FB30 06 FC A9               JSR ?load32_l1       ; l1 = F(1)
FB33 05                     INCX  
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
FB34 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
FB36 31 01 00               STA LOOPCNT
FB39 06 FC BD   VERIFY_LOOP JSR ?load32_l2       ; Load next Fibonacci number from memory into l2
FB3C 05                     INCX  
FB3D 06 FE 73               JSR ?add32_l3_l1_l0  ; Compute sum l0 + l1  l3
FB40 06 FE BE               JSR ?cmp32_l3_l2     ; Compare computed sum with loaded number
FB43 2B FF B0               JNE FAIL
FB46 06 FD 80               JSR ?mov32_l0_l1     ; Rotate registers for next iteration
FB49 06 FD E4               JSR ?mov32_l1_l2
FB4C 2A 01 00               LDA LOOPCNT          ; Decrement loop counter
FB4F 2F FF                  ADDA #0xFF         ; decrement
FB51 31 01 00               STA LOOPCNT
FB54 21 00                  TEQA #0x00
FB56 2B FB 39               JNE VERIFY_LOOP
                            ; End of fibonacci number verification


                            ; ---------------------------------------
                            ; 32-bit Factorial using library routines
                            ; ---------------------------------------
                ;            LDA #0x83
                ;            NOTA
                ;            STA LEDPORT
                ; Define factorial table in memory
                ;FACTTAB     EQU 0x2000
                ;COUNT       EQU 0x00FF   ; Counter storage
                ;FACT_GEN:      LDX #FACTTAB
                ;               ; 0! = 1
                ;               LDA #1
                ;               STA ?b0
                ;               CLR ?b1
                ;               CLR ?b2
                ;               CLR ?b3
                ;               JSR ?store32_l0

                ;               LDA #1
                ;               STA COUNT          ; n = 1

                ;FACT_GEN_LOOP: LDA COUNT
                ;               JSR ?mul32_l1_l0_u8   ; l1 = l0 * n
                ;               JSR ?store32_l1
                ;               JSR ?mov32_l0_l1

                ;               INC COUNT
                ;               LDA COUNT
                ;               CMPA #13
                ;               BNE FACT_GEN_LOOP

                ;                RTS


                ;fact[n] == fact[n-1] * n

                ;FACT_VERIFY:      LDX #FACTTAB
                ;
                ;                  JSR ?load32_l0    ; 0!
                ;                  JSR ?load32_l1    ; 1!

                ;                  LDA #2
                ;                  STA COUNT

                ;FACT_VERIFY_LOOP: JSR ?load32_l2    ; fact[n]
                ;                  LDA COUNT
                ;                  JSR ?mul32_l3_l1_u8
                ;                  JSR ?cmp32_l3_l2
                ;                  JNE FAIL
                ;
                ;                  JSR ?mov32_l0_l1
                ;                  JSR ?mov32_l1_l2

                ;                  INC COUNT
                ;                  LDA COUNT
                ;                  CMPA #13
                ;                  BNE FACT_VERIFY_LOOP

                ;                  RTS

                         ; LCD TEST        
FB59 06 FF 40            JSR LCD_Init
FB5C 06 FF 5C            JSR LCD_Clear
FB5F 04 00 00            LDX #0x0000    ; set cursor to first line and print message
FB62 06 FF 68            JSR LCD_SetCursorPos
FB65 04 FB A0            LDX #MSGTXT2
FB68 06 FF 83            JSR LCD_PrintString
FB6B 04 01 00            LDX #0x0100    ; set cursor to second line and print message
FB6E 06 FF 68            JSR LCD_SetCursorPos
FB71 04 FB E9            LDX #MSGTXT4
FB74 06 FF 83            JSR LCD_PrintString
                         ; make some movement on the lcd to show diagnostic still running
                         ; use 3 LSB of diagnostic counter to move an asterisk on second line
                         ; between position 8 and 15
FB77 2A 01 E0            LDA DIAGLOOPCOUNTER
FB7A 33 07               ANDA #0x07          ; mask to 3 LSB (0..7)
FB7C 2F 08               ADDA #0x08          ; offset to position 8..15
FB7E 31 1F F4            STA XL              ; XL = column
FB81 30 01               LDA #0x01
FB83 31 1F F3            STA XH              ; XH = line 1 (second line)
FB86 06 FF 68            JSR LCD_SetCursorPos
FB89 30 2A               LDA #0x2A           ; ASCII '*'
FB8B 06 FF 7F            JSR LCD_WriteChar
                         ; End of LCD TEST

                         ; increment diagnostic counter to indicate successful completion
FB8E 2A 01 E0            LDA DIAGLOOPCOUNTER
FB91 2F 01               ADDA #0x01
FB93 31 01 E0            STA DIAGLOOPCOUNTER

FB96 32 E0 05            JMP LOOPDIAG         ; Diagnostic loop
                ; END OF MAIN PROGRAM

                         ; ---------------
                         ; Data Section
                         ; ---------------
                         ; Start of data section in EEPROM

                         ; ASCII text table for test
FB99 31 32 33 41 42 43 00                             MSGTXT1        .ASCII "123ABC"
FBA0 48 65 6C 6C 6F 20 57 6F 72 6C 64 00              MSGTXT2        .ASCII "Hello World"
FBAC 54 68 69 73 20 69 73 20 61 20 74 65 78 74 20 6D  
     65 73 73 61 67 65 20 74 6F 20 74 65 73 74 20 61  
     73 63 69 69 20 74 65 78 74 20 74 61 62 6C 65 20  
     69 6E 20 61 73 73 65 6D 62 6C 65 72 00           MSGTXT3        .ASCII "This is a text message to test ascii text table in assembler"
FBE9 4D 79 43 50 55 00                                MSGTXT4        .ASCII "MyCPU"

                         ; ---------------------
                         ; Math library routines
                         ; ---------------------
                         ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------
                                  ; Clear 32bits
FBEF 30 00      ?clear32_l0       LDA #0x00
FBF1 31 00 0F                     STA ?b0
FBF4 31 00 0E                     STA ?b1
FBF7 31 00 0D                     STA ?b2
FBFA 31 00 0C                     STA ?b3
FBFD 07                           RTS
FBFE 30 00      ?clear32_l1       LDA #0x00
FC00 31 00 0B                     STA ?b4
FC03 31 00 0A                     STA ?b5
FC06 31 00 09                     STA ?b6
FC09 31 00 08                     STA ?b7
FC0C 07                           RTS   
FC0D 30 00      ?clear32_l2       LDA #0x00
FC0F 31 00 07                     STA ?b8
FC12 31 00 06                     STA ?b9
FC15 31 00 05                     STA ?b10
FC18 31 00 04                     STA ?b11
FC1B 07                           RTS
FC1C 30 00      ?clear32_l3       LDA #0x00
FC1E 31 00 03                     STA ?b12
FC21 31 00 02                     STA ?b13
FC24 31 00 01                     STA ?b14
FC27 31 00 00                     STA ?b15
FC2A 07                           RTS
                                  ; Clear 16bits
FC2B 30 00      ?clear16_w0       LDA #0x00
FC2D 31 00 0F                     STA ?b0
FC30 31 00 0E                     STA ?b1
FC33 07                           RTS
FC34 30 00      ?clear16_w1       LDA #0x00
FC36 31 00 0D                     STA ?b2
FC39 31 00 0C                     STA ?b3
FC3C 07                           RTS
FC3D 30 00      ?clear16_w2       LDA #0x00
FC3F 31 00 0B                     STA ?b4
FC42 31 00 0A                     STA ?b5
FC45 07                           RTS
FC46 30 00      ?clear16_w3       LDA #0x00
FC48 31 00 09                     STA ?b6
FC4B 31 00 08                     STA ?b7
FC4E 07                           RTS
FC4F 30 00      ?clear16_w4       LDA #0x00
FC51 31 00 07                     STA ?b8
FC54 31 00 06                     STA ?b9     
FC57 07                           RTS
FC58 30 00      ?clear16_w5       LDA #0x00
FC5A 31 00 05                     STA ?b10
FC5D 31 00 04                     STA ?b11
FC60 07                           RTS
FC61 30 00      ?clear16_w6       LDA #0x00
FC63 31 00 03                     STA ?b12
FC66 31 00 02                     STA ?b13
FC69 07                           RTS
FC6A 30 00      ?clear16_w7       LDA #0x00
FC6C 31 00 01                     STA ?b14
FC6F 31 00 00                     STA ?b15
FC72 07                           RTS
                                  ; Set 32bits to 1
FC73 30 01      ?set32_l0_to_1    LDA #0x01
FC75 31 00 0F                     STA ?b0
FC78 30 00                        LDA #0x00
FC7A 31 00 0E                     STA ?b1
FC7D 31 00 0D                     STA ?b2
FC80 31 00 0C                     STA ?b3
FC83 07                           RTS
FC84 30 01      ?set32_l1_to_1    LDA #0x01
FC86 31 00 0B                     STA ?b4
                                  ;CLR ?b5    ; I dont have a page 0 clear instruction yet
                                  ;CLR ?b6
                                  ;CLR ?b7
FC89 30 00                        LDA #0x00
FC8B 31 00 0A                     STA ?b5
FC8E 31 00 09                     STA ?b6
FC91 31 00 08                     STA ?b7
FC94 07                           RTS                  
                                  ; Load 32bits l0 using X register as pointer
FC95 0A         ?load32_l0        LDA (X)
FC96 31 00 0C                     STA ?b3
FC99 05                           INCX
FC9A 0A                           LDA (X)
FC9B 31 00 0D                     STA ?b2
FC9E 05                           INCX
FC9F 0A                           LDA (X)
FCA0 31 00 0E                     STA ?b1
FCA3 05                           INCX
FCA4 0A                           LDA (X)
FCA5 31 00 0F                     STA ?b0
FCA8 07                           RTS
                                  ; Load 32bits l1 using X register as pointer
FCA9 0A         ?load32_l1        LDA (X)
FCAA 31 00 08                     STA ?b7
FCAD 05                           INCX
FCAE 0A                           LDA (X)
FCAF 31 00 09                     STA ?b6
FCB2 05                           INCX
FCB3 0A                           LDA (X)
FCB4 31 00 0A                     STA ?b5
FCB7 05                           INCX
FCB8 0A                           LDA (X)
FCB9 31 00 0B                     STA ?b4
FCBC 07                           RTS
                                  ; Load 32bits l2 using X register as pointer
FCBD 0A         ?load32_l2        LDA (X)
FCBE 31 00 04                     STA ?b11
FCC1 05                           INCX
FCC2 0A                           LDA (X)
FCC3 31 00 05                     STA ?b10
FCC6 05                           INCX
FCC7 0A                           LDA (X)
FCC8 31 00 06                     STA ?b9
FCCB 05                           INCX
FCCC 0A                           LDA (X)
FCCD 31 00 07                     STA ?b8
FCD0 07                           RTS
                                  ; Load 32bits l3 using X register as pointer
FCD1 0A         ?load32_l3        LDA (X)
FCD2 31 00 00                     STA ?b15
FCD5 05                           INCX
FCD6 0A                           LDA (X)
FCD7 31 00 01                     STA ?b14
FCDA 05                           INCX
FCDB 0A                           LDA (X)
FCDC 31 00 02                     STA ?b13
FCDF 05                           INCX
FCE0 0A                           LDA (X)
FCE1 31 00 03                     STA ?b12
FCE4 07                           RTS                   
                                  ; Store 32bits l0 using X register as pointer
FCE5 2A 00 0C   ?store32_l0       LDA ?b3
FCE8 0B                           STA (X)
FCE9 05                           INCX
FCEA 2A 00 0D                     LDA ?b2
FCED 0B                           STA (X)
FCEE 05                           INCX
FCEF 2A 00 0E                     LDA ?b1
FCF2 0B                           STA (X)
FCF3 05                           INCX
FCF4 2A 00 0F                     LDA ?b0
FCF7 0B                           STA (X)
FCF8 07                           RTS
                                  ; Store 32bits l1 using X register as pointer
FCF9 2A 00 08   ?store32_l1       LDA ?b7
FCFC 0B                           STA (X)
FCFD 05                           INCX
FCFE 2A 00 09                     LDA ?b6
FD01 0B                           STA (X)
FD02 05                           INCX
FD03 2A 00 0A                     LDA ?b5
FD06 0B                           STA (X)
FD07 05                           INCX
FD08 2A 00 0B                     LDA ?b4
FD0B 0B                           STA (X)
FD0C 07                           RTS
                                  ; Store 32bits l2 using X register as pointer
FD0D 2A 00 04   ?store32_l2       LDA ?b11
FD10 0B                           STA (X)
FD11 05                           INCX
FD12 2A 00 05                     LDA ?b10
FD15 0B                           STA (X)
FD16 05                           INCX
FD17 2A 00 06                     LDA ?b9
FD1A 0B                           STA (X)
FD1B 05                           INCX
FD1C 2A 00 07                     LDA ?b8
FD1F 0B                           STA (X)
FD20 07                           RTS
                                  ; Store 32bits l3 using X register as pointer
FD21 2A 00 00   ?store32_l3       LDA ?b15
FD24 0B                           STA (X)
FD25 05                           INCX
FD26 2A 00 01                     LDA ?b14
FD29 0B                           STA (X)  
FD2A 05                           INCX
FD2B 2A 00 02                     LDA ?b13
FD2E 0B                           STA (X)
FD2F 05                           INCX
FD30 2A 00 03                     LDA ?b12
FD33 0B                           STA (X)
FD34 07                           RTS
                                  ; Move 32 bits from l0 to l1
FD35 2A 00 0C   ?mov32_l1_l0      LDA ?b3
FD38 31 00 08                     STA ?b7
FD3B 2A 00 0D                     LDA ?b2
FD3E 31 00 09                     STA ?b6
FD41 2A 00 0E                     LDA ?b1
FD44 31 00 0A                     STA ?b5
FD47 2A 00 0F                     LDA ?b0
FD4A 31 00 0B                     STA ?b4
FD4D 07                           RTS
                                  ; Move 32 bits from l0 to l2
FD4E 2A 00 0C   ?mov32_l2_l0      LDA ?b3
FD51 31 00 04                     STA ?b11
FD54 2A 00 0D                     LDA ?b2
FD57 31 00 05                     STA ?b10
FD5A 2A 00 0E                     LDA ?b1
FD5D 31 00 06                     STA ?b9
FD60 2A 00 0F                     LDA ?b0
FD63 31 00 07                     STA ?b8
FD66 07                           RTS
                                  ; Move 32 bits from l0 to l3
FD67 2A 00 0C   ?mov32_l3_l0      LDA ?b3
FD6A 31 00 00                     STA ?b15
FD6D 2A 00 0D                     LDA ?b2
FD70 31 00 01                     STA ?b14
FD73 2A 00 0E                     LDA ?b1
FD76 31 00 02                     STA ?b13
FD79 2A 00 0F                     LDA ?b0
FD7C 31 00 03                     STA ?b12
FD7F 07                           RTS
                                  ; Move 32 bits from l1 to l0
FD80 2A 00 08   ?mov32_l0_l1      LDA ?b7
FD83 31 00 0C                     STA ?b3
FD86 2A 00 09                     LDA ?b6
FD89 31 00 0D                     STA ?b2
FD8C 2A 00 0A                     LDA ?b5
FD8F 31 00 0E                     STA ?b1
FD92 2A 00 0B                     LDA ?b4
FD95 31 00 0F                     STA ?b0
FD98 07                           RTS
                                  ; Move 32 bits from l1 to l2
FD99 2A 00 08   ?mov32_l2_l1      LDA ?b7
FD9C 31 00 04                     STA ?b11
FD9F 2A 00 09                     LDA ?b6
FDA2 31 00 05                     STA ?b10
FDA5 2A 00 0A                     LDA ?b5
FDA8 31 00 06                     STA ?b9
FDAB 2A 00 0B                     LDA ?b4
FDAE 31 00 07                     STA ?b8
FDB1 07                           RTS
                                  ; Move 32 bits from l1 to l3
FDB2 2A 00 08   ?mov32_l3_l1      LDA ?b7
FDB5 31 00 00                     STA ?b15
FDB8 2A 00 09                     LDA ?b6
FDBB 31 00 01                     STA ?b14
FDBE 2A 00 0A                     LDA ?b5
FDC1 31 00 02                     STA ?b13
FDC4 2A 00 0B                     LDA ?b4
FDC7 31 00 03                     STA ?b12
FDCA 07                           RTS
                                  ; Move 32 bits from l2 to l0
FDCB 2A 00 04   ?mov32_l0_l2      LDA ?b11
FDCE 31 00 0C                     STA ?b3
FDD1 2A 00 05                     LDA ?b10
FDD4 31 00 0D                     STA ?b2
FDD7 2A 00 06                     LDA ?b9
FDDA 31 00 0E                     STA ?b1
FDDD 2A 00 07                     LDA ?b8
FDE0 31 00 0F                     STA ?b0
FDE3 07                           RTS
                                  ; Move 32 bits from l2 to l1
FDE4 2A 00 04   ?mov32_l1_l2      LDA ?b11
FDE7 31 00 08                     STA ?b7
FDEA 2A 00 05                     LDA ?b10
FDED 31 00 09                     STA ?b6
FDF0 2A 00 06                     LDA ?b9
FDF3 31 00 0A                     STA ?b5
FDF6 2A 00 07                     LDA ?b8
FDF9 31 00 0B                     STA ?b4
FDFC 07                           RTS
                                  ; Move 32 bits from l2 to l3
FDFD 2A 00 04   ?mov32_l3_l2      LDA ?b11
FE00 31 00 00                     STA ?b15
FE03 2A 00 05                     LDA ?b10
FE06 31 00 01                     STA ?b14
FE09 2A 00 06                     LDA ?b9
FE0C 31 00 02                     STA ?b13
FE0F 2A 00 07                     LDA ?b8
FE12 31 00 03                     STA ?b12
FE15 07                           RTS
                                  ; Addition on 16 bits  
                                  ; w0 <= w0 + w1
FE16 2A 00 0F   ?add16_w0_w0_w1   LDA ?b0  
FE19 29 00 0D                     ADDA ?b2
FE1C 31 00 0F                     STA ?b0
FE1F 2A 00 0E                     LDA ?b1
FE22 28 00 0C                     ADCA ?b3
FE25 31 00 0E                     STA ?b1
FE28 07                           RTS
                                  ; Addition on 32 bits
                                  ; l0 <= l0 + l1
FE29 2A 00 0F   ?add32_l0_l0_l1   LDA ?b0  
FE2C 29 00 0B                     ADDA ?b4
FE2F 31 00 0F                     STA ?b0
FE32 2A 00 0E                     LDA ?b1
FE35 28 00 0A                     ADCA ?b5
FE38 31 00 0E                     STA ?b1
FE3B 2A 00 0D                     LDA ?b2
FE3E 28 00 09                     ADCA ?b6
FE41 31 00 0D                     STA ?b2
FE44 2A 00 0C                     LDA ?b3
FE47 28 00 08                     ADCA ?b7
FE4A 31 00 0C                     STA ?b3
FE4D 07                           RTS
                                  ; l2 <= l1 + l0
FE4E 2A 00 0F   ?add32_l2_l1_l0   LDA ?b0  
FE51 29 00 0B                     ADDA ?b4
FE54 31 00 07                     STA ?b8
FE57 2A 00 0E                     LDA ?b1
FE5A 28 00 0A                     ADCA ?b5
FE5D 31 00 06                     STA ?b9
FE60 2A 00 0D                     LDA ?b2
FE63 28 00 09                     ADCA ?b6
FE66 31 00 05                     STA ?b10
FE69 2A 00 0C                     LDA ?b3
FE6C 28 00 08                     ADCA ?b7
FE6F 31 00 04                     STA ?b11
FE72 07                           RTS
                                  ; l3 <= l1 + l0
FE73 2A 00 0F   ?add32_l3_l1_l0   LDA ?b0
FE76 29 00 0B                     ADDA ?b4
FE79 31 00 03                     STA ?b12
FE7C 2A 00 0E                     LDA ?b1
FE7F 28 00 0A                     ADCA ?b5
FE82 31 00 02                     STA ?b13
FE85 2A 00 0D                     LDA ?b2
FE88 28 00 09                     ADCA ?b6
FE8B 31 00 01                     STA ?b14
FE8E 2A 00 0C                     LDA ?b3
FE91 28 00 08                     ADCA ?b7
FE94 31 00 00                     STA ?b15
FE97 07                           RTS                  
                                  ; INC 32 bit
                                  ; l0 <= l0 + 1
FE98 2A 00 0F   ?inc32_l0_l0      LDA ?b0
FE9B 03                           INCA
FE9C 31 00 0F                     STA ?b0
FE9F 2B FE BD                     JNE ?inc32_0x_0x_JP
FEA2 2A 00 0E                     LDA ?b1
FEA5 03                           INCA
FEA6 31 00 0E                     STA ?b1
FEA9 2B FE BD                     JNE ?inc32_0x_0x_JP
FEAC 2A 00 0D                     LDA ?b2
FEAF 03                           INCA
FEB0 31 00 0D                     STA ?b2
FEB3 2B FE BD                     JNE ?inc32_0x_0x_JP
FEB6 2A 00 0C                     LDA ?b3
FEB9 03                           INCA
FEBA 31 00 0C                     STA ?b3
FEBD 07         ?inc32_0x_0x_JP   RTS

                                  ; Compare 32-bit registers
                                  ; Result: sets E flag if equal, clears if different
FEBE 2A 00 07   ?cmp32_l3_l2      LDA ?b8
FEC1 1F 00 03                     CMPA ?b12      ; This instruction not available yet
FEC4 2B FE E3                     JNE ?cmp32_not_equal
FEC7 2A 00 06                     LDA ?b9
FECA 1F 00 02                     CMPA ?b13
FECD 2B FE E3                     JNE ?cmp32_not_equal
FED0 2A 00 05                     LDA ?b10
FED3 1F 00 01                     CMPA ?b14
FED6 2B FE E3                     JNE ?cmp32_not_equal
FED9 2A 00 04                     LDA ?b11
FEDC 1F 00 00                     CMPA ?b15
FEDF 2B FE E3                     JNE ?cmp32_not_equal
                                  ; All bytes equal, E flag already set from last comparison
FEE2 07                           RTS
FEE3 30 00      ?cmp32_not_equal  LDA #0x00   ; Clear E flag    I dont have a direct way to clear E flag
FEE5 31 00 0F                     STA ?b0
FEE8 07                           RTS

                                  ; MUL 8-bit
                                  ; w1 (b3,b2) <= b1 * b0
FEE9 30 00      ?mul8_w1_b1_b0    LDA #0x00   ; Only clear ?b3
FEEB 31 00 0C                     STA ?b3
FEEE 04 00 08                     LDX #0x0008 ; Loop counter (8 bits)
FEF1 15 00 0F   ?mul8_w1_b1_loop  SRL ?b0     ; Shift right ?b0 (check LSB)
FEF4 0F 09                        JRNC ?mul8_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FEF6 2A 00 0C                     LDA ?b3
FEF9 29 00 0E                     ADDA ?b1    ; Add multiplicand
FEFC 31 00 0C                     STA ?b3     ; Store back
FEFF 14 00 0C   ?mul8_skip_add    RRC ?b3     ; Shift right ?b3 ?b2   C -> 7 6 5 4 3 2 1 0 -> C
FF02 14 00 0D                     RRC ?b2     ;                       C -> 7 6 5 4 3 2 1 0 -> C
FF05 13                           DECXL       ; Decrement loop counter
FF06 2B FE F1                     JNE ?mul8_w1_b1_loop
FF09 07                           RTS

                                  ; MUL 16-bit
                                  ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
FF0A 30 00      ?mul16_l1_w1_w0   LDA #0x00   ; Only clear ?b7 and ?b6
FF0C 31 00 08                     STA ?b7
FF0F 31 00 09                     STA ?b6
FF12 04 00 10                     LDX #0x0010 ; Loop counter (16 bits)
FF15 15 00 0E   ?mul16_l1_w1_loop SRL ?b1     ; Shift right ?w0 (check LSB)  '0' -> 7 6 5 4 3 2 1 0 -> C
FF18 14 00 0F                     RRC ?b0     ; C  -> 7 6 5 4 3 2 1 0 -> C
FF1B 0F 12                        JRNC ?mul16_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FF1D 2A 00 09                     LDA ?b6
FF20 29 00 0D                     ADDA ?b2    ; Add multiplicand
FF23 31 00 09                     STA ?b6     ; Store back
FF26 2A 00 08                     LDA ?b7
FF29 28 00 0C                     ADCA ?b3
FF2C 31 00 08                     STA ?b7
FF2F 14 00 08   ?mul16_skip_add   RRC ?b7     ; Shift right ?b7 ?b6 ?b5 ?b4   C -> 7 6 5 4 3 2 1 0 -> C 
FF32 14 00 09                     RRC ?b6     ;                               C -> 7 6 5 4 3 2 1 0 -> C
FF35 14 00 0A                     RRC ?b5
FF38 14 00 0B                     RRC ?b4
FF3B 13                           DECXL       ; Decrement loop counter
FF3C 2B FF 15                     JNE ?mul16_l1_w1_loop
FF3F 07                           RTS


                                  ; MUL 32-bit by 8-bit unsigned
                                  ; l1 = l0 * A   (A = 8-bit multiplier, A <= 12)
                                  ; l0 = (b3,b2,b1,b0)
                                  ; result -> l1 = (b7..b4)
                ;?mul32_l1_l0_u8   ; ---- multiply LOW word ----
                ;                  STA TMPN          ; save multiplier

                ;                  LDA ?b0
                ;                  STA ?b0           ; w0 low
                ;                  LDA ?b1
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2           ; w1 = n
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = LO16 * n

                                  ; save low result
                ;                  LDA ?b4
                ;                  STA RES0
                ;                  LDA ?b5
                ;                  STA RES1

                                  ; ---- multiply HIGH word ----
                ;                  LDA ?b2           ; restore high word of l0
                ;                  STA ?b0
                ;                  LDA ?b3
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = HI16 * n

                                  ; ---- accumulate ----
                ;                  LDA ?b4
                ;                  ADDA RES1
                ;                  STA ?b5
                ;                  LDA ?b5
                ;                  ADCA #0
                ;                  STA ?b6
                ;                  LDA ?b6
                ;                  ADCA #0
                ;                  STA ?b7

                ;                  LDA RES0
                ;                  STA ?b4

                ;                  RTS


                ;--------------------------------------------
                ; LCD Main Initialization Routine
                ;--------------------------------------------
FF40 30 FF      LCD_Init    LDA #0xFF         ; Wait >40ms (simple busy loop)
FF42 20         Delay40ms   DECA
FF43 2B FF 42               JNE Delay40ms

                            ; Function set: 8-bit, 2 line, 5x8 font
                            ; <5> 1
                            ; <4> DL = 1  0: 4-bit inteface, 1:8-bit interface
                            ; <3> N = 1   0: 1 Line, 1: 2 Lines
                            ; <2> F = 0   0: FONT_5x8, 1: FONT_5x10
                            ; <1> -  -
                            ; <0> -  -
FF46 30 38                  LDA #0x38
FF48 31 7C 00               STA LCD_CMD

                            ; Wait >4.1ms
FF4B 30 F0                  LDA #0xF0
FF4D 20         Delay4ms    DECA
FF4E 2B FF 4D               JNE Delay4ms

                            ; Display ON/OFF Control
                            ; Display ON, cursor OFF, blink OFF
                            ; <3> 1
                            ; <2> D = 1  Display ON/OFF Control 0:OFF, 1:ON
                            ; <1> C = 0  Cursor displayed 0:OFF, 1:ON
                            ; <0> B = 0  Blinking of cursor position character 0:OFF, 1:ON
FF51 30 0C                  LDA #0x0C
FF53 31 7C 00               STA LCD_CMD

                            ; Entry mode set
                            ; Entry mode: left-to-right, no shift
                            ; <2> 1
                            ; <1> I/D = 1  Increment/Decrement of DDRAM address 1: Increment, 0: Decrement
                            ; <0> S = 0    
FF56 30 06                  LDA #0x06
FF58 31 7C 00               STA LCD_CMD
FF5B 07                     RTS

                ;--------------------------------------------
                ; Clear display
                ;--------------------------------------------
FF5C 30 01      LCD_Clear   LDA #0x01      ; Clear display command; <0> = 1
FF5E 31 7C 00               STA LCD_CMD
FF61 30 FF                  LDA #0xFF      ; Wait >1.5ms (for clear command)
FF63 20         DelayClear  DECA
FF64 2B FF 63               JNE DelayClear
FF67 07                     RTS

                ;--------------------------------------------
                ; Set LCD Cursor Position
                ; Input:
                ;   XH = line (0 or 1)
                ;   XL = column (0..15)
                ;--------------------------------------------
FF68 2A 1F F3   LCD_SetCursorPos  LDA XH      
FF6B 21 00                        TEQA #0x00
FF6D 2C FF 74                     JEQ LCD_Row0
FF70 30 40                        LDA #0x40         ; Row 1, DDRAM base address line 1
FF72 0C 02                        JRA LCD_AddCol
FF74 30 00      LCD_Row0          LDA #0x00         ; DDRAM base address line 0
FF76 29 1F F4   LCD_AddCol        ADDA XL           ; A = base + column
FF79 17 80                        ORA #0x80         ; Set DDRAM address command
FF7B 31 7C 00                     STA LCD_CMD
FF7E 07                           RTS     

                ;--------------------------------------------
                ; Write a single character
                ; Input: A = ASCII code
                ;--------------------------------------------
FF7F 31 7C 01   LCD_WriteChar  STA LCD_DATA
FF82 07                        RTS

                ;--------------------------------------------
                ; Print null-terminated string
                ; Input:
                ;   X = address of string
                ;--------------------------------------------
FF83 0A         LCD_PrintString   LDA (X)        ; A = *X
FF84 21 00                        TEQA #0x00     ; end of string?
FF86 2C FF 8F                     JEQ LCD_PrDone
FF89 06 FF 7F                     JSR LCD_WriteChar
FF8C 05                           INCX           ; X++
FF8D 0C F4                        JRA LCD_PrintString
FF8F 07         LCD_PrDone        RTS

                         ; --------------------------------------------------------------------
                         ; Error routine
                         ; --------------------------------------------------------------------
                         ORG/0xFFB0  ; Diagnostic Error routine   
                         ;STOP        ; Stop execution
FFB0 32 FF B0   FAIL     JMP FAIL    ; Infinite Loop on error

                         ; --------------------------------------------------------------------
                         ; JSR and RTS Test subroutine
                         ; --------------------------------------------------------------------
                         ORG/0xFFC0
FFC0 30 11      TJSR1    LDA #0x11
FFC2 07                  RTS
                         ORG/0xFFC3
FFC3 30 22      TJSR2    LDA #0x22
FFC5 06 FF C0            JSR TJSR1
FFC8 07                  RTS
                         ORG/0xFFC9
FFC9 30 33      TJSR3    LDA #0x33
FFCB 06 FF C3            JSR TJSR2
FFCE 07                  RTS
                         ORG/0xFFCF
FFCF 30 44      TJSR4    LDA #0x44
FFD1 06 FF C9            JSR TJSR3
FFD4 07                  RTS
                         ORG/0xFFD5
FFD5 30 44      TJSR5    LDA #0x44
FFD7 06 FF CF            JSR TJSR4
FFDA 07                  RTS
                         ORG/0xFFDB
FFDB 30 55      TJSR6    LDA #0x55
FFDD 06 FF D5            JSR TJSR5
FFE0 07                  RTS
                         ORG/0xFFE1
FFE1 30 66      TJSR7    LDA #0x66
FFE3 06 FF DB            JSR TJSR6
FFE6 07                  RTS
                         ORG/0xFFE7
FFE7 30 77      TJSR8    LDA #0x77
FFE9 06 FF E1            JSR TJSR7
FFEC 07                  RTS
                         ORG/0xFFED
FFED 30 88      TJSR9    LDA #0x88
FFEF 06 FF E7            JSR TJSR8
FFF2 07                  RTS
                         ORG/0xFFF3
FFF3 30 99      TJSR10   LDA #0x99
FFF5 06 FF ED            JSR TJSR9
FFF8 07                  RTS
                         ; --------------------------------------------------------------------
                         ; Reset Vector
                         ; --------------------------------------------------------------------
                         ORG/0xFFFE  ; Set the Reset vector
FFFE E0                  DB 0xE0     ; MSB Reset Vector
FFFF 00                  DB 0x00     ; LSB Reset Vector


Symbol Table:
?b15                0000
?b14                0001
?b13                0002
?b12                0003
?b11                0004
?b10                0005
?b9                 0006
?b8                 0007
?b7                 0008
?b6                 0009
?b5                 000A
?b4                 000B
?b3                 000C
?b2                 000D
?b1                 000E
?b0                 000F
?w7                 0000
?w6                 0002
?w5                 0004
?w4                 0006
?w3                 0008
?w2                 000A
?w1                 000C
?w0                 000E
?l3                 0000
?l2                 0004
?l1                 0008
?l0                 000C
TEMP0               1FEC
TEMP1               1FED
TEMP2               1FEE
TEMP3               1FEF
SP                  1FF0
JSH                 1FF1
JSL                 1FF2
XH                  1FF3
XL                  1FF4
EQUAL               1FFA
CARRY               1FFB
REG_A               1FFC
IPH                 1FFE
IPL                 1FFF
DIAGLOOPCOUNTER     01E0
LCD_CMD             7C00
LCD_DATA            7C01
LEDPORT             C000
START               E000
LOOPDIAG            E005
TST01               E00B
TST02               E038
TSTOP03             E065
TSTOP04             E0FC
TSTOP05             E14E
TSTOP06             E1C6
TSTOP09             E1EA
TSTOP0A             E1F3
TSTOP0B             E231
TST0B_0             E28D
TST0B_1             E290
TST0B_2             E294
TST0B_3             E299
TST0B_4             E2A0
TST0B_5             E2B2
TST0B_6             E2B7
TST0B_7             E2CD
TST0B_8             E2D4
TST0B_9             E2D6
TST0B_10            E2D8
TST0B_11            E2ED
TST0B_12            E36A
TST0B_13            E36D
TSTOP0D             E36E
TSTOP0E             E428
TSTOP0F             E4E2
TST0F_0             E4F2
TST0F_1             E4FC
TST0F_2             E4FF
TSTOP10             E500
TSTOP11             E583
TSTOP12             E5A8
TSTOP13             E5CD
TSTOP14             E663
TSTOP15             E73F
TSTOP16             E889
TSTOP17             E8E7
TSTOP18             E92C
TSTOP19             E95F
TSTOP1A             E987
TSTOP1B             EA0E
TSTOP1C             EAA0
TSTOP1D             EC25
TSTOP1E             EDE3
TSTOP1F             EE2B
TSTOP20             EF20
TSTOP21             EFF5
TSTOP22             F0A7
TSTOP23             F19F
TSTOP23A            F1AE
TSTOP23B            F1CD
TSTOP23X            F1D7
TSTOP23Z            F1DA
TSTOP29             F1DB
TSTOP2A             F20F
TSTOP2B             F2DA
TST2C               F2F5
TST2C_1             F31A
TST2C_2             F324
TST2C_3             F32E
TST2C_4             F338
TST2C_5             F342
TST2C_6             F34C
TST2C_7             F356
TST2C_8             F360
TST2C_9             F36A
TST2C_10            F374
TSTOP2D             F375
TSTOP2E             F3B7
TSTOP2F             F415
TSTOP30             F45F
TSTOP31             F4B9
TSTOP33             F582
TSTFB1              F5BE
LOOPTST             F748
LOOPTST1            F753
LOOPTST2            F762
BLKCODESTART        FAA8
BLKCODEEND          FAC6
RAMDESTSTART        1000
LOOPTST47           FAD2
ENDCOPYTST47        FAE8
LOOPCNT             0100
FIBNUMB             1000
FIB32_LOOP          FB0A
FIB_VERIFY          FB29
VERIFY_LOOP         FB39
MSGTXT1             FB99
MSGTXT2             FBA0
MSGTXT3             FBAC
MSGTXT4             FBE9
?clear32_l0         FBEF
?clear32_l1         FBFE
?clear32_l2         FC0D
?clear32_l3         FC1C
?clear16_w0         FC2B
?clear16_w1         FC34
?clear16_w2         FC3D
?clear16_w3         FC46
?clear16_w4         FC4F
?clear16_w5         FC58
?clear16_w6         FC61
?clear16_w7         FC6A
?set32_l0_to_1      FC73
?set32_l1_to_1      FC84
?load32_l0          FC95
?load32_l1          FCA9
?load32_l2          FCBD
?load32_l3          FCD1
?store32_l0         FCE5
?store32_l1         FCF9
?store32_l2         FD0D
?store32_l3         FD21
?mov32_l1_l0        FD35
?mov32_l2_l0        FD4E
?mov32_l3_l0        FD67
?mov32_l0_l1        FD80
?mov32_l2_l1        FD99
?mov32_l3_l1        FDB2
?mov32_l0_l2        FDCB
?mov32_l1_l2        FDE4
?mov32_l3_l2        FDFD
?add16_w0_w0_w1     FE16
?add32_l0_l0_l1     FE29
?add32_l2_l1_l0     FE4E
?add32_l3_l1_l0     FE73
?inc32_l0_l0        FE98
?inc32_0x_0x_JP     FEBD
?cmp32_l3_l2        FEBE
?cmp32_not_equal    FEE3
?mul8_w1_b1_b0      FEE9
?mul8_w1_b1_loop    FEF1
?mul8_skip_add      FEFF
?mul16_l1_w1_w0     FF0A
?mul16_l1_w1_loop   FF15
?mul16_skip_add     FF2F
LCD_Init            FF40
Delay40ms           FF42
Delay4ms            FF4D
LCD_Clear           FF5C
DelayClear          FF63
LCD_SetCursorPos    FF68
LCD_Row0            FF74
LCD_AddCol          FF76
LCD_WriteChar       FF7F
LCD_PrintString     FF83
LCD_PrDone          FF8F
FAIL                FFB0
TJSR1               FFC0
TJSR2               FFC3
TJSR3               FFC9
TJSR4               FFCF
TJSR5               FFD5
TJSR6               FFDB
TJSR7               FFE1
TJSR8               FFE7
TJSR9               FFED
TJSR10              FFF3
Assembly complete
