                ; -----------------------------------------------------------------
                ; Homebrew MyCPU diagnostic program
                ; Author: Sylvain Fortin sylfortin71@hotmail.com
                ; Date : 1 february 2026
                ; Documentation : diag.asm is a test program that verifying every 
                ;                 assembler instructions of MyCPU.
                ; Memory map of the computer
                ; 0000H - 17FFH Total RAM space
                ; 00A0H - 00FFH Stack
                ; E000H - F000H EEPROM for application program
                ; -----------------------------------------------------------------

                ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------

                ?b15     EQU 0x0000
                ?b14     EQU 0x0001
                ?b13     EQU 0x0002
                ?b12     EQU 0x0003
                ?b11     EQU 0x0004
                ?b10     EQU 0x0005
                ?b9      EQU 0x0006
                ?b8      EQU 0x0007
                ?b7      EQU 0x0008
                ?b6      EQU 0x0009
                ?b5      EQU 0x000A
                ?b4      EQU 0x000B
                ?b3      EQU 0x000C
                ?b2      EQU 0x000D
                ?b1      EQU 0x000E
                ?b0      EQU 0x000F

                ?w7      EQU 0x0000  ; ?b15:?b14
                ?w6      EQU 0x0002  ; ?b13:?b12
                ?w5      EQU 0x0004  ; ?b11:?b10
                ?w4      EQU 0x0006  ; ?b9:?b8
                ?w3      EQU 0x0008  ; ?b7:?b6
                ?w2      EQU 0x000A  ; ?b5:?b4
                ?w1      EQU 0x000C  ; ?b3:?b2
                ?w0      EQU 0x000E  ; ?b1:?b0

                ?l3      EQU 0x0000  ; ?b15,?b14,?b13,?b12
                ?l2      EQU 0x0004  ; ?b11,?b10,?b9,?b8
                ?l1      EQU 0x0008  ; ?b7,?b6,?b5,?b4
                ?l0      EQU 0x000C  ; ?b3,?b2,?b1,?b0

                ; RAM Reserved location
                TEMP0    EQU 0x1FEC  ; TEMP0
                TEMP1    EQU 0x1FED  ; TEMP1
                TEMP2    EQU 0x1FEE  ; TEMP2
                TEMP3    EQU 0x1FEF  ; TEMP3
                SP       EQU 0x1FF0  ; SP      Stack Pointer 8 bit
                JSH      EQU 0x1FF1  ; JSH     Temporary storage for JSR MSB address
                JSL      EQU 0x1FF2  ; JSL          "       "     "   "  LSB    "
                XH       EQU 0x1FF3  ; X MSB   X Register MSB
                XL       EQU 0x1FF4  ; X LSB   X Register LSB
                EQUAL    EQU 0x1FFA  ; E       bit<0> Equal Status bit
                CARRY    EQU 0x1FFB  ; C       bit<0> Carry Status bit
                REG_A    EQU 0x1FFC  ; A       A Register
                IPH      EQU 0x1FFE  ; IPH	    Instruction Pointer MSB
                IPL      EQU 0x1FFF  ; IPL          "         "    LSB

                ; Diagnostic program variable
                DIAGLOOPCOUNTER EQU 0x01E0  ; Loop counter for diagnostics

                ;--------------------------------------------
                ; LCD Memory-Mapped I/O Addresses
                ;--------------------------------------------
                LCD_CMD  EQU 0x7C00
                LCD_DATA EQU 0x7C01
                ;--------------------------------------------
                ; LED PORT
                ;--------------------------------------------
                LEDPORT  EQU 0xC000  ; PORT for the LED

                ; Diagnostic program start
                         ORG/0xE000  ; EEPROM Start of the diagnostic program     
E000 30 00      START    LDA #0x00   ; Initialize diagnostic loop counter
E002 31 01 E0            STA DIAGLOOPCOUNTER
E005 30 00      LOOPDIAG LDA #0x00   ; Clear LED
E007 19                  NOTA
E008 31 C0 00            STA LEDPORT ; Output to LED port         
                         ; --------------------------------------------------------------------
                         ; Test Carry Status bit integrity
                         ; --------------------------------------------------------------------
E00B 30 01      TST01    LDA #0x01
E00D 19                  NOTA
E00E 31 C0 00            STA LEDPORT ; Output to LED port
E011 30 00               LDA #0x00
E013 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E016 2A 1F FB            LDA CARRY   ; Read Carry Status
E019 21 00               TEQA #0x00
E01B 2B FF B0            JNE FAIL
E01E 30 01               LDA #0x01
E020 31 1F FB            STA CARRY   ; Write 1 to carry bit <0>
E023 2A 1F FB            LDA CARRY   ; Read Carry Status
E026 21 01               TEQA #0x01
E028 2B FF B0            JNE FAIL
E02B 30 00               LDA #0x00
E02D 31 1F FB            STA CARRY   ; Write 0 to carry bit <0>
E030 2A 1F FB            LDA CARRY   ; Read Carry Status
E033 21 00               TEQA #0x00
E035 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; Test Equal Status bit integrity
                         ; --------------------------------------------------------------------
E038 30 02      TST02    LDA #0x02
E03A 19                  NOTA
E03B 31 C0 00            STA LEDPORT ; Output to LED port
E03E 30 00               LDA #0x00
E040 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E043 2A 1F FA            LDA EQUAL   ; Read Equal Status
E046 21 00               TEQA #0x00
E048 2B FF B0            JNE FAIL
E04B 30 01               LDA #0x01
E04D 31 1F FA            STA EQUAL   ; Write 1 to Equal Status bit <0>
E050 2A 1F FA            LDA EQUAL   ; Read Equal Status
E053 21 01               TEQA #0x01
E055 2B FF B0            JNE FAIL
E058 30 00               LDA #0x00
E05A 31 1F FA            STA EQUAL   ; Write 0 to Equal Status bit <0>
E05D 2A 1F FA            LDA EQUAL   ; Read Equal Status
E060 21 00               TEQA #0x00
E062 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.03 INCA  A = A + 1  INCREMENT REGISTRE A
                         ; E UPDATE, C unchanged
                         ; --------------------------------------------------------------------
E065 30 03      TSTOP03  LDA #0x03
E067 19                  NOTA
E068 31 C0 00            STA LEDPORT ; Output to LED port
E06B 30 00               LDA #0x00
E06D 03                  INCA
E06E 21 01               TEQA #0x01
E070 2B FF B0            JNE FAIL
E073 30 01               LDA #0x01
E075 03                  INCA
E076 21 02               TEQA #0x02
E078 2B FF B0            JNE FAIL
E07B 30 7C               LDA #0x7C
E07D 03                  INCA
E07E 03                  INCA
E07F 03                  INCA
E080 03                  INCA
E081 03                  INCA
E082 03                  INCA
E083 03                  INCA
E084 03                  INCA
E085 03                  INCA
E086 03                  INCA
E087 21 86               TEQA #0x86
E089 2B FF B0            JNE FAIL
E08C 30 FE               LDA #0xFE
E08E 03                  INCA
E08F 21 FF               TEQA #0xFF
E091 2B FF B0            JNE FAIL
E094 30 FF               LDA #0xFF
E096 03                  INCA
E097 21 00               TEQA #0x00
E099 2B FF B0            JNE FAIL
E09C 30 FF               LDA #0xFF
E09E 03                  INCA
E09F 03                  INCA
E0A0 21 01               TEQA #0x01
E0A2 2B FF B0            JNE FAIL
E0A5 03                  INCA
E0A6 03                  INCA
E0A7 03                  INCA
E0A8 03                  INCA
E0A9 21 05               TEQA #0x05
E0AB 2B FF B0            JNE FAIL
E0AE 03                  INCA
E0AF 03                  INCA
E0B0 03                  INCA
E0B1 03                  INCA
E0B2 03                  INCA
E0B3 03                  INCA
E0B4 03                  INCA
E0B5 03                  INCA
E0B6 21 0D               TEQA #0x0D
E0B8 2B FF B0            JNE FAIL
E0BB 30 00               LDA #0x00   ; Test Carry unchanged
E0BD 31 1F FB            STA CARRY   ; Clear Carry 
E0C0 30 FF               LDA #0xFF
E0C2 03                  INCA
E0C3 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0C6 21 00               TEQA #0x00  ; Expecting C=0 and <7:1> = 0
E0C8 2B FF B0            JNE FAIL
E0CB 30 01               LDA #0x01   ; Set Carry 
E0CD 31 1F FB            STA CARRY   
E0D0 30 EB               LDA #0xEB
E0D2 03                  INCA
E0D3 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
E0D6 21 01               TEQA #0x01  ; Expecting C=1 and <7:1> = 0
E0D8 2B FF B0            JNE FAIL
E0DB 30 FE               LDA #0xFE   ; Test Equal (Set when result is 0)
E0DD 03                  INCA
E0DE 2A 1F FA            LDA EQUAL   ; Read Equal status
E0E1 21 00               TEQA #0x00  ; Expecting E=0 and <7:1> = 0
E0E3 2B FF B0            JNE FAIL
E0E6 30 FF               LDA #0xFF
E0E8 03                  INCA
E0E9 2A 1F FA            LDA EQUAL   ; Read Equal status
E0EC 21 01               TEQA #0x01  ; Expecting E=1 and <7:1> = 0
E0EE 2B FF B0            JNE FAIL
E0F1 30 00               LDA #0x00
E0F3 03                  INCA
E0F4 2A 1F FA            LDA EQUAL
E0F7 21 00               TEQA #0x00  ; Expecting E=0 and <7:1> = 0
E0F9 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.04  LDX #0x****   Load X Register with 16 bits immediate value
                         ; --------------------------------------------------------------------
E0FC 30 04      TSTOP04  LDA #0x04
E0FE 19                  NOTA
E0FF 31 C0 00            STA LEDPORT ; Output to LED port
E102 04 12 34            LDX #0x1234
E105 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E108 21 12               TEQA #0x12
E10A 2B FF B0            JNE FAIL
E10D 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E110 21 34               TEQA #0x34
E112 2B FF B0            JNE FAIL
E115 04 AB CD            LDX #0xABCD
E118 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E11B 21 AB               TEQA #0xAB
E11D 2B FF B0            JNE FAIL
E120 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E123 21 CD               TEQA #0xCD
E125 2B FF B0            JNE FAIL
                         ; Test using symbolic
E128 04 00 0F            LDX #?b0    ; ?b0      EQU 0x000F
E12B 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E12E 21 00               TEQA #0x00
E130 2B FF B0            JNE FAIL
E133 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E136 21 0F               TEQA #0x0F
E138 2B FF B0            JNE FAIL
E13B 04 1F F0            LDX #SP     ; SP       EQU 0x1FF0
E13E 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E141 21 1F               TEQA #0x1F
E143 2B FF B0            JNE FAIL
E146 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E149 21 F0               TEQA #0xF0
E14B 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.05  INCX   Increment Register X,  Carry Not Updated
                         ; --------------------------------------------------------------------
E14E 30 05      TSTOP05  LDA #0x05
E150 19                  NOTA
E151 31 C0 00            STA LEDPORT ; Output to LED port
E154 04 00 00            LDX #0x0000 ; Clear X register
E157 05                  INCX        ; Increment X
E158 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E15B 21 01               TEQA #0x01
E15D 2B FF B0            JNE FAIL
E160 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E163 21 00               TEQA #0x00
E165 2B FF B0            JNE FAIL
E168 05                  INCX
E169 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E16C 21 02               TEQA #0x02
E16E 2B FF B0            JNE FAIL
E171 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E174 21 00               TEQA #0x00
E176 2B FF B0            JNE FAIL

E179 04 00 FF            LDX #0x00FF ; Test a carry set
E17C 05                  INCX        ; Increment X
E17D 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E180 21 00               TEQA #0x00
E182 2B FF B0            JNE FAIL
E185 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E188 21 01               TEQA #0x01
E18A 2B FF B0            JNE FAIL
E18D 05                  INCX        ; Increment X
E18E 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E191 21 01               TEQA #0x01
E193 2B FF B0            JNE FAIL
E196 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E199 21 01               TEQA #0x01
E19B 2B FF B0            JNE FAIL

E19E 04 1E FF            LDX #0x1EFF
E1A1 05                  INCX        ; Increment X
E1A2 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1A5 21 00               TEQA #0x00
E1A7 2B FF B0            JNE FAIL
E1AA 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1AD 21 1F               TEQA #0x1F
E1AF 2B FF B0            JNE FAIL

E1B2 04 FF FF            LDX #0xFFFF
E1B5 05                  INCX        ; Increment X
E1B6 2A 1F F4            LDA XL      ; Read Reg X LSB into A
E1B9 21 00               TEQA #0x00
E1BB 2B FF B0            JNE FAIL
E1BE 2A 1F F3            LDA XH      ; Read Reg X MSB into A
E1C1 21 00               TEQA #0x00
E1C3 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; OP.06 JSR    Jump to SubRoutine
                         ; --------------------------------------------------------------------
E1C6 30 06      TSTOP06  LDA #0x06
E1C8 19                  NOTA
E1C9 31 C0 00            STA LEDPORT ; Output to LED port
E1CC 06 FF C0            JSR TJSR1   ; 1 layer
E1CF 06 FF C3            JSR TJSR2   ; 2
E1D2 06 FF C9            JSR TJSR3   ; 3
E1D5 06 FF CF            JSR TJSR4   ; 4
E1D8 06 FF D5            JSR TJSR5   ; 5
E1DB 06 FF DB            JSR TJSR6   ; 6
E1DE 06 FF E1            JSR TJSR7   ; 7
E1E1 06 FF E7            JSR TJSR8   ; 8
E1E4 06 FF ED            JSR TJSR9   ; 9
E1E7 06 FF F3            JSR TJSR10  ; 10
                         ; --------------------------------------------------------------------
                         ; OP.07 RTS    ReTurn from Subroutine
                         ; Tested in OP.06 JSR
                         ; --------------------------------------------------------------------
                         ;LDA #07H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.08 STOP
                         ; STOP EXECUTING
                         ; Cannot test here it will stop execution...
                         ; A diagnostic test failure is expected to call this instruction ending 
                         ; program exectution.
                         ; --------------------------------------------------------------------
                         ;LDA #08H
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port
                         ;STOP
                         ; --------------------------------------------------------------------
                         ; OP.09 NOP   NO OPERATION
                         ; --------------------------------------------------------------------
E1EA 30 09      TSTOP09  LDA #0x09
E1EC 19                  NOTA
E1ED 31 C0 00            STA LEDPORT ; Output to LED port
E1F0 09                  NOP
E1F1 09                  NOP
E1F2 09                  NOP
                         ; --------------------------------------------------------------------
                         ; OP.0A LDA (X) Load Reg A Indexed
                         ; --------------------------------------------------------------------
E1F3 30 0A      TSTOP0A  LDA #0x0A
E1F5 19                  NOTA
E1F6 31 C0 00            STA LEDPORT ; Output to LED port
E1F9 30 55               LDA #0x55   ; Store some value in RAM
E1FB 31 01 00            STA 0x0100
E1FE 30 AA               LDA #0xAA
E200 31 01 01            STA 0x0101
E203 30 DE               LDA #0xDE
E205 31 01 F0            STA 0x01F0
E208 30 CA               LDA #0xCA
E20A 31 01 FF            STA 0x01FF
E20D 04 01 00            LDX #0x0100 ; Verify each locations
E210 0A                  LDA (X)
E211 21 55               TEQA #0x55
E213 2B FF B0            JNE FAIL    ; Jump if result not good
E216 04 01 01            LDX #0x0101
E219 0A                  LDA (X)
E21A 21 AA               TEQA #0xAA
E21C 2B FF B0            JNE FAIL
E21F 04 01 F0            LDX #0x01F0
E222 0A                  LDA (X)
E223 21 DE               TEQA #0xDE
E225 2B FF B0            JNE FAIL
E228 04 01 FF            LDX #0x01FF
E22B 0A                  LDA (X)
E22C 21 CA               TEQA #0xCA
E22E 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.0B STA (X) Store Reg A Indexed
                         ; --------------------------------------------------------------------
E231 30 0B      TSTOP0B  LDA #0x0B
E233 19                  NOTA
E234 31 C0 00            STA LEDPORT ; Output to LED port
                         ; --------------------------------------------------------------------
                         ; OP.0C JRA 0x** Unconditional relative jump
                         ; --------------------------------------------------------------------
                         ; Testing using hexadecimal value after the mnemonic
E237 30 0C               LDA #0x0C
E239 19                  NOTA
E23A 31 C0 00            STA LEDPORT ; Output to LED port
E23D 0C 00               JRA 0x00    ; Test jump foward, Execute next instruction
E23F 0C 01               JRA 0x01    ; Skip next instruction
E241 09                  NOP         ; 1
E242 0C 02               JRA 0x02    ; Skip next 2 instructions
E244 09                  NOP         ; 1
E245 09                  NOP         ; 2
E246 0C 03               JRA 0x03    ; Skip next 3 instructions
E248 09                  NOP         ; 1 
E249 09                  NOP         ; 2
E24A 09                  NOP         ; 3
E24B 0C 05               JRA 0x05    ; Skip next 5 instructions
E24D 09                  NOP         ; 1
E24E 09                  NOP         ; 2
E24F 09                  NOP         ; 3
E250 09                  NOP         ; 4
E251 09                  NOP         ; 5
E252 0C 10               JRA 0x10    ; Skip next 16 instructions
E254 09                  NOP         ; 1
E255 09                  NOP         ; 2
E256 09                  NOP         ; 3
E257 09                  NOP         ; 4
E258 09                  NOP         ; 5
E259 09                  NOP         ; 6
E25A 09                  NOP         ; 7
E25B 09                  NOP         ; 8
E25C 09                  NOP         ; 9
E25D 09                  NOP         ; 10
E25E 09                  NOP         ; 11
E25F 09                  NOP         ; 12
E260 09                  NOP         ; 13
E261 09                  NOP         ; 14
E262 09                  NOP         ; 15
E263 09                  NOP         ; 16
E264 0C 22               JRA 0x22    ; Skip next 34 bytes
E266 09                  NOP         ; 1
E267 09                  NOP         ; 2
E268 09                  NOP         ; 3
E269 0C 1F               JRA 0x1F   ; 4-5   Final jump to the end of thest
E26B 09                  NOP         ; 6
E26C 09                  NOP         ; 7
E26D 09                  NOP         ; 8
E26E 09                  NOP         ; 9
E26F 09                  NOP         ; 10
E270 09                  NOP         ; 11
E271 09                  NOP         ; 12
E272 09                  NOP         ; 13
E273 09                  NOP         ; 14
E274 09                  NOP         ; 15
E275 09                  NOP         ; 16
E276 09                  NOP         ; 17
E277 09                  NOP         ; 18
E278 09                  NOP         ; 19
E279 09                  NOP         ; 20
E27A 09                  NOP         ; 21
E27B 09                  NOP         ; 22
E27C 09                  NOP         ; 23
E27D 09                  NOP         ; 24
E27E 09                  NOP         ; 25
E27F 0C E8               JRA 0xE8    ; 26-27 Third Backward jump
E281 09                  NOP         ; 28
E282 09                  NOP         ; 29
E283 09                  NOP         ; 30
E284 09                  NOP         ; 31
E285 09                  NOP         ; 32
E286 0C F7               JRA 0xF7    ; 33-34 Second Backward jump
E288 0C FC               JRA 0xFC    ; First Backward jump
E28A 09                  NOP         ; Arrival of the last jump to end the test
                         ; Testing using symbolic address after the mnemonic
E28B 0C 00               JRA TST0B_0 ; Test jump foward, Execute next instruction
E28D 0C 01      TST0B_0  JRA TST0B_1 ; Skip next instruction
E28F 09                  NOP         ; 1
E290 0C 02      TST0B_1  JRA TST0B_2 ; Skip next 2 instructions
E292 09                  NOP         ; 1
E293 09                  NOP         ; 2
E294 0C 03      TST0B_2  JRA TST0B_3 ; Skip next 3 instructions
E296 09                  NOP         ; 1 
E297 09                  NOP         ; 2
E298 09                  NOP         ; 3
E299 0C 05      TST0B_3  JRA TST0B_4 ; Skip next 5 instructions
E29B 09                  NOP         ; 1
E29C 09                  NOP         ; 2
E29D 09                  NOP         ; 3
E29E 09                  NOP         ; 4
E29F 09                  NOP         ; 5
E2A0 0C 10      TST0B_4  JRA TST0B_5 ; Skip next 16 instructions
E2A2 09                  NOP         ; 1
E2A3 09                  NOP         ; 2
E2A4 09                  NOP         ; 3
E2A5 09                  NOP         ; 4
E2A6 09                  NOP         ; 5
E2A7 09                  NOP         ; 6
E2A8 09                  NOP         ; 7
E2A9 09                  NOP         ; 8
E2AA 09                  NOP         ; 9
E2AB 09                  NOP         ; 10
E2AC 09                  NOP         ; 11
E2AD 09                  NOP         ; 12
E2AE 09                  NOP         ; 13
E2AF 09                  NOP         ; 14
E2B0 09                  NOP         ; 15
E2B1 09                  NOP         ; 16
E2B2 0C 22      TST0B_5  JRA TST0B_9 ; Skip next 34 bytes
E2B4 09                  NOP         ; 1
E2B5 09                  NOP         ; 2
E2B6 09                  NOP         ; 3
E2B7 0C 1F      TST0B_6  JRA TST0B_10 ; 4-5   Final jump to the end of test
E2B9 09                  NOP         ; 6
E2BA 09                  NOP         ; 7
E2BB 09                  NOP         ; 8
E2BC 09                  NOP         ; 9
E2BD 09                  NOP         ; 10
E2BE 09                  NOP         ; 11
E2BF 09                  NOP         ; 12
E2C0 09                  NOP         ; 13
E2C1 09                  NOP         ; 14
E2C2 09                  NOP         ; 15
E2C3 09                  NOP         ; 16
E2C4 09                  NOP         ; 17
E2C5 09                  NOP         ; 18
E2C6 09                  NOP         ; 19
E2C7 09                  NOP         ; 20
E2C8 09                  NOP         ; 21
E2C9 09                  NOP         ; 22
E2CA 09                  NOP         ; 23
E2CB 09                  NOP         ; 24
E2CC 09                  NOP         ; 25
E2CD 0C E8      TST0B_7  JRA TST0B_6 ; 26-27 Third Backward jump
E2CF 09                  NOP         ; 28
E2D0 09                  NOP         ; 29
E2D1 09                  NOP         ; 30
E2D2 09                  NOP         ; 31
E2D3 09                  NOP         ; 32
E2D4 0C F7      TST0B_8  JRA TST0B_7 ; 33-34 Second Backward jump
E2D6 0C FC      TST0B_9  JRA TST0B_8 ; First Backward jump
E2D8 09         TST0B_10 NOP         ; Arrival of the last jump to end the test
                ;         ; Higher range testing using symbolic address after the mnemonic
E2D9 09                  NOP         ; These NOP make relative jump to exercise carry on MSB address boundary
E2DA 09                  NOP
E2DB 09                  NOP
E2DC 09                  NOP
E2DD 09                  NOP
E2DE 09                  NOP
E2DF 09                  NOP
E2E0 09                  NOP
E2E1 09                  NOP
E2E2 09                  NOP
E2E3 09                  NOP
E2E4 09                  NOP
E2E5 09                  NOP
E2E6 09                  NOP
E2E7 09                  NOP
E2E8 09                  NOP
E2E9 0C 7F               JRA TST0B_12
E2EB 09                  NOP         ; 1     1     
E2EC 09                  NOP
                ;         NOP
                ;         NOP
E2ED 0C 7E      TST0B_11 JRA TST0B_13
E2EF 09                  NOP
E2F0 09                  NOP
E2F1 09                  NOP
E2F2 09                  NOP
E2F3 09                  NOP
E2F4 09                  NOP         
E2F5 09                  NOP
E2F6 09                  NOP
E2F7 09                  NOP
E2F8 09                  NOP
E2F9 09                  NOP
E2FA 09                  NOP         ; 16
E2FB 09                  NOP         ; 1     2   
E2FC 09                  NOP
E2FD 09                  NOP
E2FE 09                  NOP
E2FF 09                  NOP
E300 09                  NOP
E301 09                  NOP
E302 09                  NOP
E303 09                  NOP
E304 09                  NOP         
E305 09                  NOP
E306 09                  NOP
E307 09                  NOP
E308 09                  NOP
E309 09                  NOP
E30A 09                  NOP         ; 16
E30B 09                  NOP         ; 1   3
E30C 09                  NOP
E30D 09                  NOP
E30E 09                  NOP
E30F 09                  NOP
E310 09                  NOP
E311 09                  NOP
E312 09                  NOP
E313 09                  NOP
E314 09                  NOP         
E315 09                  NOP
E316 09                  NOP
E317 09                  NOP
E318 09                  NOP
E319 09                  NOP
E31A 09                  NOP         ; 16
E31B 09                  NOP         ; 1   4
E31C 09                  NOP
E31D 09                  NOP
E31E 09                  NOP
E31F 09                  NOP
E320 09                  NOP
E321 09                  NOP
E322 09                  NOP
E323 09                  NOP
E324 09                  NOP         
E325 09                  NOP
E326 09                  NOP
E327 09                  NOP
E328 09                  NOP
E329 09                  NOP
E32A 09                  NOP         ; 16
E32B 09                  NOP         ; 1   5
E32C 09                  NOP
E32D 09                  NOP
E32E 09                  NOP
E32F 09                  NOP
E330 09                  NOP
E331 09                  NOP
E332 09                  NOP
E333 09                  NOP
E334 09                  NOP         
E335 09                  NOP
E336 09                  NOP
E337 09                  NOP
E338 09                  NOP
E339 09                  NOP
E33A 09                  NOP         ; 16
E33B 09                  NOP         ; 1   5
E33C 09                  NOP
E33D 09                  NOP
E33E 09                  NOP
E33F 09                  NOP
E340 09                  NOP
E341 09                  NOP
E342 09                  NOP
E343 09                  NOP
E344 09                  NOP         
E345 09                  NOP
E346 09                  NOP
E347 09                  NOP
E348 09                  NOP
E349 09                  NOP
E34A 09                  NOP         ; 16
E34B 09                  NOP         ; 1   6
E34C 09                  NOP
E34D 09                  NOP
E34E 09                  NOP
E34F 09                  NOP
E350 09                  NOP
E351 09                  NOP
E352 09                  NOP
E353 09                  NOP
E354 09                  NOP         
E355 09                  NOP
E356 09                  NOP
E357 09                  NOP
E358 09                  NOP
E359 09                  NOP
E35A 09                  NOP         ; 16
E35B 09                  NOP         ; 1   7
E35C 09                  NOP
E35D 09                  NOP
E35E 09                  NOP
E35F 09                  NOP
E360 09                  NOP
E361 09                  NOP
E362 09                  NOP
E363 09                  NOP
E364 09                  NOP         
E365 09                  NOP
E366 09                  NOP
E367 09                  NOP
E368 09                  NOP
E369 09                  NOP
                ;         NOP        ; 16
E36A 09         TST0B_12 NOP
E36B 0C 80               JRA TST0B_11
E36D 09         TST0B_13 NOP         ; final foward jump destination     
                         ; --------------------------------------------------------------------
                         ; OP.0D SRLA Shift Right Logical on Reg A
                         ;            0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E36E 30 0D      TSTOP0D  LDA #0x0D
E370 19                  NOTA
E371 31 C0 00            STA LEDPORT ; Output to LED port
E374 30 A5               LDA #0xA5
E376 0D                  SRLA
E377 21 52               TEQA #0x52
E379 2B FF B0            JNE FAIL    ; Jump if result not good
E37C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E37F 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E381 2B FF B0            JNE FAIL    ; Error if different
E384 30 A5               LDA #0xA5
E386 0D                  SRLA
E387 0D                  SRLA
E388 21 29               TEQA #0x29
E38A 2B FF B0            JNE FAIL    ; Jump if result not good
E38D 2A 1F FB            LDA CARRY   ; Read the Carry Status
E390 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E392 2B FF B0            JNE FAIL    ; Error if different
E395 30 A5               LDA #0xA5
E397 0D                  SRLA
E398 0D                  SRLA
E399 0D                  SRLA
E39A 21 14               TEQA #0x14
E39C 2B FF B0            JNE FAIL    ; Jump if result not good
E39F 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3A2 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E3A4 2B FF B0            JNE FAIL    ; Error if different
E3A7 30 A5               LDA #0xA5
E3A9 0D                  SRLA
E3AA 0D                  SRLA
E3AB 0D                  SRLA
E3AC 0D                  SRLA
E3AD 21 0A               TEQA #0x0A
E3AF 2B FF B0            JNE FAIL    ; Jump if result not good
E3B2 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3B5 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3B7 2B FF B0            JNE FAIL    ; Error if different
E3BA 30 A5               LDA #0xA5
E3BC 0D                  SRLA
E3BD 0D                  SRLA
E3BE 0D                  SRLA
E3BF 0D                  SRLA
E3C0 0D                  SRLA
E3C1 21 05               TEQA #0x05
E3C3 2B FF B0            JNE FAIL    ; Jump if result not good
E3C6 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3C9 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3CB 2B FF B0            JNE FAIL    ; Error if different
E3CE 30 A5               LDA #0xA5
E3D0 0D                  SRLA
E3D1 0D                  SRLA
E3D2 0D                  SRLA
E3D3 0D                  SRLA
E3D4 0D                  SRLA
E3D5 0D                  SRLA
E3D6 21 02               TEQA #0x02
E3D8 2B FF B0            JNE FAIL    ; Jump if result not good
E3DB 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3DE 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E3E0 2B FF B0            JNE FAIL    ; Error if different
E3E3 30 A5               LDA #0xA5
E3E5 0D                  SRLA
E3E6 0D                  SRLA
E3E7 0D                  SRLA
E3E8 0D                  SRLA
E3E9 0D                  SRLA
E3EA 0D                  SRLA
E3EB 0D                  SRLA
E3EC 21 01               TEQA #0x01
E3EE 2B FF B0            JNE FAIL    ; Jump if result not good
E3F1 2A 1F FB            LDA CARRY   ; Read the Carry Status
E3F4 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E3F6 2B FF B0            JNE FAIL    ; Error if different
E3F9 30 A5               LDA #0xA5
E3FB 0D                  SRLA
E3FC 0D                  SRLA
E3FD 0D                  SRLA
E3FE 0D                  SRLA
E3FF 0D                  SRLA
E400 0D                  SRLA
E401 0D                  SRLA
E402 0D                  SRLA
E403 21 00               TEQA #0x00
E405 2B FF B0            JNE FAIL    ; Jump if result not good
E408 2A 1F FB            LDA CARRY   ; Read the Carry Status
E40B 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E40D 2B FF B0            JNE FAIL    ; Error if different
E410 30 A5               LDA #0xA5
E412 0D                  SRLA
E413 0D                  SRLA
E414 0D                  SRLA
E415 0D                  SRLA
E416 0D                  SRLA
E417 0D                  SRLA
E418 0D                  SRLA
E419 0D                  SRLA
E41A 0D                  SRLA
E41B 21 00               TEQA #0x00
E41D 2B FF B0            JNE FAIL    ; Jump if result not good
E420 2A 1F FB            LDA CARRY   ; Read the Carry Status
E423 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E425 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0E SLLA Shift Left Logical on Reg A
                         ;       SLAA Shift Left Arithmetic on Reg A (SLAA same as SLLA)
                         ;            C <- b7 b6 b5 b4 b3 b2 b1 b0 <- 0
                         ; --------------------------------------------------------------------
E428 30 0E      TSTOP0E  LDA #0x0E
E42A 19                  NOTA
E42B 31 C0 00            STA LEDPORT ; Output to LED port
E42E 30 A5               LDA #0xA5
E430 0E                  SLLA
E431 21 4A               TEQA #0x4A
E433 2B FF B0            JNE FAIL    ; Jump if result not good
E436 2A 1F FB            LDA CARRY   ; Read the Carry Status
E439 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E43B 2B FF B0            JNE FAIL    ; Error if different
E43E 30 A5               LDA #0xA5
E440 0E                  SLLA
E441 0E                  SLLA
E442 21 94               TEQA #0x94
E444 2B FF B0            JNE FAIL    ; Jump if result not good
E447 2A 1F FB            LDA CARRY   ; Read the Carry Status
E44A 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E44C 2B FF B0            JNE FAIL    ; Error if different
E44F 30 A5               LDA #0xA5
E451 0E                  SLLA
E452 0E                  SLLA
E453 0E                  SLLA
E454 21 28               TEQA #0x28
E456 2B FF B0            JNE FAIL    ; Jump if result not good
E459 2A 1F FB            LDA CARRY   ; Read the Carry Status
E45C 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E45E 2B FF B0            JNE FAIL    ; Error if different
E461 30 A5               LDA #0xA5
E463 0E                  SLLA
E464 0E                  SLLA
E465 0E                  SLLA
E466 0E                  SLLA
E467 21 50               TEQA #0x50
E469 2B FF B0            JNE FAIL    ; Jump if result not good
E46C 2A 1F FB            LDA CARRY   ; Read the Carry Status
E46F 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E471 2B FF B0            JNE FAIL    ; Error if different
E474 30 A5               LDA #0xA5
E476 0E                  SLLA
E477 0E                  SLLA
E478 0E                  SLLA
E479 0E                  SLLA
E47A 0E                  SLLA
E47B 21 A0               TEQA #0xA0
E47D 2B FF B0            JNE FAIL    ; Jump if result not good
E480 2A 1F FB            LDA CARRY   ; Read the Carry Status
E483 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E485 2B FF B0            JNE FAIL    ; Error if different
E488 30 A5               LDA #0xA5
E48A 0E                  SLLA
E48B 0E                  SLLA
E48C 0E                  SLLA
E48D 0E                  SLLA
E48E 0E                  SLLA
E48F 0E                  SLAA
E490 21 40               TEQA #0x40
E492 2B FF B0            JNE FAIL    ; Jump if result not good
E495 2A 1F FB            LDA CARRY   ; Read the Carry Status
E498 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E49A 2B FF B0            JNE FAIL    ; Error if different
E49D 30 A5               LDA #0xA5
E49F 0E                  SLLA
E4A0 0E                  SLLA
E4A1 0E                  SLLA
E4A2 0E                  SLLA
E4A3 0E                  SLLA
E4A4 0E                  SLAA
E4A5 0E                  SLAA
E4A6 21 80               TEQA #0x80
E4A8 2B FF B0            JNE FAIL    ; Jump if result not good
E4AB 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4AE 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4B0 2B FF B0            JNE FAIL    ; Error if different
E4B3 30 A5               LDA #0xA5
E4B5 0E                  SLLA
E4B6 0E                  SLLA
E4B7 0E                  SLLA
E4B8 0E                  SLLA
E4B9 0E                  SLLA
E4BA 0E                  SLAA
E4BB 0E                  SLAA
E4BC 0E                  SLAA
E4BD 21 00               TEQA #0x00
E4BF 2B FF B0            JNE FAIL    ; Jump if result not good
E4C2 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4C5 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E4C7 2B FF B0            JNE FAIL    ; Error if different
E4CA 30 A5               LDA #0xA5
E4CC 0E                  SLLA
E4CD 0E                  SLLA
E4CE 0E                  SLLA
E4CF 0E                  SLLA
E4D0 0E                  SLLA
E4D1 0E                  SLAA
E4D2 0E                  SLAA
E4D3 0E                  SLAA
E4D4 0E                  SLAA
E4D5 21 00               TEQA #0x00
E4D7 2B FF B0            JNE FAIL    ; Jump if result not good
E4DA 2A 1F FB            LDA CARRY   ; Read the Carry Status
E4DD 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E4DF 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.0F 
                         ; JRNC Jump Relatif if Not Carry
                         ; --------------------------------------------------------------------
E4E2 30 0F      TSTOP0F  LDA #0x0F
E4E4 19                  NOTA
E4E5 31 C0 00            STA LEDPORT ; Output to LED port
E4E8 30 00               LDA #0x00   ; Clear carry
E4EA 31 1F FB            STA CARRY
E4ED 0F 03               JRNC TST0F_0
E4EF 32 FF B0            JMP FAIL
E4F2 30 01      TST0F_0  LDA #0x01   ; Set carry
E4F4 31 1F FB            STA CARRY
E4F7 0F 03               JRNC TST0F_1
E4F9 32 E4 FF            JMP TST0F_2
E4FC 32 FF B0   TST0F_1  JMP FAIL
E4FF 09         TST0F_2  NOP
                         ; --------------------------------------------------------------------
                         ; OP.10  RRCA   Rotate Right Logical Reg A through Carry 
                         ;               C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E500 30 10      TSTOP10  LDA #0x10
E502 19                  NOTA
E503 31 C0 00            STA LEDPORT ; Output to LED port
E506 30 00               LDA #0x00   ; Clear Carry
E508 31 1F FB            STA CARRY
E50B 10                  RRCA
E50C 21 00               TEQA #0x00
E50E 2B FF B0            JNE FAIL
E511 30 00               LDA #0x00   ; Clear Carry
E513 31 1F FB            STA CARRY
E516 10                  RRCA
E517 2A 1F FB            LDA CARRY
E51A 21 00               TEQA #0x00
E51C 2B FF B0            JNE FAIL
E51F 30 AA               LDA #0xAA   ; Test shifting
E521 10                  RRCA
E522 21 55               TEQA #0x55
E524 2B FF B0            JNE FAIL
E527 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E529 10                  RRCA
E52A 2A 1F FB            LDA CARRY
E52D 21 01               TEQA #0x01
E52F 2B FF B0            JNE FAIL
E532 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E534 31 1F FB            STA CARRY   ; insure carry is clear
E537 30 01               LDA #0x01   ; set bit <0> to '1'
E539 10                  RRCA
E53A 21 00               TEQA #0x00
E53C 2B FF B0            JNE FAIL
E53F 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E541 31 1F FB            STA CARRY   ; insure carry is clear
E544 30 01               LDA #0x01
E546 10                  RRCA
E547 10                  RRCA
E548 21 80               TEQA #0x80
E54A 2B FF B0            JNE FAIL
E54D 10                  RRCA        ; continue rotating this bit
E54E 21 40               TEQA #0x40
E550 2B FF B0            JNE FAIL
E553 10                  RRCA
E554 21 20               TEQA #0x20
E556 2B FF B0            JNE FAIL
E559 10                  RRCA
E55A 21 10               TEQA #0x10
E55C 2B FF B0            JNE FAIL
E55F 10                  RRCA
E560 21 08               TEQA #0x08
E562 2B FF B0            JNE FAIL
E565 10                  RRCA
E566 21 04               TEQA #0x04
E568 2B FF B0            JNE FAIL
E56B 10                  RRCA
E56C 21 02               TEQA #0x02
E56E 2B FF B0            JNE FAIL
E571 10                  RRCA
E572 21 01               TEQA #0x01
E574 2B FF B0            JNE FAIL
E577 10                  RRCA
E578 21 00               TEQA #0x00
E57A 2B FF B0            JNE FAIL
E57D 10                  RRCA
E57E 21 80               TEQA #0x80
E580 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.11  RCF   Reset Carry Flag   C <- 0
                         ; --------------------------------------------------------------------
E583 30 11      TSTOP11  LDA #0x11
E585 19                  NOTA
E586 31 C0 00            STA LEDPORT ; Output to LED port
E589 30 01               LDA #0x01   ; Set carry flag to 1
E58B 31 1F FB            STA CARRY
E58E 11                  RCF         ; Reset Carry Flag 
E58F 2A 1F FB            LDA CARRY   ; Check carry is now cleared
E592 21 00               TEQA #0x00
E594 2B FF B0            JNE FAIL
E597 11                  RCF         ; Do again a Reset Carry Flag 
E598 2A 1F FB            LDA CARRY   ; Check carry is still cleared
E59B 21 00               TEQA #0x00
E59D 2B FF B0            JNE FAIL
E5A0 30 A5               LDA #0xA5   ; Check register A is not affected by a Reset Carry Flag
E5A2 11                  RCF         ; Reset Carry Flag
E5A3 21 A5               TEQA #0xA5  ; If A value not same then fail
E5A5 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.12  SCF   Set Carry Flag   C <- 1
                         ; --------------------------------------------------------------------
E5A8 30 12      TSTOP12  LDA #0x12
E5AA 19                  NOTA
E5AB 31 C0 00            STA LEDPORT ; Output to LED port
E5AE 30 00               LDA #0x00   ; Clear carry flag
E5B0 31 1F FB            STA CARRY
E5B3 12                  SCF         ; Set Carry Flag 
E5B4 2A 1F FB            LDA CARRY   ; Check carry is set
E5B7 21 01               TEQA #0x01
E5B9 2B FF B0            JNE FAIL
E5BC 12                  SCF         ; Set Carry Flag again
E5BD 2A 1F FB            LDA CARRY   ; Check carry is still set
E5C0 21 01               TEQA #0x01
E5C2 2B FF B0            JNE FAIL
E5C5 30 BE               LDA #0xBE   ; Check register A is not affected by a Set Carry Flag
E5C7 12                  SCF         ; Set Carry Flag
E5C8 21 BE               TEQA #0xBE  ; If A value not same then fail
E5CA 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.13  DECXL   Decrement XL   E updated
                         ; --------------------------------------------------------------------
E5CD 30 13      TSTOP13  LDA #0x13
E5CF 19                  NOTA
E5D0 31 C0 00            STA LEDPORT ; Output to LED port
E5D3 04 FF FF            LDX #0xFFFF
E5D6 13                  DECXL
E5D7 2A 1F F3            LDA XH
E5DA 21 FF               TEQA #0xFF
E5DC 2B FF B0            JNE FAIL
E5DF 2A 1F F4            LDA XL
E5E2 21 FE               TEQA #0xFE
E5E4 2B FF B0            JNE FAIL
E5E7 13                  DECXL
E5E8 2A 1F F3            LDA XH
E5EB 21 FF               TEQA #0xFF
E5ED 2B FF B0            JNE FAIL
E5F0 2A 1F F4            LDA XL
E5F3 21 FD               TEQA #0xFD
E5F5 2B FF B0            JNE FAIL
E5F8 04 A5 02            LDX #0xA502
E5FB 13                  DECXL
E5FC 2A 1F F3            LDA XH
E5FF 21 A5               TEQA #0xA5
E601 2B FF B0            JNE FAIL
E604 2A 1F F4            LDA XL
E607 21 01               TEQA #0x01
E609 2B FF B0            JNE FAIL
E60C 13                  DECXL
E60D 2A 1F F3            LDA XH
E610 21 A5               TEQA #0xA5
E612 2B FF B0            JNE FAIL
E615 2A 1F F4            LDA XL
E618 21 00               TEQA #0x00
E61A 2B FF B0            JNE FAIL
E61D 13                  DECXL
E61E 2A 1F F3            LDA XH
E621 21 A5               TEQA #0xA5
E623 2B FF B0            JNE FAIL
E626 2A 1F F4            LDA XL
E629 21 FF               TEQA #0xFF
E62B 2B FF B0            JNE FAIL
E62E 13                  DECXL 
E62F 2A 1F F3            LDA XH
E632 21 A5               TEQA #0xA5
E634 2B FF B0            JNE FAIL
E637 2A 1F F4            LDA XL
E63A 21 FE               TEQA #0xFE
E63C 2B FF B0            JNE FAIL
E63F 04 00 02            LDX #0x0002 ; Check E status
E642 13                  DECXL
E643 2A 1F FA            LDA EQUAL
E646 21 00               TEQA #0x00
E648 2B FF B0            JNE FAIL
E64B 04 00 01            LDX #0x0001
E64E 13                  DECXL
E64F 2A 1F FA            LDA EQUAL
E652 21 01               TEQA #0x01
E654 2B FF B0            JNE FAIL
E657 04 FF FF            LDX #0xFFFF
E65A 13                  DECXL
E65B 2A 1F FA            LDA EQUAL
E65E 21 00               TEQA #0x00
E660 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.14  RRC 0x****   Rotate Right Logical Address location through Carry 
                         ;                     C -> b7 b6 b5 b4 b3 b2 b1 b0 -> C  
                         ; --------------------------------------------------------------------
E663 30 14      TSTOP14  LDA #0x14
E665 19                  NOTA
E666 31 C0 00            STA LEDPORT ; Output to LED port
E669 30 00               LDA #0x00   ; Clear Carry
E66B 31 1F FB            STA CARRY
E66E 31 00 0F            STA ?b0
E671 14 00 0F            RRC ?b0
E674 2A 00 0F            LDA ?b0
E677 21 00               TEQA #0x00
E679 2B FF B0            JNE FAIL
E67C 30 00               LDA #0x00   ; Clear Carry
E67E 31 1F FB            STA CARRY
E681 31 00 0F            STA ?b0
E684 14 00 0F            RRC ?b0
E687 2A 1F FB            LDA CARRY
E68A 21 00               TEQA #0x00
E68C 2B FF B0            JNE FAIL
E68F 30 AA               LDA #0xAA   ; Test shifting
E691 31 00 0F            STA ?b0
E694 14 00 0F            RRC ?b0
E697 2A 00 0F            LDA ?b0
E69A 21 55               TEQA #0x55
E69C 2B FF B0            JNE FAIL
E69F 30 01               LDA #0x01   ; Test transfer of bit <0> to carry
E6A1 31 00 0F            STA ?b0
E6A4 14 00 0F            RRC ?b0
E6A7 2A 1F FB            LDA CARRY
E6AA 21 01               TEQA #0x01
E6AC 2B FF B0            JNE FAIL
E6AF 30 00               LDA #0x00   ; Test A become 0 after shifting when carry is 0
E6B1 31 1F FB            STA CARRY   ; insure carry is clear
E6B4 30 01               LDA #0x01   ; set bit <0> to '1'
E6B6 31 00 0F            STA ?b0
E6B9 14 00 0F            RRC ?b0
E6BC 2A 00 0F            LDA ?b0
E6BF 21 00               TEQA #0x00
E6C1 2B FF B0            JNE FAIL
E6C4 30 00               LDA #0x00   ; Test bit <0> goes to bit <7> after 2 RRCA
E6C6 31 1F FB            STA CARRY   ; insure carry is clear
E6C9 30 01               LDA #0x01
E6CB 31 00 0F            STA ?b0
E6CE 14 00 0F            RRC ?b0
E6D1 14 00 0F            RRC ?b0
E6D4 2A 00 0F            LDA ?b0
E6D7 21 80               TEQA #0x80
E6D9 2B FF B0            JNE FAIL
E6DC 14 00 0F            RRC ?b0     ; continue rotating this bit
E6DF 2A 00 0F            LDA ?b0
E6E2 21 40               TEQA #0x40
E6E4 2B FF B0            JNE FAIL
E6E7 14 00 0F            RRC ?b0
E6EA 2A 00 0F            LDA ?b0
E6ED 21 20               TEQA #0x20
E6EF 2B FF B0            JNE FAIL
E6F2 14 00 0F            RRC ?b0
E6F5 2A 00 0F            LDA ?b0
E6F8 21 10               TEQA #0x10
E6FA 2B FF B0            JNE FAIL
E6FD 14 00 0F            RRC ?b0
E700 2A 00 0F            LDA ?b0
E703 21 08               TEQA #0x08
E705 2B FF B0            JNE FAIL
E708 14 00 0F            RRC ?b0
E70B 2A 00 0F            LDA ?b0
E70E 21 04               TEQA #0x04
E710 2B FF B0            JNE FAIL
E713 14 00 0F            RRC ?b0
E716 2A 00 0F            LDA ?b0
E719 21 02               TEQA #0x02
E71B 2B FF B0            JNE FAIL
E71E 14 00 0F            RRC ?b0
E721 2A 00 0F            LDA ?b0
E724 21 01               TEQA #0x01
E726 2B FF B0            JNE FAIL
E729 14 00 0F            RRC ?b0
E72C 2A 00 0F            LDA ?b0
E72F 21 00               TEQA #0x00
E731 2B FF B0            JNE FAIL
E734 14 00 0F            RRC ?b0
E737 2A 00 0F            LDA ?b0
E73A 21 80               TEQA #0x80
E73C 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.15 SRL 0x****   Shift Right Logical on Address
                         ;                    0 -> b7 b6 b5 b4 b3 b2 b1 b0 -> C
                         ; --------------------------------------------------------------------
E73F 30 15      TSTOP15  LDA #0x15
E741 19                  NOTA
E742 31 C0 00            STA LEDPORT ; Output to LED port
E745 30 A5               LDA #0xA5
E747 31 00 0F            STA ?b0
E74A 15 00 0F            SRL ?b0
E74D 2A 00 0F            LDA ?b0
E750 21 52               TEQA #0x52
E752 2B FF B0            JNE FAIL    ; Jump if result not good
E755 2A 1F FB            LDA CARRY   ; Read the Carry Status
E758 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E75A 2B FF B0            JNE FAIL    ; Error if different
E75D 30 A5               LDA #0xA5
E75F 31 00 0F            STA ?b0
E762 15 00 0F            SRL ?b0
E765 15 00 0F            SRL ?b0
E768 2A 00 0F            LDA ?b0
E76B 21 29               TEQA #0x29
E76D 2B FF B0            JNE FAIL    ; Jump if result not good
E770 2A 1F FB            LDA CARRY   ; Read the Carry Status
E773 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E775 2B FF B0            JNE FAIL    ; Error if different
E778 30 A5               LDA #0xA5
E77A 31 00 0F            STA ?b0
E77D 15 00 0F            SRL ?b0
E780 15 00 0F            SRL ?b0
E783 15 00 0F            SRL ?b0
E786 2A 00 0F            LDA ?b0
E789 21 14               TEQA #0x14
E78B 2B FF B0            JNE FAIL    ; Jump if result not good
E78E 2A 1F FB            LDA CARRY   ; Read the Carry Status
E791 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E793 2B FF B0            JNE FAIL    ; Error if different
E796 30 A5               LDA #0xA5
E798 31 00 0F            STA ?b0
E79B 15 00 0F            SRL ?b0
E79E 15 00 0F            SRL ?b0
E7A1 15 00 0F            SRL ?b0
E7A4 15 00 0F            SRL ?b0
E7A7 2A 00 0F            LDA ?b0
E7AA 21 0A               TEQA #0x0A
E7AC 2B FF B0            JNE FAIL    ; Jump if result not good
E7AF 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7B2 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7B4 2B FF B0            JNE FAIL    ; Error if different
E7B7 30 A5               LDA #0xA5
E7B9 31 00 0F            STA ?b0
E7BC 15 00 0F            SRL ?b0
E7BF 15 00 0F            SRL ?b0
E7C2 15 00 0F            SRL ?b0
E7C5 15 00 0F            SRL ?b0
E7C8 15 00 0F            SRL ?b0
E7CB 2A 00 0F            LDA ?b0
E7CE 21 05               TEQA #0x05
E7D0 2B FF B0            JNE FAIL    ; Jump if result not good
E7D3 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7D6 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E7D8 2B FF B0            JNE FAIL    ; Error if different
E7DB 30 A5               LDA #0xA5
E7DD 31 00 0F            STA ?b0
E7E0 15 00 0F            SRL ?b0
E7E3 15 00 0F            SRL ?b0
E7E6 15 00 0F            SRL ?b0
E7E9 15 00 0F            SRL ?b0
E7EC 15 00 0F            SRL ?b0
E7EF 15 00 0F            SRL ?b0
E7F2 2A 00 0F            LDA ?b0
E7F5 21 02               TEQA #0x02
E7F7 2B FF B0            JNE FAIL    ; Jump if result not good
E7FA 2A 1F FB            LDA CARRY   ; Read the Carry Status
E7FD 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E7FF 2B FF B0            JNE FAIL    ; Error if different
E802 30 A5               LDA #0xA5
E804 31 00 0F            STA ?b0
E807 15 00 0F            SRL ?b0
E80A 15 00 0F            SRL ?b0
E80D 15 00 0F            SRL ?b0
E810 15 00 0F            SRL ?b0
E813 15 00 0F            SRL ?b0
E816 15 00 0F            SRL ?b0
E819 15 00 0F            SRL ?b0
E81C 2A 00 0F            LDA ?b0
E81F 21 01               TEQA #0x01
E821 2B FF B0            JNE FAIL    ; Jump if result not good
E824 2A 1F FB            LDA CARRY   ; Read the Carry Status
E827 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E829 2B FF B0            JNE FAIL    ; Error if different
E82C 30 A5               LDA #0xA5
E82E 31 00 0F            STA ?b0
E831 15 00 0F            SRL ?b0
E834 15 00 0F            SRL ?b0
E837 15 00 0F            SRL ?b0
E83A 15 00 0F            SRL ?b0
E83D 15 00 0F            SRL ?b0
E840 15 00 0F            SRL ?b0
E843 15 00 0F            SRL ?b0
E846 15 00 0F            SRL ?b0
E849 2A 00 0F            LDA ?b0
E84C 21 00               TEQA #0x00
E84E 2B FF B0            JNE FAIL    ; Jump if result not good
E851 2A 1F FB            LDA CARRY   ; Read the Carry Status
E854 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
E856 2B FF B0            JNE FAIL    ; Error if different
E859 30 A5               LDA #0xA5
E85B 31 00 0F            STA ?b0
E85E 15 00 0F            SRL ?b0
E861 15 00 0F            SRL ?b0
E864 15 00 0F            SRL ?b0
E867 15 00 0F            SRL ?b0
E86A 15 00 0F            SRL ?b0
E86D 15 00 0F            SRL ?b0
E870 15 00 0F            SRL ?b0
E873 15 00 0F            SRL ?b0
E876 15 00 0F            SRL ?b0
E879 2A 00 0F            LDA ?b0
E87C 21 00               TEQA #0x00
E87E 2B FF B0            JNE FAIL    ; Jump if result not good
E881 2A 1F FB            LDA CARRY   ; Read the Carry Status
E884 21 00               TEQA #0x00  ; The Carry Status bit is expected to be '0' with <7:1> set to '0'
E886 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.16 STX 0x****   STORE X REGISTER TO ADDRESS
                         ; --------------------------------------------------------------------
E889 30 16      TSTOP16  LDA #0x16
E88B 19                  NOTA
E88C 31 C0 00            STA LEDPORT ; Output to LED port
E88F 04 12 34            LDX #0x1234 ; Test a STX using immediate Hex address value
E892 16 00 00            STX 0x0000  
E895 2A 00 00            LDA 0x0000
E898 21 12               TEQA #0x12
E89A 2B FF B0            JNE FAIL
E89D 2A 00 01            LDA 0x0001
E8A0 21 34               TEQA #0x34
E8A2 2B FF B0            JNE FAIL
E8A5 04 CA FE            LDX #0xCAFE ; Test a STX at address boundary requiring a carry to MSB
E8A8 16 10 FF            STX 0x10FF  
E8AB 2A 10 FF            LDA 0x10FF
E8AE 21 CA               TEQA #0xCA
E8B0 2B FF B0            JNE FAIL
E8B3 2A 11 00            LDA 0x1100
E8B6 21 FE               TEQA #0xFE
E8B8 2B FF B0            JNE FAIL
E8BB 04 BE EF            LDX #0xBEEF ; Test a STX on another boundary
E8BE 16 12 FF            STX 0x12FF  
E8C1 2A 12 FF            LDA 0x12FF
E8C4 21 BE               TEQA #0xBE
E8C6 2B FF B0            JNE FAIL
E8C9 2A 13 00            LDA 0x1300
E8CC 21 EF               TEQA #0xEF
E8CE 2B FF B0            JNE FAIL
E8D1 04 67 89            LDX #0x6789 ; Test a STX using symbolic address
E8D4 16 00 0E            STX ?b1
E8D7 2A 00 0E            LDA ?b1
E8DA 21 67               TEQA #0x67
E8DC 2B FF B0            JNE FAIL
E8DF 2A 00 0F            LDA ?b0
E8E2 21 89               TEQA #0x89
E8E4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.17 ORA #0x**   LOGICAL OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E8E7 30 17      TSTOP17  LDA #0x17
E8E9 19                  NOTA
E8EA 31 C0 00            STA LEDPORT ; Output to LED port
E8ED 30 FF               LDA #0xFF
E8EF 17 FF               ORA #0xFF
E8F1 2D FF               CMPA #0xFF
E8F3 2B FF B0            JNE FAIL
E8F6 30 00               LDA #0x00
E8F8 17 00               ORA #0x00
E8FA 2D 00               CMPA #0x00
E8FC 2B FF B0            JNE FAIL
E8FF 30 25               LDA #0x25
E901 17 D3               ORA #0xD3
E903 2D F7               CMPA #0xF7
E905 2B FF B0            JNE FAIL
E908 30 00               LDA #0x00
E90A 17 FF               ORA #0xFF
E90C 2D FF               CMPA #0xFF
E90E 2B FF B0            JNE FAIL
E911 30 FF               LDA #0xFF
E913 17 00               ORA #0x00
E915 2D FF               CMPA #0xFF
E917 2B FF B0            JNE FAIL
E91A 30 14               LDA #0x14
E91C 17 C1               ORA #0xC1
E91E 2D D5               CMPA #0xD5
E920 2B FF B0            JNE FAIL
E923 30 AA               LDA #0xAA
E925 17 55               ORA #0x55
E927 2D FF               CMPA #0xFF
E929 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.18 XORA #0x**  EXCLUSIVE OR BETWEEN REG A AND IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
E92C 30 18      TSTOP18  LDA #0x18
E92E 19                  NOTA
E92F 31 C0 00            STA LEDPORT ; Output to LED port
E932 30 00               LDA #0x00
E934 18 00               XORA #0x00
E936 2D 00               CMPA #0x00
E938 2B FF B0            JNE FAIL
E93B 30 00               LDA #0x00
E93D 18 FF               XORA #0xFF
E93F 2D FF               CMPA #0xFF
E941 2B FF B0            JNE FAIL
E944 30 FF               LDA #0xFF
E946 18 FF               XORA #0xFF
E948 2D 00               CMPA #0x00
E94A 2B FF B0            JNE FAIL
E94D 30 FF               LDA #0xFF
E94F 18 55               XORA #0x55
E951 2D AA               CMPA #0xAA
E953 2B FF B0            JNE FAIL
E956 30 CE               LDA #0xCE
E958 18 5A               XORA #0x5A
E95A 2D 94               CMPA #0x94
E95C 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.19 NOTA  LOGIC NOT ON REG A
                         ; --------------------------------------------------------------------
E95F 30 19      TSTOP19  LDA #0x19
E961 19                  NOTA
E962 31 C0 00            STA LEDPORT ; Output to LED port
E965 30 00               LDA #0x00
E967 19                  NOTA
E968 2D FF               CMPA #0xFF
E96A 2B FF B0            JNE FAIL
E96D 19                  NOTA
E96E 2D 00               CMPA #0x00
E970 2B FF B0            JNE FAIL
E973 30 55               LDA #0x55
E975 19                  NOTA
E976 2D AA               CMPA #0xAA
E978 2B FF B0            JNE FAIL
E97B 19                  NOTA
E97C 2D 55               CMPA #0x55
E97E 2B FF B0            JNE FAIL
E981 19                  NOTA
E982 2D AA               CMPA #0xAA
E984 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1A CMPX #0x****   COMPARE X to immediate value
                         ; --------------------------------------------------------------------
E987 30 1A      TSTOP1A  LDA #0x1A
E989 19                  NOTA
E98A 31 C0 00            STA LEDPORT ; Output to LED port
E98D 04 00 00            LDX #0x0000 ; Load 0x0000 in X  (Testing with immediate hex value)
E990 1A 00 00            CMPX #0x0000
E993 2B FF B0            JNE FAIL
E996 1A 00 01            CMPX #0x0001
E999 2C FF B0            JEQ FAIL    ; good up tho here
E99C 1A FF FF            CMPX #0xFFFF
E99F 2C FF B0            JEQ FAIL
E9A2 04 FF 00            LDX #0xFF00 ; Load 0xFF00 in X
E9A5 1A FF 00            CMPX #0xFF00
E9A8 2B FF B0            JNE FAIL
E9AB 1A 00 FF            CMPX #0x00FF
E9AE 2C FF B0            JEQ FAIL
E9B1 1A FF FF            CMPX #0xFFFF
E9B4 2C FF B0            JEQ FAIL
E9B7 04 00 FF            LDX #0x00FF ; Load 0x00FF in X
E9BA 1A 00 FF            CMPX #0x00FF
E9BD 2B FF B0            JNE FAIL
E9C0 1A FF 00            CMPX #0xFF00
E9C3 2C FF B0            JEQ FAIL
E9C6 1A FF FF            CMPX #0xFFFF
E9C9 2C FF B0            JEQ FAIL
E9CC 04 FF FF            LDX #0xFFFF ; Load 0xFFFF in X
E9CF 1A FF FF            CMPX #0xFFFF
E9D2 2B FF B0            JNE FAIL
E9D5 1A FF 00            CMPX #0xFF00
E9D8 2C FF B0            JEQ FAIL
E9DB 1A 00 FF            CMPX #0x00FF
E9DE 2C FF B0            JEQ FAIL
E9E1 04 AB CD            LDX #0xABCD
E9E4 1A A5 CD            CMPX #0xA5CD
E9E7 2C FF B0            JEQ FAIL
E9EA 04 12 34            LDX #0x1234
E9ED 1A 12 AA            CMPX #0x12AA
E9F0 2C FF B0            JEQ FAIL
E9F3 04 AE C3            LDX #0xAEC3
E9F6 1A AE C3            CMPX #0xAEC3
E9F9 2B FF B0            JNE FAIL
E9FC 1A AE DB            CMPX #0xAEDB
E9FF 2C FF B0            JEQ FAIL
EA02 1A 12 C3            CMPX #0x12C3
EA05 2C FF B0            JEQ FAIL
EA08 1A FF FF            CMPX #0xFFFF
EA0B 2C FF B0            JEQ FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1B LDX 0x**  
                         ; LDX using a 8-bit direct address (8-bit offset into 0x000xFF page)
                         ; --------------------------------------------------------------------
EA0E 30 1B      TSTOP1B  LDA #0x1B
EA10 19                  NOTA
EA11 31 C0 00            STA LEDPORT    ; Output to LED port
EA14 30 00               LDA #0x00
EA16 31 00 00            STA 0x0000
EA19 30 00               LDA #0x00
EA1B 31 00 01            STA 0x0001
EA1E 1B 00               LDX 0x00       ; Load index pointer from this 8 bit address
EA20 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA23 2D 00               CMPA #0x00
EA25 2B FF B0            JNE FAIL
EA28 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA2B 2D 00               CMPA #0x00
EA2D 2B FF B0            JNE FAIL       ;
EA30 30 AB               LDA #0xAB
EA32 31 00 02            STA 0x0002
EA35 30 CD               LDA #0xCD
EA37 31 00 03            STA 0x0003
EA3A 1B 02               LDX 0x02       ; Load index pointer from this 8 bit address
EA3C 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA3F 2D AB               CMPA #0xAB
EA41 2B FF B0            JNE FAIL
EA44 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA47 2D CD               CMPA #0xCD
EA49 2B FF B0            JNE FAIL       ;      
EA4C 30 CA               LDA #0xCA
EA4E 31 00 48            STA 0x0048
EA51 30 FE               LDA #0xFE
EA53 31 00 49            STA 0x0049
EA56 1B 48               LDX 0x48       ; Load index pointer from this 8 bit address
EA58 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA5B 2D CA               CMPA #0xCA
EA5D 2B FF B0            JNE FAIL
EA60 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA63 2D FE               CMPA #0xFE
EA65 2B FF B0            JNE FAIL
EA68 30 12               LDA #0x12      ; Test using symbolic adress
EA6A 31 00 0E            STA 0x000E     ; ?b1
EA6D 30 34               LDA #0x34
EA6F 31 00 0F            STA 0x000F     ; ?b0
EA72 1B 0E               LDX ?b1        ; Load index pointer using symbolic LSB 8 bit address
EA74 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA77 2D 12               CMPA #0x12
EA79 2B FF B0            JNE FAIL
EA7C 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA7F 2D 34               CMPA #0x34
EA81 2B FF B0            JNE FAIL
EA84 30 56               LDA #0x56      ; Test using symbolic adress
EA86 31 00 09            STA 0x0009     ; ?b6
EA89 30 78               LDA #0x78
EA8B 31 00 0A            STA 0x000A     ; ?b7
EA8E 1B 09               LDX ?b6        ; Load index pointer using symbolic LSB 8 bit address
EA90 2A 1F F3            LDA 0x1FF3     ; read X MSB
EA93 2D 56               CMPA #0x56
EA95 2B FF B0            JNE FAIL
EA98 2A 1F F4            LDA 0x1FF4     ; read X LSB
EA9B 2D 78               CMPA #0x78
EA9D 2B FF B0            JNE FAIL
                         ; Test symbolic +- offset

                         ; --------------------------------------------------------------------
                         ; OP.1C LDA (****H,X)
                         ; LDA indexed indirect addressing
                         ; --------------------------------------------------------------------
EAA0 30 1C      TSTOP1C  LDA #0x1C
EAA2 19                  NOTA
EAA3 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM to be read using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EAA6 30 55               LDA #0x55
EAA8 31 00 00            STA 0x0000
EAAB 30 AA               LDA #0xAA
EAAD 31 00 01            STA 0x0001
EAB0 30 BE               LDA #0xBE
EAB2 31 00 02            STA 0x0002
EAB5 04 00 00            LDX #0x0000
EAB8 1C 00 00            LDA (0x0000,X)
EABB 2D 55               CMPA #0x55
EABD 2B FF B0            JNE FAIL
EAC0 05                  INCX
EAC1 1C 00 00            LDA (0x0000,X)
EAC4 2D AA               CMPA #0xAA
EAC6 2B FF B0            JNE FAIL
EAC9 05                  INCX
EACA 1C 00 00            LDA (0x0000,X) 
EACD 2D BE               CMPA #0xBE
EACF 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x00FF and incrementing
                         ; storing data at 0x10FE onwards
EAD2 30 12               LDA #0x12
EAD4 31 10 FE            STA 0x10FE
EAD7 30 34               LDA #0x34
EAD9 31 10 FF            STA 0x10FF
EADC 30 56               LDA #0x56
EADE 31 11 00            STA 0x1100
EAE1 30 78               LDA #0x78
EAE3 31 11 01            STA 0x1101
EAE6 04 00 00            LDX #0x0000 ; Point to LSB of base address   
EAE9 1C 10 FE            LDA (0x10FE,X)
EAEC 2D 12               CMPA #0x12
EAEE 2B FF B0            JNE FAIL
EAF1 05                  INCX
EAF2 1C 10 FE            LDA (0x10FE,X)
EAF5 2D 34               CMPA #0x34
EAF7 2B FF B0            JNE FAIL
EAFA 05                  INCX
EAFB 1C 10 FE            LDA (0x10FE,X)
EAFE 2D 56               CMPA #0x56
EB00 2B FF B0            JNE FAIL
EB03 05                  INCX
EB04 1C 10 FE            LDA (0x10FE,X)
EB07 2D 78               CMPA #0x78
EB09 2B FF B0            JNE FAIL 
                         ; Finally test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EB0C 30 12               LDA #0x12
EB0E 31 12 34            STA 0x1234
EB11 30 34               LDA #0x34
EB13 31 12 35            STA 0x1235
EB16 30 56               LDA #0x56
EB18 31 12 36            STA 0x1236
EB1B 30 78               LDA #0x78
EB1D 31 12 37            STA 0x1237
EB20 04 12 34            LDX #0x1234 ; Point to base address
EB23 1C 00 00            LDA (0x0000,X)
EB26 2D 12               CMPA #0x12
EB28 2B FF B0            JNE FAIL
EB2B 1C 00 01            LDA (0x0001,X)
EB2E 2D 34               CMPA #0x34
EB30 2B FF B0            JNE FAIL
EB33 1C 00 02            LDA (0x0002,X)
EB36 2D 56               CMPA #0x56
EB38 2B FF B0            JNE FAIL
EB3B 1C 00 03            LDA (0x0003,X)
EB3E 2D 78               CMPA #0x78
EB40 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
EB43 30 9A               LDA #0x9A
EB45 31 12 FE            STA 0x12FE
EB48 30 BC               LDA #0xBC   
EB4A 31 12 FF            STA 0x12FF
EB4D 30 DE               LDA #0xDE
EB4F 31 13 00            STA 0x1300
EB52 30 F0               LDA #0xF0
EB54 31 13 01            STA 0x1301
EB57 04 01 FE            LDX #0x01FE ; Point to base address
EB5A 1C 11 00            LDA (0x1100,X)
EB5D 2D 9A               CMPA #0x9A
EB5F 2B FF B0            JNE FAIL
EB62 1C 11 01            LDA (0x1101,X)
EB65 2D BC               CMPA #0xBC
EB67 2B FF B0            JNE FAIL
EB6A 1C 11 02            LDA (0x1102,X)
EB6D 2D DE               CMPA #0xDE
EB6F 2B FF B0            JNE FAIL
EB72 1C 11 03            LDA (0x1103,X)
EB75 2D F0               CMPA #0xF0
EB77 2B FF B0            JNE FAIL
                         ; Test using symbolic with fixed index register to 0
EB7A 30 DE               LDA #0xDE
EB7C 31 00 00            STA 0x0000
EB7F 30 AD               LDA #0xAD
EB81 31 00 01            STA 0x0001
EB84 30 BE               LDA #0xBE
EB86 31 00 02            STA 0x0002
EB89 30 EF               LDA #0xEF
EB8B 31 00 03            STA 0x0003
EB8E 04 00 00            LDX #0x0000 ; Clear index
EB91 1C 00 00            LDA (?b15,X)
EB94 2D DE               CMPA #0xDE
EB96 2B FF B0            JNE FAIL
EB99 1C 00 01            LDA (?b14,X)
EB9C 2D AD               CMPA #0xAD
EB9E 2B FF B0            JNE FAIL
EBA1 1C 00 02            LDA (?b13,X)
EBA4 2D BE               CMPA #0xBE
EBA6 2B FF B0            JNE FAIL
EBA9 1C 00 03            LDA (?b12,X)
EBAC 2D EF               CMPA #0xEF
EBAE 2B FF B0            JNE FAIL
                         ; Test using symbolic and incrementing index
EBB1 30 CA               LDA #0xCA   ; ?b7      EQU 0x0008
EBB3 31 00 08            STA 0x0008
EBB6 30 FE               LDA #0xFE
EBB8 31 00 09            STA 0x0009
EBBB 30 55               LDA #0x55
EBBD 31 00 0A            STA 0x000A
EBC0 30 AA               LDA #0xAA
EBC2 31 00 0B            STA 0x000B
EBC5 04 00 00            LDX #0x0000 ; Clear index
EBC8 1C 00 08            LDA (?b7,X)
EBCB 2D CA               CMPA #0xCA
EBCD 2B FF B0            JNE FAIL
EBD0 05                  INCX
EBD1 1C 00 08            LDA (?b7,X)
EBD4 2D FE               CMPA #0xFE
EBD6 2B FF B0            JNE FAIL
EBD9 05                  INCX
EBDA 1C 00 08            LDA (?b7,X)
EBDD 2D 55               CMPA #0x55
EBDF 2B FF B0            JNE FAIL
EBE2 05                  INCX
EBE3 1C 00 08            LDA (?b7,X)
EBE6 2D AA               CMPA #0xAA
EBE8 2B FF B0            JNE FAIL              
                         ; Test using symbolic and incrementing index with a carry
EBEB 30 12               LDA #0x12   ; ?b0      EQU 0x000F
EBED 31 16 FE            STA 0x16FE
EBF0 30 34               LDA #0x34
EBF2 31 16 FF            STA 0x16FF
EBF5 30 56               LDA #0x56
EBF7 31 17 00            STA 0x1700
EBFA 30 78               LDA #0x78
EBFC 31 17 01            STA 0x1701
EBFF 04 16 EF            LDX #0x16EF ; Set base index
EC02 1C 00 0F            LDA (?b0,X)
EC05 2D 12               CMPA #0x12
EC07 2B FF B0            JNE FAIL              
EC0A 05                  INCX
EC0B 1C 00 0F            LDA (?b0,X)
EC0E 2D 34               CMPA #0x34
EC10 2B FF B0            JNE FAIL              
EC13 05                  INCX        ; carry on MSB
EC14 1C 00 0F            LDA (?b0,X)
EC17 2D 56               CMPA #0x56
EC19 2B FF B0            JNE FAIL              
EC1C 05                  INCX
EC1D 1C 00 0F            LDA (?b0,X)
EC20 2D 78               CMPA #0x78
EC22 2B FF B0            JNE FAIL              
                         ; --------------------------------------------------------------------
                         ; OP.1D STA (****H,X)
                         ; STA indexed indirect addressing
                         ; --------------------------------------------------------------------
EC25 30 1D      TSTOP1D  LDA #0x1D
EC27 19                  NOTA
EC28 31 C0 00            STA LEDPORT    ; Output to LED port
                         ;Store a few bytes in RAM using indexed indirect addressing
                         ;test with base address not requiring a carry to MSB
                         ;by incrementing X from 0x0000 upwards
EC2B 30 55               LDA #0x55      ; store data at 0x0000 onwards
EC2D 04 00 00            LDX #0x0000
EC30 1D 00 00            STA (0x0000,X)
EC33 30 AA               LDA #0xAA
EC35 05                  INCX
EC36 1D 00 00            STA (0x0000,X)
EC39 30 BE               LDA #0xBE
EC3B 05                  INCX
EC3C 1D 00 00            STA (0x0000,X)
EC3F 04 00 00            LDX #0x0000    ; Now read back the stored data
EC42 0A                  LDA (X)
EC43 2D 55               CMPA #0x55
EC45 2B FF B0            JNE FAIL
EC48 05                  INCX
EC49 0A                  LDA (X)
EC4A 2D AA               CMPA #0xAA
EC4C 2B FF B0            JNE FAIL 
EC4F 05                  INCX
EC50 0A                  LDA (X) 
EC51 2D BE               CMPA #0xBE
EC53 2B FF B0            JNE FAIL
                         ; Now test with a base address requiring a carry to MSB
                         ; by initializing X to 0x10FE and incrementing storing data
EC56 30 12               LDA #0x12
EC58 04 10 FE            LDX #0x10FE
EC5B 1D 00 00            STA (0x0000,X)
EC5E 30 34               LDA #0x34
EC60 05                  INCX
EC61 1D 00 00            STA (0x0000,X)
EC64 30 56               LDA #0x56
EC66 05                  INCX
EC67 1D 00 00            STA (0x0000,X)
EC6A 30 78               LDA #0x78
EC6C 05                  INCX
EC6D 1D 00 00            STA (0x0000,X)
EC70 04 10 FE            LDX #0x10FE ; Initialize X to base address
EC73 0A                  LDA (X)
EC74 2D 12               CMPA #0x12
EC76 2B FF B0            JNE FAIL
EC79 05                  INCX
EC7A 0A                  LDA (X)
EC7B 2D 34               CMPA #0x34
EC7D 2B FF B0            JNE FAIL
EC80 05                  INCX
EC81 0A                  LDA (X)
EC82 2D 56               CMPA #0x56
EC84 2B FF B0            JNE FAIL
EC87 05                  INCX
EC88 0A                  LDA (X)
EC89 2D 78               CMPA #0x78
EC8B 2B FF B0            JNE FAIL
                         ; Test using a fixed indexed register with variable offset
                         ; storing data at 0x1234 onwards
EC8E 30 12               LDA #0x12
EC90 04 12 34            LDX #0x1234
EC93 1D 00 00            STA (0x0000,X)
EC96 30 34               LDA #0x34
EC98 1D 00 01            STA (0x0001,X)
EC9B 30 56               LDA #0x56
EC9D 1D 00 02            STA (0x0002,X)
ECA0 30 78               LDA #0x78
ECA2 1D 00 03            STA (0x0003,X)
ECA5 04 12 34            LDX #0x1234 ; Point to base address
ECA8 0A                  LDA (X)
ECA9 2D 12               CMPA #0x12
ECAB 2B FF B0            JNE FAIL
ECAE 1C 00 01            LDA (0x0001,X)
ECB1 2D 34               CMPA #0x34
ECB3 2B FF B0            JNE FAIL
ECB6 1C 00 02            LDA (0x0002,X)
ECB9 2D 56               CMPA #0x56
ECBB 2B FF B0            JNE FAIL
ECBE 1C 00 03            LDA (0x0003,X)
ECC1 2D 78               CMPA #0x78
ECC3 2B FF B0            JNE FAIL
                         ; Test using a fixed index register with carry to MSB
ECC6 30 9A               LDA #0x9A
ECC8 04 14 FE            LDX #0x14FE
ECCB 1D 00 00            STA (0x0000,X)
ECCE 30 BC               LDA #0xBC
ECD0 1D 00 01            STA (0x0001,X)
ECD3 30 DE               LDA #0xDE
ECD5 1D 00 02            STA (0x0002,X)
ECD8 30 F0               LDA #0xF0
ECDA 1D 00 03            STA (0x0003,X)
ECDD 04 14 FE            LDX #0x14FE ; Point to base address
ECE0 0A                  LDA (X)
ECE1 2D 9A               CMPA #0x9A
ECE3 2B FF B0            JNE FAIL
ECE6 05                  INCX
ECE7 0A                  LDA (X)
ECE8 2D BC               CMPA #0xBC
ECEA 2B FF B0            JNE FAIL
ECED 05                  INCX
ECEE 0A                  LDA (X)
ECEF 2D DE               CMPA #0xDE
ECF1 2B FF B0            JNE FAIL
ECF4 05                  INCX
ECF5 0A                  LDA (X)
ECF6 2D F0               CMPA #0xF0
ECF8 2B FF B0            JNE FAIL
                         ; Test with carry to MSB on index and base address
ECFB 30 45               LDA #0x45
ECFD 04 02 FE            LDX #0x02FE
ED00 1D 11 00            STA (0x1100,X)
ED03 30 67               LDA #0x67
ED05 1D 11 01            STA (0x1101,X)
ED08 30 89               LDA #0x89
ED0A 1D 11 02            STA (0x1102,X)
ED0D 30 AB               LDA #0xAB
ED0F 1D 11 03            STA (0x1103,X)
ED12 04 01 FE            LDX #0x01FE ; Point to base address
ED15 1C 12 00            LDA (0x1200,X)
ED18 2D 45               CMPA #0x45
ED1A 2B FF B0            JNE FAIL
ED1D 05                  INCX
ED1E 1C 12 00            LDA (0x1200,X)
ED21 2D 67               CMPA #0x67
ED23 2B FF B0            JNE FAIL
ED26 05                  INCX
ED27 1C 12 00            LDA (0x1200,X)
ED2A 2D 89               CMPA #0x89
ED2C 2B FF B0            JNE FAIL
ED2F 05                  INCX
ED30 1C 12 00            LDA (0x1200,X)
ED33 2D AB               CMPA #0xAB
ED35 2B FF B0            JNE FAIL
                         ; test using symbolic with fixed index register to 0
ED38 04 00 00            LDX #0x0000 ; Clear index
ED3B 30 DE               LDA #0xDE
ED3D 1D 00 05            STA (?b10,X)
ED40 30 AD               LDA #0xAD
ED42 1D 00 06            STA (?b9,X)
ED45 30 BE               LDA #0xBE
ED47 1D 00 07            STA (?b8,X)   
ED4A 30 EF               LDA #0xEF
ED4C 1D 00 08            STA (?b7,X)
ED4F 2A 00 05            LDA 0x0005
ED52 2D DE               CMPA #0xDE
ED54 2B FF B0            JNE FAIL
ED57 2A 00 06            LDA 0x0006
ED5A 2D AD               CMPA #0xAD
ED5C 2B FF B0            JNE FAIL
ED5F 2A 00 07            LDA 0x0007
ED62 2D BE               CMPA #0xBE
ED64 2B FF B0            JNE FAIL
ED67 2A 00 08            LDA 0x0008
ED6A 2D EF               CMPA #0xEF
ED6C 2B FF B0            JNE FAIL
                         ; test using symbolic and incrementing index
ED6F 04 00 00            LDX #0x0000 ; Clear index
ED72 30 CA               LDA #0xCA   
ED74 1D 00 0F            STA (?b0,X) ; ?b0      EQU 0x000F
ED77 05                  INCX
ED78 30 FE               LDA #0xFE
ED7A 1D 00 0F            STA (?b0,X)
ED7D 05                  INCX 
ED7E 30 55               LDA #0x55
ED80 1D 00 0F            STA (?b0,X)
ED83 05                  INCX
ED84 30 AA               LDA #0xAA
ED86 1D 00 0F            STA (?b0,X)
ED89 2A 00 0F            LDA 0x000F
ED8C 2D CA               CMPA #0xCA
ED8E 2B FF B0            JNE FAIL
ED91 2A 00 10            LDA 0x0010
ED94 2D FE               CMPA #0xFE
ED96 2B FF B0            JNE FAIL
ED99 2A 00 11            LDA 0x0011
ED9C 2D 55               CMPA #0x55
ED9E 2B FF B0            JNE FAIL
EDA1 2A 00 12            LDA 0x0012
EDA4 2D AA               CMPA #0xAA
EDA6 2B FF B0            JNE FAIL         
                         ; Test using symbolic and incrementing index with a carry
EDA9 04 14 EF            LDX #0x14EF ; Set base index
EDAC 30 12               LDA #0x12
EDAE 1D 00 0F            STA (?b0,X) ; 0x14FE
EDB1 05                  INCX
EDB2 30 34               LDA #0x34
EDB4 1D 00 0F            STA (?b0,X) ; 0x14FF
EDB7 05                  INCX
EDB8 30 56               LDA #0x56
EDBA 1D 00 0F            STA (?b0,X) ; 0x1500
EDBD 05                  INCX
EDBE 30 78               LDA #0x78
EDC0 1D 00 0F            STA (?b0,X) ; 0x1501
EDC3 2A 14 FE            LDA 0x14FE
EDC6 2D 12               CMPA #0x12
EDC8 2B FF B0            JNE FAIL
EDCB 2A 14 FF            LDA 0x14FF
EDCE 2D 34               CMPA #0x34
EDD0 2B FF B0            JNE FAIL
EDD3 2A 15 00            LDA 0x1500
EDD6 2D 56               CMPA #0x56
EDD8 2B FF B0            JNE FAIL
EDDB 2A 15 01            LDA 0x1501
EDDE 2D 78               CMPA #0x78
EDE0 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.1E CLRX
                         ; CLEAR X REGISTER
                         ; --------------------------------------------------------------------
EDE3 30 1E      TSTOP1E  LDA #0x1E
EDE5 19                  NOTA
EDE6 31 C0 00            STA LEDPORT ; Output to LED port
EDE9 30 00               LDA #0x00   ; Clear E equal flag
EDEB 31 1F FA            STA 0x1FFA
EDEE 04 FF FF            LDX #0xFFFF ; Load X with non zero value
EDF1 1E                  CLRX
EDF2 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EDF5 2D 00               CMPA #0x00
EDF7 2B FF B0            JNE FAIL
EDFA 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EDFD 2D 00               CMPA #0x00
EDFF 2B FF B0            JNE FAIL
EE02 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE05 2D 01               CMPA #0x01
EE07 2B FF B0            JNE FAIL
EE0A 30 01               LDA #0x01   ; Set E equal flag
EE0C 31 1F FA            STA 0x1FFA
EE0F 04 12 34            LDX #0x1234 ; Load X with non zero value
EE12 1E                  CLRX
EE13 2A 1F F3            LDA 0x1FF3  ; Read X MSB
EE16 2D 00               CMPA #0x00
EE18 2B FF B0            JNE FAIL
EE1B 2A 1F F4            LDA 0x1FF4  ; Read X LSB
EE1E 2D 00               CMPA #0x00
EE20 2B FF B0            JNE FAIL
EE23 2A 1F FA            LDA 0x1FFA  ; Read E flag and check it is set
EE26 2D 01               CMPA #0x01  
EE28 2B FF B0            JNE FAIL
                         ; -----------------------------------------------------
                         ; OP.1F CMPA 0x**** 
                         ; Compare A with direct-addressed byte, Update Status E
                         ; -----------------------------------------------------
EE2B 30 1F      TSTOP1F  LDA #0x1F
EE2D 19                  NOTA
EE2E 31 C0 00            STA LEDPORT ; Output to LED port
EE31 30 5A               LDA #0x5A   ; Store a value in RAM
EE33 31 02 00            STA 0x0200   
EE36 30 5A               LDA #0x5A
EE38 1F 02 00            CMPA 0x0200 ; Compare with same value
EE3B 2B FF B0            JNE FAIL    ; Jump if result not good
EE3E 2A 1F FA            LDA EQUAL   ; Read E flag and check it is set
EE41 2D 01               CMPA #0x01  
EE43 2B FF B0            JNE FAIL
EE46 30 3C               LDA #0x3C
EE48 1F 02 00            CMPA 0x0200 ; Compare with lower value
EE4B 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE4E 2A 1F FA            LDA EQUAL  ; Read E flag and check it is cleared
EE51 2D 00               CMPA #0x00  
EE53 2B FF B0            JNE FAIL
EE56 30 7E               LDA #0x7E
EE58 1F 02 00            CMPA 0x0200 ; Compare with higher value
EE5B 2C FF B0            JEQ FAIL    ; Jump if result indicates equality
EE5E 2A 1F FA            LDA EQUAL   ; Read E flag and check it is cleared
EE61 2D 00               CMPA #0x00  
EE63 2B FF B0            JNE FAIL 
EE66 30 00               LDA #0x00
EE68 31 15 67            STA 0x1567
EE6B 30 FF               LDA #0xFF
EE6D 31 17 89            STA 0x1789
EE70 30 00               LDA #0x00
EE72 1F 15 67            CMPA 0x1567
EE75 2B FF B0            JNE FAIL
EE78 2A 1F FA            LDA EQUAL
EE7B 2D 01               CMPA #0x01
EE7D 2B FF B0            JNE FAIL
EE80 30 FF               LDA #0xFF
EE82 1F 17 89            CMPA 0x1789
EE85 2B FF B0            JNE FAIL
EE88 2A 1F FA            LDA EQUAL
EE8B 2D 01               CMPA #0x01
EE8D 2B FF B0            JNE FAIL 
EE90 30 AA               LDA #0xAA
EE92 1F 15 67            CMPA 0x1567
EE95 2C FF B0            JEQ FAIL
EE98 2A 1F FA            LDA EQUAL
EE9B 2D 00               CMPA #0x00
EE9D 2B FF B0            JNE FAIL
EEA0 30 55               LDA #0x55
EEA2 1F 17 89            CMPA 0x1789
EEA5 2C FF B0            JEQ FAIL
EEA8 2A 1F FA            LDA EQUAL
EEAB 2D 00               CMPA #0x00
EEAD 2B FF B0            JNE FAIL
                         ; Test with symbolic address
EEB0 30 41               LDA #0x41      ; 'A'
EEB2 1F F9 77            CMPA MSGTXT1   ; '1' 
EEB5 2C FF B0            JEQ FAIL
EEB8 30 31               LDA #0x31      ; '1'
EEBA 1F F9 77            CMPA MSGTXT1   ; '1'
EEBD 2B FF B0            JNE FAIL
EEC0 30 57               LDA #0x57      ; 'W'
EEC2 1F F9 84            CMPA MSGTXT2+6 ; 'W'
EEC5 2B FF B0            JNE FAIL
EEC8 30 54               LDA #0x54
EECA 1F F9 8A            CMPA MSGTXT3   ; 'T'
EECD 2B FF B0            JNE FAIL
EED0 30 68               LDA #0x68
EED2 1F F9 8B            CMPA MSGTXT3+1 ; 'h'
EED5 2B FF B0            JNE FAIL
EED8 30 69               LDA #0x69
EEDA 1F F9 8C            CMPA MSGTXT3+2 ; 'i'
EEDD 2B FF B0            JNE FAIL
EEE0 30 73               LDA #0x73
EEE2 1F F9 8D            CMPA MSGTXT3+3 ; 's'
EEE5 2B FF B0            JNE FAIL
EEE8 30 20               LDA #0x20
EEEA 1F F9 8E            CMPA MSGTXT3+4 ; ' '
EEED 2B FF B0            JNE FAIL
EEF0 30 69               LDA #0x69
EEF2 1F F9 8F            CMPA MSGTXT3+5 ; 'i'
EEF5 2B FF B0            JNE FAIL
EEF8 30 73               LDA #0x73
EEFA 1F F9 90            CMPA MSGTXT3+6 ; 's'
EEFD 2B FF B0            JNE FAIL
EF00 30 72               LDA #0x72      ; 'r'
EF02 1F F9 C5            CMPA MSGTXT3+59
EF05 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.20 DECA  
                         ; DECREMENT REGISTER A
                         ; --------------------------------------------------------------------
EF08 30 20      TSTOP20  LDA #0x20
EF0A 19                  NOTA
EF0B 31 C0 00            STA LEDPORT ; Output to LED port
EF0E 30 01               LDA #0x01
EF10 20                  DECA
EF11 2D 00               CMPA #0x00
EF13 2B FF B0            JNE FAIL
EF16 20                  DECA
EF17 2D FF               CMPA #0xFF
EF19 2B FF B0            JNE FAIL
EF1C 20                  DECA
EF1D 2D FE               CMPA #0xFE
EF1F 2B FF B0            JNE FAIL
EF22 30 80               LDA #0x80
EF24 20                  DECA
EF25 2D 7F               CMPA #0x7F
EF27 2B FF B0            JNE FAIL
                         ; Test E flag
EF2A 30 00               LDA #0x00   ; Clear E equal flag
EF2C 31 1F FA            STA 0x1FFA 
EF2F 30 01               LDA #0x01
EF31 20                  DECA
EF32 2A 1F FA            LDA 0x1FFA
EF35 2D 01               CMPA #0x01 ; Check E flag is set
EF37 2B FF B0            JNE FAIL
EF3A 30 00               LDA #0x00
EF3C 20                  DECA
EF3D 2A 1F FA            LDA 0x1FFA
EF40 2D 00               CMPA #0x00 ; Check E flag is cleared
EF42 2B FF B0            JNE FAIL
                         ; Check all bits for the E flag
EF45 30 81               LDA #0x81
EF47 20                  DECA
EF48 2A 1F FA            LDA 0x1FFA
EF4B 2D 00               CMPA #0x00 ; Check E flag is cleared
EF4D 2B FF B0            JNE FAIL
EF50 30 41               LDA #0x41
EF52 20                  DECA
EF53 2A 1F FA            LDA 0x1FFA
EF56 2D 00               CMPA #0x00 ; Check E flag is cleared
EF58 2B FF B0            JNE FAIL
EF5B 30 21               LDA #0x21
EF5D 20                  DECA
EF5E 2A 1F FA            LDA 0x1FFA
EF61 2D 00               CMPA #0x00 ; Check E flag is cleared
EF63 2B FF B0            JNE FAIL
EF66 30 11               LDA #0x11
EF68 20                  DECA
EF69 2A 1F FA            LDA 0x1FFA
EF6C 2D 00               CMPA #0x00 ; Check E flag is cleared
EF6E 2B FF B0            JNE FAIL
EF71 30 09               LDA #0x09
EF73 20                  DECA
EF74 2A 1F FA            LDA 0x1FFA
EF77 2D 00               CMPA #0x00 ; Check E flag is cleared
EF79 2B FF B0            JNE FAIL
EF7C 30 05               LDA #0x05
EF7E 20                  DECA
EF7F 2A 1F FA            LDA 0x1FFA
EF82 2D 00               CMPA #0x00 ; Check E flag is cleared
EF84 2B FF B0            JNE FAIL
EF87 30 03               LDA #0x03
EF89 20                  DECA
EF8A 2A 1F FA            LDA 0x1FFA
EF8D 2D 00               CMPA #0x00 ; Check E flag is cleared
EF8F 2B FF B0            JNE FAIL
EF92 30 02               LDA #0x02
EF94 20                  DECA
EF95 2A 1F FA            LDA 0x1FFA
EF98 2D 00               CMPA #0x00 ; Check E flag is cleared
EF9A 2B FF B0            JNE FAIL
                         ; Test all bits for DECA operation
EF9D 30 FF               LDA #0xFF
EF9F 20                  DECA
EFA0 2D FE               CMPA #0xFE
EFA2 2B FF B0            JNE FAIL
EFA5 30 7F               LDA #0x7F
EFA7 20                  DECA
EFA8 2D 7E               CMPA #0x7E
EFAA 2B FF B0            JNE FAIL
EFAD 30 3F               LDA #0x3F
EFAF 20                  DECA
EFB0 2D 3E               CMPA #0x3E
EFB2 2B FF B0            JNE FAIL
EFB5 30 1F               LDA #0x1F
EFB7 20                  DECA
EFB8 2D 1E               CMPA #0x1E
EFBA 2B FF B0            JNE FAIL
EFBD 30 0F               LDA #0x0F
EFBF 20                  DECA
EFC0 2D 0E               CMPA #0x0E
EFC2 2B FF B0            JNE FAIL
EFC5 30 07               LDA #0x07
EFC7 20                  DECA
EFC8 2D 06               CMPA #0x06
EFCA 2B FF B0            JNE FAIL
EFCD 30 03               LDA #0x03
EFCF 20                  DECA
EFD0 2D 02               CMPA #0x02
EFD2 2B FF B0            JNE FAIL
EFD5 30 01               LDA #0x01
EFD7 20                  DECA
EFD8 2D 00               CMPA #0x00
EFDA 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.29 ADDA 0x****  
                         ; ADD A WITH BYTE AT ADDRESS, C UPDATE
                         ; --------------------------------------------------------------------
EFDD 30 29      TSTOP29  LDA #0x29
EFDF 19                  NOTA
EFE0 31 C0 00            STA LEDPORT ; Output to LED port
EFE3 30 5F               LDA #0x5F   ; Store a value in RAM
EFE5 31 01 23            STA 0x0123   
EFE8 30 63               LDA #0x63
EFEA 29 01 23            ADDA 0x0123 ; Add to A the byte at address location
EFED 21 C2               TEQA #0xC2  ; Check the sum
EFEF 2B FF B0            JNE FAIL    ; Jump if result not good
EFF2 2A 1F FB            LDA CARRY   ; Read the Carry Status
EFF5 21 00               TEQA #0x00  ; No carry expected then C should be '0'
EFF7 2B FF B0            JNE FAIL    ; Error if carry is set

EFFA 30 AC               LDA #0xAC   ; Store another value in RAM
EFFC 31 10 56            STA 0x1056   
EFFF 30 D9               LDA #0xD9
F001 29 10 56            ADDA 0x1056 ; Add to A the byte at address location
F004 21 85               TEQA #0x85  ; Check the sum LSB
F006 2B FF B0            JNE FAIL    ; Jump if result not as expected
F009 2A 1F FB            LDA CARRY   ; Read the Carry Status
F00C 21 01               TEQA #0x01  ; The Carry Status bit is expected to be '1' with <7:1> set to '0'
F00E 2B FF B0            JNE FAIL    ; Error if different
                         ; --------------------------------------------------------------------
                         ; OP.2A LDA 0x****  
                         ; LOAD A WITH BYTE AT ADDRESS (Direct Addressing)
                         ; --------------------------------------------------------------------
F011 30 2A      TSTOP2A  LDA #0x2A
F013 19                  NOTA
F014 31 C0 00            STA LEDPORT ; Output to LED port
F017 30 AA               LDA #0xAA   ; Load immediate in register A
F019 2D AA               CMPA #0xAA
F01B 2B FF B0            JNE FAIL
F01E 30 01               LDA #0x01
F020 2D 01               CMPA #0x01
F022 2B FF B0            JNE FAIL
F025 30 02               LDA #0x02
F027 2D 02               CMPA #0x02
F029 2B FF B0            JNE FAIL
F02C 30 04               LDA #0x04
F02E 2D 04               CMPA #0x04
F030 2B FF B0            JNE FAIL
F033 30 08               LDA #0x08
F035 2D 08               CMPA #0x08
F037 2B FF B0            JNE FAIL
F03A 30 10               LDA #0x10
F03C 2D 10               CMPA #0x10
F03E 2B FF B0            JNE FAIL
F041 30 20               LDA #0x20
F043 2D 20               CMPA #0x20
F045 2B FF B0            JNE FAIL
F048 30 40               LDA #0x40
F04A 2D 40               CMPA #0x40
F04C 2B FF B0            JNE FAIL
F04F 30 80               LDA #0x80
F051 2D 80               CMPA #0x80
F053 2B FF B0            JNE FAIL
F056 30 55               LDA #0x55
F058 2D 55               CMPA #0x55
F05A 2B FF B0            JNE FAIL
F05D 30 FF               LDA #0xFF
F05F 2D FF               CMPA #0xFF
F061 2B FF B0            JNE FAIL
                         ; Now test symbolic with positive offset
F064 2A F9 77            LDA MSGTXT1
F067 2D 31               CMPA #0x31     ; '1'
F069 2B FF B0            JNE FAIL
F06C 2A F9 78            LDA MSGTXT1+1
F06F 2D 32               CMPA #0x32     ; '2'
F071 2B FF B0            JNE FAIL
F074 2A F9 79            LDA MSGTXT1+2
F077 2D 33               CMPA #0x33     ; '3'
F079 2B FF B0            JNE FAIL
F07C 2A F9 7A            LDA MSGTXT1+3
F07F 2D 41               CMPA #0x41     ; 'A'
F081 2B FF B0            JNE FAIL
F084 2A F9 7B            LDA MSGTXT1+4
F087 2D 42               CMPA #0x42     ; 'B'
F089 2B FF B0            JNE FAIL
F08C 2A F9 7C            LDA MSGTXT1+5
F08F 2D 43               CMPA #0x43     ; 'C'
F091 2B FF B0            JNE FAIL
F094 2A F9 7D            LDA MSGTXT1+6
F097 2D 00               CMPA #0x00     ; null terminator
F099 2B FF B0            JNE FAIL
F09C 2A F9 81            LDA MSGTXT1+10
F09F 2D 6C               CMPA #0x6C
F0A1 2B FF B0            JNE FAIL
F0A4 2A F9 82            LDA MSGTXT1+11
F0A7 2D 6F               CMPA #0x6F
F0A9 2B FF B0            JNE FAIL
                         ; Now test symbolic with negative offset
F0AC 2A F9 8A            LDA MSGTXT3
F0AF 2D 54               CMPA #0x54     ; 'T'
F0B1 2B FF B0            JNE FAIL
F0B4 2A F9 89            LDA MSGTXT3-1
F0B7 2D 00               CMPA #0x00     ; null terminator
F0B9 2B FF B0            JNE FAIL
F0BC 2A F9 88            LDA MSGTXT3-2
F0BF 2D 64               CMPA #0x64     ; 'd'
F0C1 2B FF B0            JNE FAIL
F0C4 2A F9 87            LDA MSGTXT3-3
F0C7 2D 6C               CMPA #0x6C     ; 'l'
F0C9 2B FF B0            JNE FAIL
F0CC 2A F9 80            LDA MSGTXT3-10
F0CF 2D 6C               CMPA #0x6C
F0D1 2B FF B0            JNE FAIL
F0D4 2A F9 7F            LDA MSGTXT3-11
F0D7 2D 65               CMPA #0x65
F0D9 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2B JNE 0x****  
                         ; JUMP IF E=0
                         ; Only a partial validation because i do not have symbolic address
                         ; processing in the assembler program.
                         ; --------------------------------------------------------------------
F0DC 30 2B      TSTOP2B  LDA #0x2B
F0DE 19                  NOTA
F0DF 31 C0 00            STA LEDPORT ; Output to LED port
F0E2 30 6D               LDA #0x6D   ; Load a value in A
F0E4 21 6D               TEQA #0x6D  ; Compare with the same value
F0E6 2B FF B0            JNE FAIL    ; Error if values are different
F0E9 30 10               LDA #0x10
F0EB 21 10               TEQA #0x10
F0ED 2B FF B0            JNE FAIL
F0F0 30 01               LDA #0x01
F0F2 21 01               TEQA #0x01
F0F4 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2C JEQ 0x****
                         ; JUMP IF E=1
                         ; --------------------------------------------------------------------
F0F7 30 2C      TST2C    LDA #0x2C
F0F9 19                  NOTA
F0FA 31 C0 00            STA LEDPORT ; Output to LED port
F0FD 30 7A               LDA #0x7A   ; Load a value in A
F0FF 21 28               TEQA #0x28  ; Compare with a different value
F101 2C FF B0            JEQ FAIL    ; If appear identical then it's and error
F104 30 FE               LDA #0xFE   ; Again with adifference 
F106 21 FF               TEQA #0xFF
F108 2C FF B0            JEQ FAIL 
F10B 30 01               LDA #0x01   ; Another with difference
F10D 21 10               TEQA #0x10
F10F 2C FF B0            JEQ FAIL
F112 30 AB               LDA #0xAB   ; Now compare when values are identical
F114 21 AB               TEQA #0xAB
F116 2C F1 1C            JEQ TST2C_1 ; Testing if equal?
F119 32 FF B0            JMP FAIL    ; Result say both are not equal then it's a failure
F11C 30 00      TST2C_1  LDA #0x00   ; Result say the values are identical so we are passing
F11E 21 00               TEQA #0x00
F120 2C F1 26            JEQ TST2C_2 ; Testing if equal?
F123 32 FF B0            JMP FAIL    ; if different then it's a failure
F126 30 01      TST2C_2  LDA #0x01
F128 21 01               TEQA #0x01
F12A 2C F1 30            JEQ TST2C_3 ; Testing if equal?
F12D 32 FF B0            JMP FAIL    ; if different then it's a failure
F130 30 02      TST2C_3  LDA #0x02
F132 21 02               TEQA #0x02
F134 2C F1 3A            JEQ TST2C_4 ; Testing if equal?
F137 32 FF B0            JMP FAIL    ; if different then it's a failure
F13A 30 04      TST2C_4  LDA #0x04
F13C 21 04               TEQA #0x04
F13E 2C F1 44            JEQ TST2C_5 ; Testing if equal?
F141 32 FF B0            JMP FAIL    ; if different then it's a failure
F144 30 08      TST2C_5  LDA #0x08
F146 21 08               TEQA #0x08
F148 2C F1 4E            JEQ TST2C_6 ; Testing if equal?
F14B 32 FF B0            JMP FAIL    ; if different then it's a failure
F14E 30 10      TST2C_6  LDA #0x10
F150 21 10               TEQA #0x10
F152 2C F1 58            JEQ TST2C_7 ; Testing if equal?
F155 32 FF B0            JMP FAIL    ; if different then it's a failure
F158 30 20      TST2C_7  LDA #0x20
F15A 21 20               TEQA #0x20
F15C 2C F1 62            JEQ TST2C_8 ; Testing if equal?
F15F 32 FF B0            JMP FAIL    ; if different then it's a failure         
F162 30 40      TST2C_8  LDA #0x40
F164 21 40               TEQA #0x40
F166 2C F1 6C            JEQ TST2C_9 ; Testing if equal?
F169 32 FF B0            JMP FAIL    ; if different then it's a failure         
F16C 30 80      TST2C_9  LDA #0x80
F16E 21 80               TEQA #0x80
F170 2C F1 76            JEQ TST2C_10 ; Testing if equal?
F173 32 FF B0            JMP FAIL    ; if different then it's a failure         
F176 09         TST2C_10 NOP
                         ; --------------------------------------------------------------------
                         ; OP.2D CMPA #0x**
                         ; COMPARE A WITH IMMEDIATE VALUE    EQUAL STATUS BIT (E) UPDATED
                         ; --------------------------------------------------------------------
F177 30 2D      TSTOP2D  LDA #0x2D
F179 19                  NOTA
F17A 31 C0 00            STA LEDPORT ; Output to LED port
F17D 30 12               LDA #0x12   ; Load a value in A
F17F 2D 12               CMPA #0x12  ; Compare with identical value
F181 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS 
F184 21 01               TEQA #0x01  ; Verify bit<0> E = '1' and all others bits <7:1> are '0'    
F186 2B FF B0            JNE FAIL    ; If different then it's and error
F189 30 AA               LDA #0xAA
F18B 2D 55               CMPA #0x55  ; Compare with a different value
F18D 2A 1F FA            LDA EQUAL   ; Inspect EQUAL STATUS
F190 21 00               TEQA #0x00  ; Verify bit<0> E = '0' and all others bits <7:1> are '0'    
F192 2B FF B0            JNE FAIL    ; If different then it's and error
                         ; --------------------------------------------------------------------
                         ; OP.2E ADCA #0x**
                         ; REG A = REG A + IMMEDIATE BYTE + CARRY (C)   
                         ; CARRY STATUS (C) IS UPDATED
                         ; --------------------------------------------------------------------
F195 30 2E      TSTOP2E  LDA #0x2E
F197 19                  NOTA
F198 31 C0 00            STA LEDPORT ; Output to LED port
F19B 30 00               LDA #0x00   ; Clear CARRY (C)
F19D 31 1F FB            STA CARRY      
F1A0 30 45               LDA #0x45
F1A2 2E 5B               ADCA #0x5B
F1A4 21 A0               TEQA #0xA0  ; Verify summ
F1A6 2B FF B0            JNE FAIL
F1A9 2A 1F FB            LDA CARRY   ; Check carry
F1AC 21 00               TEQA #0x00  ; Should be clear
F1AE 2B FF B0            JNE FAIL

F1B1 30 01               LDA #0x01   ; Set CARRY (C)
F1B3 31 1F FB            STA CARRY
F1B6 30 56               LDA #0x56
F1B8 2E 6D               ADCA #0x6D
F1BA 21 C4               TEQA #0xC4   ; Verify summ
F1BC 2B FF B0            JNE FAIL
F1BF 2A 1F FB            LDA CARRY   ; Check carry
F1C2 21 00               TEQA #0x00  ; Should be clear
F1C4 2B FF B0            JNE FAIL

F1C7 30 00               LDA #0x00   ; Clear CARRY (C)
F1C9 31 1F FB            STA CARRY
F1CC 30 7F               LDA #0x7F
F1CE 2E DE               ADCA #0xDE
F1D0 21 5D               TEQA #0x5D  ; Verify summ
F1D2 2B FF B0            JNE FAIL
F1D5 2A 1F FB            LDA CARRY   ; Check carry
F1D8 21 01               TEQA #0x01  ; Should be set
F1DA 2B FF B0            JNE FAIL

F1DD 30 01               LDA #0x01   ; Set CARRY (C)
F1DF 31 1F FB            STA CARRY
F1E2 30 FF               LDA #0xFF
F1E4 2E FF               ADCA #0xFF
F1E6 21 FF               TEQA #0xFF  ; Verify summ
F1E8 2B FF B0            JNE FAIL
F1EB 2A 1F FB            LDA CARRY   ; Check carry
F1EE 21 01               TEQA #0x01  ; Should be set
F1F0 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.2F ADDA #0x**
                         ; ACCA+M>ACCA     C UPDATED
                         ; --------------------------------------------------------------------
F1F3 30 2F      TSTOP2F  LDA #0x2F
F1F5 19                  NOTA
F1F6 31 C0 00            STA LEDPORT ; Output to LED port
F1F9 30 23               LDA #0x23
F1FB 2F 45               ADDA #0x45
F1FD 21 68               TEQA #0x68
F1FF 2B FF B0            JNE FAIL
F202 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F205 21 00               TEQA #0x00  ; Expecting C=0
F207 2B FF B0            JNE FAIL
F20A 30 8A               LDA #0x8A
F20C 2F BD               ADDA #0xBD
F20E 21 47               TEQA #0x47   
F210 2B FF B0            JNE FAIL
F213 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F216 21 01               TEQA #0x01  ; Expecting C=1
F218 2B FF B0            JNE FAIL
F21B 30 01               LDA #0x01
F21D 2F 02               ADDA #0x02
F21F 21 03               TEQA #0x03
F221 2B FF B0            JNE FAIL
F224 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F227 21 00               TEQA #0x00  ; Expecting C=0
F229 2B FF B0            JNE FAIL
F22C 30 FF               LDA #0xFF
F22E 2F FF               ADDA #0xFF
F230 21 FE               TEQA #0xFE
F232 2B FF B0            JNE FAIL
F235 2A 1F FB            LDA CARRY   ; Read Carry bit <0>
F238 21 01               TEQA #0x01   ; Expecting C=1
F23A 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.30 LDA #0x**  
                         ; LOAD IMMEDIATE VALUE IN REGISTER A
                         ; --------------------------------------------------------------------
F23D 30 30      TSTOP30  LDA #0x30
F23F 19                  NOTA
F240 31 C0 00            STA LEDPORT ; Output to LED port
F243 30 00               LDA #0x00
F245 21 00               TEQA #0x00
F247 2B FF B0            JNE FAIL
F24A 30 01               LDA #0x01
F24C 21 01               TEQA #0x01
F24E 2B FF B0            JNE FAIL
F251 30 02               LDA #0x02
F253 21 02               TEQA #0x02
F255 2B FF B0            JNE FAIL
F258 30 04               LDA #0x04
F25A 21 04               TEQA #0x04
F25C 2B FF B0            JNE FAIL
F25F 30 08               LDA #0x08
F261 21 08               TEQA #0x08
F263 2B FF B0            JNE FAIL
F266 30 10               LDA #0x10
F268 21 10               TEQA #0x10
F26A 2B FF B0            JNE FAIL
F26D 30 20               LDA #0x20
F26F 21 20               TEQA #0x20
F271 2B FF B0            JNE FAIL
F274 30 40               LDA #0x40
F276 21 40               TEQA #0x40
F278 2B FF B0            JNE FAIL
F27B 30 80               LDA #0x80
F27D 21 80               TEQA #0x80
F27F 2B FF B0            JNE FAIL
F282 30 55               LDA #0x55
F284 21 55               TEQA #0x55
F286 2B FF B0            JNE FAIL
F289 30 AA               LDA #0xAA
F28B 21 AA               TEQA #0xAA
F28D 2B FF B0            JNE FAIL
F290 30 FF               LDA #0xFF
F292 21 FF               TEQA #0xFF
F294 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.31 STA 0x**** 
                         ; STORE REG.A TO ADDRESSE
                         ; --------------------------------------------------------------------
F297 30 31      TSTOP31  LDA #0x31
F299 19                  NOTA
F29A 31 C0 00            STA LEDPORT ; Output to LED port
F29D 30 12               LDA #0x12   ; Write to RAM
F29F 31 00 00            STA 0x0000
F2A2 30 23               LDA #0x23
F2A4 31 00 01            STA 0x0001
F2A7 30 34               LDA #0x34
F2A9 31 00 02            STA 0x0002
F2AC 30 45               LDA #0x45
F2AE 31 00 04            STA 0x0004
F2B1 30 56               LDA #0x56
F2B3 31 00 08            STA 0x0008
F2B6 30 67               LDA #0x67
F2B8 31 00 10            STA 0x0010
F2BB 30 78               LDA #0x78
F2BD 31 00 20            STA 0x0020
F2C0 30 89               LDA #0x89
F2C2 31 00 40            STA 0x0040
F2C5 30 AB               LDA #0xAB
F2C7 31 00 80            STA 0x0080
F2CA 30 BC               LDA #0xBC
F2CC 31 01 00            STA 0x0100
F2CF 30 CD               LDA #0xCD
F2D1 31 02 00            STA 0x0200
F2D4 30 DE               LDA #0xDE
F2D6 31 04 00            STA 0x0400
F2D9 30 22               LDA #0x22
F2DB 31 08 00            STA 0x0800
F2DE 30 33               LDA #0x33
F2E0 31 10 00            STA 0x1000
F2E3 30 44               LDA #0x44
F2E5 31 17 00            STA 0x1700
F2E8 2A 00 00            LDA 0x0000  ; Read from RAM and compare
F2EB 21 12               TEQA #0x12
F2ED 2B FF B0            JNE FAIL
F2F0 2A 00 01            LDA 0x0001
F2F3 21 23               TEQA #0x23
F2F5 2B FF B0            JNE FAIL
F2F8 2A 00 02            LDA 0x0002
F2FB 21 34               TEQA #0x34
F2FD 2B FF B0            JNE FAIL
F300 2A 00 04            LDA 0x0004
F303 21 45               TEQA #0x45
F305 2B FF B0            JNE FAIL
F308 2A 00 08            LDA 0x0008
F30B 21 56               TEQA #0x56
F30D 2B FF B0            JNE FAIL
F310 2A 00 10            LDA 0x0010
F313 21 67               TEQA #0x67
F315 2B FF B0            JNE FAIL
F318 2A 00 20            LDA 0x0020
F31B 21 78               TEQA #0x78
F31D 2B FF B0            JNE FAIL
F320 2A 00 40            LDA 0x0040
F323 21 89               TEQA #0x89
F325 2B FF B0            JNE FAIL
F328 2A 00 80            LDA 0x0080
F32B 21 AB               TEQA #0xAB
F32D 2B FF B0            JNE FAIL
F330 2A 01 00            LDA 0x0100
F333 21 BC               TEQA #0xBC
F335 2B FF B0            JNE FAIL
F338 2A 02 00            LDA 0x0200
F33B 21 CD               TEQA #0xCD
F33D 2B FF B0            JNE FAIL
F340 2A 04 00            LDA 0x0400
F343 21 DE               TEQA #0xDE
F345 2B FF B0            JNE FAIL
F348 2A 08 00            LDA 0x0800
F34B 21 22               TEQA #0x22
F34D 2B FF B0            JNE FAIL
F350 2A 10 00            LDA 0x1000
F353 21 33               TEQA #0x33
F355 2B FF B0            JNE FAIL
F358 2A 17 00            LDA 0x1700
F35B 21 44               TEQA #0x44
F35D 2B FF B0            JNE FAIL
                         ; --------------------------------------------------------------------
                         ; OP.32 JMP 0x**** 
                         ; JUMP INCONDITIONAL TO ADDRESS
                         ; --------------------------------------------------------------------
                         ;LDA #0x32
                         ;NOTA
                         ;STA LEDPORT ; Output to LED port

                         ; --------------------------------------------------------------------
                         ; OP.33 ANDA #0x**  REGISTER A AND LOGICAL IMMEDIATE BYTE
                         ; --------------------------------------------------------------------
F360 30 33      TSTOP33  LDA #0x33
F362 19                  NOTA
F363 31 C0 00            STA LEDPORT ; Output to LED port
F366 30 FF               LDA #0xFF
F368 33 52               ANDA #0x52
F36A 21 52               TEQA #0x52
F36C 2B FF B0            JNE FAIL
F36F 30 E7               LDA #0xE7
F371 33 3C               ANDA #0x3C
F373 21 24               TEQA #0x24
F375 2B FF B0            JNE FAIL
F378 30 00               LDA #0x00
F37A 33 00               ANDA #0x00
F37C 21 00               TEQA #0x00
F37E 2B FF B0            JNE FAIL
F381 30 FF               LDA #0xFF
F383 33 FF               ANDA #0xFF
F385 21 FF               TEQA #0xFF
F387 2B FF B0            JNE FAIL
F38A 30 FF               LDA #0xFF
F38C 33 55               ANDA #0x55
F38E 21 55               TEQA #0x55
F390 2B FF B0            JNE FAIL
F393 30 FF               LDA #0xFF
F395 33 00               ANDA #0x00
F397 21 00               TEQA #0x00
F399 2B FF B0            JNE FAIL

                         ; --------------------------------------------------------------------
                         ; FIBONACCI TEST
                         ; first method using direct addressing
                         ; --------------------------------------------------------------------         
F39C 30 40      TSTFB1   LDA #0x40
F39E 19                  NOTA
F39F 31 C0 00            STA LEDPORT ; Output to LED port
                                     ;
F3A2 30 00               LDA #0x00   ; Init first number with 00H
F3A4 31 10 00            STA 0x1000
F3A7 30 01               LDA #0x01   ; Init second number with 01H
F3A9 31 10 01            STA 0x1001
F3AC 2A 10 00            LDA 0x1000  ; Load first number in A
F3AF 29 10 01            ADDA 0x1001 ; Add second number to A
F3B2 31 10 02            STA 0x1002  ; Store the summ
F3B5 21 01               TEQA #0x01  ; HEX   Decimal  Real Value (in 8 bit storage only)
F3B7 2B FF B0            JNE FAIL    ; x01   1        1

F3BA 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3BD 31 10 00            STA 0x1000
F3C0 2A 10 02            LDA 0x1002  ; Move summ to the second number
F3C3 31 10 01            STA 0x1001
F3C6 2A 10 00            LDA 0x1000  ; Load first number in A
F3C9 29 10 01            ADDA 0x1001 ; Add second number to A
F3CC 31 10 02            STA 0x1002  ; Store the summ
F3CF 21 02               TEQA #0x02  ; HEX   Decimal  Real Value
F3D1 2B FF B0            JNE FAIL    ; x02   2        2

F3D4 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3D7 31 10 00            STA 0x1000
F3DA 2A 10 02            LDA 0x1002   ; Move summ to the second number
F3DD 31 10 01            STA 0x1001
F3E0 2A 10 00            LDA 0x1000  ; Load first number in A
F3E3 29 10 01            ADDA 0x1001 ; Add second number to A
F3E6 31 10 02            STA 0x1002  ; Store the summ
F3E9 21 03               TEQA #0x03  ; HEX   Decimal  Real Value
F3EB 2B FF B0            JNE FAIL    ; x03   3        3

F3EE 2A 10 01            LDA 0x1001  ; Move second number to the first number
F3F1 31 10 00            STA 0x1000
F3F4 2A 10 02            LDA 0x1002  ; Move summ to the second number
F3F7 31 10 01            STA 0x1001
F3FA 2A 10 00            LDA 0x1000  ; Load first number in A
F3FD 29 10 01            ADDA 0x1001 ; Add second number to A
F400 31 10 02            STA 0x1002  ; Store the summ
F403 21 05               TEQA #0x05  ; HEX   Decimal  Real Value
F405 2B FF B0            JNE FAIL    ; x05   5        5

F408 2A 10 01            LDA 0x1001  ; Move second number to the first number
F40B 31 10 00            STA 0x1000
F40E 2A 10 02            LDA 0x1002  ; Move summ to the second number
F411 31 10 01            STA 0x1001
F414 2A 10 00            LDA 0x1000  ; Load first number in A
F417 29 10 01            ADDA 0x1001 ; Add second number to A
F41A 31 10 02            STA 0x1002  ; Store the summ
F41D 21 08               TEQA #0x08  ; HEX   Decimal  Real Value
F41F 2B FF B0            JNE FAIL    ; x08   8        8

F422 2A 10 01            LDA 0x1001  ; Move second number to the first number
F425 31 10 00            STA 0x1000
F428 2A 10 02            LDA 0x1002  ; Move summ to the second number
F42B 31 10 01            STA 0x1001
F42E 2A 10 00            LDA 0x1000  ; Load first number in A
F431 29 10 01            ADDA 0x1001 ; Add second number to A
F434 31 10 02            STA 0x1002  ; Store the summ
F437 21 0D               TEQA #0x0D  ; HEX   Decimal  Real Value
F439 2B FF B0            JNE FAIL    ; x0D   13       13

F43C 2A 10 01            LDA 0x1001  ; Move second number to the first number
F43F 31 10 00            STA 0x1000
F442 2A 10 02            LDA 0x1002  ; Move summ to the second number
F445 31 10 01            STA 0x1001
F448 2A 10 00            LDA 0x1000  ; Load first number in A
F44B 29 10 01            ADDA 0x1001 ; Add second number to A
F44E 31 10 02            STA 0x1002  ; Store the summ
F451 21 15               TEQA #0x15  ; HEX   Decimal  Real Value
F453 2B FF B0            JNE FAIL    ; x15   21       21

F456 2A 10 01            LDA 0x1001  ; Move second number to the first number
F459 31 10 00            STA 0x1000
F45C 2A 10 02            LDA 0x1002  ; Move summ to the second number
F45F 31 10 01            STA 0x1001
F462 2A 10 00            LDA 0x1000  ; Load first number in A
F465 29 10 01            ADDA 0x1001 ; Add second number to A
F468 31 10 02            STA 0x1002  ; Store the summ
F46B 21 22               TEQA #0x22  ; HEX   Decimal  Real Value
F46D 2B FF B0            JNE FAIL    ; x22   34       34

F470 2A 10 01            LDA 0x1001  ; Move second number to the first number
F473 31 10 00            STA 0x1000
F476 2A 10 02            LDA 0x1002  ; Move summ to the second number
F479 31 10 01            STA 0x1001
F47C 2A 10 00            LDA 0x1000  ; Load first number in A
F47F 29 10 01            ADDA 0x1001 ; Add second number to A
F482 31 10 02            STA 0x1002  ; Store the summ
F485 21 37               TEQA #0x37  ; HEX   Decimal  Real Value
F487 2B FF B0            JNE FAIL    ; x37   55       55

F48A 2A 10 01            LDA 0x1001  ; Move second number to the first number
F48D 31 10 00            STA 0x1000
F490 2A 10 02            LDA 0x1002  ; Move summ to the second number
F493 31 10 01            STA 0x1001
F496 2A 10 00            LDA 0x1000  ; Load first number in A
F499 29 10 01            ADDA 0x1001 ; Add second number to A
F49C 31 10 02            STA 0x1002  ; Store the summ
F49F 21 59               TEQA #0x59  ; HEX   Decimal  Real Value
F4A1 2B FF B0            JNE FAIL    ; x59   89       89

F4A4 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4A7 31 10 00            STA 0x1000
F4AA 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4AD 31 10 01            STA 0x1001
F4B0 2A 10 00            LDA 0x1000  ; Load first number in A
F4B3 29 10 01            ADDA 0x1001 ; Add second number to A
F4B6 31 10 02            STA 0x1002  ; Store the summ
F4B9 21 90               TEQA #0x90  ; HEX   Decimal  Real Value
F4BB 2B FF B0            JNE FAIL    ; x90   144      144

F4BE 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4C1 31 10 00            STA 0x1000
F4C4 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4C7 31 10 01            STA 0x1001
F4CA 2A 10 00            LDA 0x1000  ; Load first number in A
F4CD 29 10 01            ADDA 0x1001 ; Add second number to A
F4D0 31 10 02            STA 0x1002  ; Store the summ
F4D3 21 E9               TEQA #0xE9  ; HEX   Decimal  Real Value
F4D5 2B FF B0            JNE FAIL    ; xE9   233      233

F4D8 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4DB 31 10 00            STA 0x1000
F4DE 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4E1 31 10 01            STA 0x1001
F4E4 2A 10 00            LDA 0x1000  ; Load first number in A
F4E7 29 10 01            ADDA 0x1001 ; Add second number to A
F4EA 31 10 02            STA 0x1002  ; Store the summ
F4ED 21 79               TEQA #0x79  ; HEX   Decimal  Real Value
F4EF 2B FF B0            JNE FAIL    ; x79   121      377 - (256*1) = 121

F4F2 2A 10 01            LDA 0x1001  ; Move second number to the first number
F4F5 31 10 00            STA 0x1000
F4F8 2A 10 02            LDA 0x1002  ; Move summ to the second number
F4FB 31 10 01            STA 0x1001
F4FE 2A 10 00            LDA 0x1000  ; Load first number in A
F501 29 10 01            ADDA 0x1001 ; Add second number to A
F504 31 10 02            STA 0x1002  ; Store the summ
F507 21 62               TEQA #0x62  ; HEX   Decimal  Real Value
F509 2B FF B0            JNE FAIL    ; x62   98       610 - (256*2) = 98

F50C 2A 10 01            LDA 0x1001  ; Move second number to the first number
F50F 31 10 00            STA 0x1000
F512 2A 10 02            LDA 0x1002  ; Move summ to the second number
F515 31 10 01            STA 0x1001
F518 2A 10 00            LDA 0x1000  ; Load first number in A
F51B 29 10 01            ADDA 0x1001 ; Add second number to A
F51E 31 10 02            STA 0x1002  ; Store the summ
F521 21 DB               TEQA #0xDB  ; HEX   Decimal  Real Value
F523 2B FF B0            JNE FAIL    ; xDB   219      987 - (256*3) = 219         
                         ; --------------------------------------------------------------------      
                         ; END OF FIBONACCI TEST (method using direct addressing)
                         ; --------------------------------------------------------------------          

                         ; ---------
                         ; Loop test
                         ; ---------
F526 30 41      LOOPTST  LDA #0x41
F528 19                  NOTA
F529 31 C0 00            STA LEDPORT    ; Output to LED port
F52C 30 05               LDA #0x05      ; Init a counter of iterations
F52E 31 00 0F            STA ?b0
F531 2A 00 0F   LOOPTST1 LDA ?b0        ; Read counter
F534 21 00               TEQA #0x00     ; Is it 0?
F536 2C F5 40            JEQ LOOPTST2   ; Yes then it's the end fo the test
F539 2F FF               ADDA #0xFF     ; Add -1 in complement 2 (equivalent to decrement)
F53B 31 00 0F            STA ?b0        ; Save decremented count
F53E 0C F1               JRA LOOPTST1
F540 09         LOOPTST2 NOP            ; End of decrement loop         

                         ; -----------------
                         ; Math Library Test
                         ; -----------------
                         ; Test add16_w0_w0_w1  w0 <= w0 + w1
F541 30 42               LDA #0x42
F543 19                  NOTA
F544 31 C0 00            STA LEDPORT ; Output to LED port
F547 30 BE               LDA #0xBE   ; w0 = 0xBEEF
F549 31 00 0E            STA ?b1
F54C 30 EF               LDA #0xEF
F54E 31 00 0F            STA ?b0
F551 30 DE               LDA #0xDE   ; w1 = 0xDEAD
F553 31 00 0C            STA ?b3
F556 30 AD               LDA #0xAD
F558 31 00 0D            STA ?b2
F55B 06 FB F4            JSR ?add16_w0_w0_w1  ; w0 <= w0 + w1
F55E 2A 00 0E            LDA ?b1              ; Expected w0 = 9D9C + C set
F561 21 9D               TEQA #0x9D
F563 2B FF B0            JNE FAIL
F566 2A 00 0F            LDA ?b0
F569 21 9C               TEQA #0x9C
F56B 2B FF B0            JNE FAIL
F56E 2A 1F FB            LDA CARRY
F571 21 01               TEQA #0x01
F573 2B FF B0            JNE FAIL

                         ; Test add32_l0_l0_l1  l0 <= l0 + l1
F576 30 43               LDA #0x43
F578 19                  NOTA
F579 31 C0 00            STA LEDPORT ; Output to LED port
F57C 30 89               LDA #0x89   ; l0 = 0x89ABCDEF
F57E 31 00 0C            STA ?b3
F581 30 AB               LDA #0xAB
F583 31 00 0D            STA ?b2
F586 30 CD               LDA #0xCD
F588 31 00 0E            STA ?b1
F58B 30 EF               LDA #0xEF
F58D 31 00 0F            STA ?b0
F590 30 DE               LDA #0xDE   ; l1 = DEADBEEF
F592 31 00 08            STA ?b7
F595 30 AD               LDA #0xAD
F597 31 00 09            STA ?b6
F59A 30 BE               LDA #0xBE
F59C 31 00 0A            STA ?b5
F59F 30 EF               LDA #0xEF
F5A1 31 00 0B            STA ?b4
F5A4 06 FC 07            JSR ?add32_l0_l0_l1  ; l0 <= l0 + l1
F5A7 2A 00 0C            LDA ?b3              ; Expected l0 = 0x68598CDE + C set
F5AA 21 68               TEQA #0x68
F5AC 2B FF B0            JNE FAIL
F5AF 2A 00 0D            LDA ?b2
F5B2 21 59               TEQA #0x59
F5B4 2B FF B0            JNE FAIL
F5B7 2A 00 0E            LDA ?b1
F5BA 21 8C               TEQA #0x8C
F5BC 2B FF B0            JNE FAIL
F5BF 2A 00 0F            LDA ?b0
F5C2 21 DE               TEQA #0xDE
F5C4 2B FF B0            JNE FAIL
F5C7 2A 1F FB            LDA CARRY
F5CA 21 01               TEQA #0x01
F5CC 2B FF B0            JNE FAIL

                         ; Test ?inc32_l0_l0   l0 <= l0 + 1
F5CF 30 44               LDA #0x44
F5D1 19                  NOTA
F5D2 31 C0 00            STA LEDPORT ; Output to LED port
F5D5 30 FF               LDA #0xFF   ; l0 = 0xFFFFFFFF
F5D7 31 00 0C            STA ?b3
F5DA 30 FF               LDA #0xFF
F5DC 31 00 0D            STA ?b2
F5DF 30 FF               LDA #0xFF
F5E1 31 00 0E            STA ?b1
F5E4 30 FF               LDA #0xFF
F5E6 31 00 0F            STA ?b0
F5E9 06 FC 76            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
                         ; Expected l0 = 0x00000000
F5EC 2A 00 0C            LDA ?b3     ; Expected l0 = 0x00000000
F5EF 21 00               TEQA #0x00
F5F1 2B FF B0            JNE FAIL
F5F4 2A 00 0D            LDA ?b2
F5F7 21 00               TEQA #0x00
F5F9 2B FF B0            JNE FAIL
F5FC 2A 00 0E            LDA ?b1
F5FF 21 00               TEQA #0x00
F601 2B FF B0            JNE FAIL
F604 2A 00 0F            LDA ?b0
F607 21 00               TEQA #0x00
F609 2B FF B0            JNE FAIL
F60C 06 FC 76            JSR ?inc32_l0_l0  ; l0 <= l0 + 1
F60F 2A 00 0C            LDA ?b3
F612 21 00               TEQA #0x00
F614 2B FF B0            JNE FAIL
F617 2A 00 0D            LDA ?b2
F61A 21 00               TEQA #0x00
F61C 2B FF B0            JNE FAIL
F61F 2A 00 0E            LDA ?b1
F622 21 00               TEQA #0x00
F624 2B FF B0            JNE FAIL
F627 2A 00 0F            LDA ?b0
F62A 21 01               TEQA #0x01
F62C 2B FF B0            JNE FAIL
F62F 06 FC 76            JSR ?inc32_l0_l0
F632 06 FC 76            JSR ?inc32_l0_l0
F635 06 FC 76            JSR ?inc32_l0_l0
F638 06 FC 76            JSR ?inc32_l0_l0
F63B 06 FC 76            JSR ?inc32_l0_l0
F63E 06 FC 76            JSR ?inc32_l0_l0
F641 06 FC 76            JSR ?inc32_l0_l0
F644 06 FC 76            JSR ?inc32_l0_l0
F647 06 FC 76            JSR ?inc32_l0_l0
F64A 06 FC 76            JSR ?inc32_l0_l0
F64D 06 FC 76            JSR ?inc32_l0_l0
F650 06 FC 76            JSR ?inc32_l0_l0
F653 06 FC 76            JSR ?inc32_l0_l0
F656 06 FC 76            JSR ?inc32_l0_l0
F659 06 FC 76            JSR ?inc32_l0_l0
F65C 06 FC 76            JSR ?inc32_l0_l0
F65F 06 FC 76            JSR ?inc32_l0_l0
F662 2A 00 0C            LDA ?b3
F665 21 00               TEQA #0x00
F667 2B FF B0            JNE FAIL
F66A 2A 00 0D            LDA ?b2
F66D 21 00               TEQA #0x00
F66F 2B FF B0            JNE FAIL
F672 2A 00 0E            LDA ?b1
F675 21 00               TEQA #0x00
F677 2B FF B0            JNE FAIL
F67A 2A 00 0F            LDA ?b0
F67D 21 12               TEQA #0x12
F67F 2B FF B0            JNE FAIL

                         ; Test  MUL 8-bit
                         ; mul8_w1_b1_b0   w1 (b3,b2) <= b1 * b0
F682 30 45               LDA #0x45
F684 19                  NOTA
F685 31 C0 00            STA LEDPORT ; Output to LED port
F688 30 02               LDA #0x02   ; 3 * 2 = 6
F68A 31 00 0F            STA ?b0
F68D 30 03               LDA #0x03
F68F 31 00 0E            STA ?b1
F692 06 FC C7            JSR ?mul8_w1_b1_b0
F695 2A 00 0C            LDA ?b3
F698 21 00               TEQA #0x00
F69A 2B FF B0            JNE FAIL
F69D 2A 00 0D            LDA ?b2
F6A0 21 06               TEQA #0x06
F6A2 2B FF B0            JNE FAIL

F6A5 30 FF               LDA #0xFF   ; 255 * 255 = 65025 (0xFF * 0xFF = 0xFE01)
F6A7 31 00 0F            STA ?b0
F6AA 31 00 0E            STA ?b1
F6AD 06 FC C7            JSR ?mul8_w1_b1_b0
F6B0 2A 00 0C            LDA ?b3
F6B3 21 FE               TEQA #0xFE
F6B5 2B FF B0            JNE FAIL
F6B8 2A 00 0D            LDA ?b2
F6BB 21 01               TEQA #0x01
F6BD 2B FF B0            JNE FAIL

F6C0 30 AB               LDA #0xAB   ; 171 * 205 = 35055 (0xAB * 0xCD = 0x88EF)
F6C2 31 00 0F            STA ?b0
F6C5 30 CD               LDA #0xCD
F6C7 31 00 0E            STA ?b1
F6CA 06 FC C7            JSR ?mul8_w1_b1_b0
F6CD 2A 00 0C            LDA ?b3
F6D0 21 88               TEQA #0x88
F6D2 2B FF B0            JNE FAIL
F6D5 2A 00 0D            LDA ?b2
F6D8 21 EF               TEQA #0xEF
F6DA 2B FF B0            JNE FAIL

F6DD 30 00               LDA #0x00   ; 0 * 0 = 0 (0x00 * 0x00 = 0x0000)
F6DF 31 00 0F            STA ?b0
F6E2 31 00 0E            STA ?b1
F6E5 06 FC C7            JSR ?mul8_w1_b1_b0
F6E8 2A 00 0C            LDA ?b3
F6EB 21 00               TEQA #0x00
F6ED 2B FF B0            JNE FAIL
F6F0 2A 00 0D            LDA ?b2
F6F3 21 00               TEQA #0x00
F6F5 2B FF B0            JNE FAIL

                         ; Test  MUL 16-bit
                         ; Total time for 3 multiplications 140ms @ 2 MHz
                         ; 46ms per 16bit mult (21.7 multiplications per second)
                         ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
F6F8 30 46               LDA #0x46
F6FA 19                  NOTA
F6FB 31 C0 00            STA LEDPORT ; Output to LED port

F6FE 30 00               LDA #0x00   ; 0 * 0 = 0 (0x0000 * 0x0000 = 0x00000000)
F700 31 00 0F            STA ?b0
F703 31 00 0E            STA ?b1
F706 31 00 0D            STA ?b2
F709 31 00 0C            STA ?b3
F70C 06 FC E8            JSR ?mul16_l1_w1_w0
F70F 2A 00 08            LDA ?b7
F712 21 00               TEQA #0x00
F714 2B FF B0            JNE FAIL
F717 2A 00 09            LDA ?b6
F71A 21 00               TEQA #0x00
F71C 2B FF B0            JNE FAIL
F71F 2A 00 0A            LDA ?b5
F722 21 00               TEQA #0x00
F724 2B FF B0            JNE FAIL
F727 2A 00 0B            LDA ?b4
F72A 21 00               TEQA #0x00
F72C 2B FF B0            JNE FAIL

F72F 30 FF               LDA #0xFF   ; 65535 * 65535 = 4294836225  (0xFFFF * 0xFFFF = 0xFFFE0001)
F731 31 00 0F            STA ?b0
F734 31 00 0E            STA ?b1
F737 31 00 0D            STA ?b2
F73A 31 00 0C            STA ?b3
F73D 06 FC E8            JSR ?mul16_l1_w1_w0
F740 2A 00 08            LDA ?b7
F743 21 FF               TEQA #0xFF
F745 2B FF B0            JNE FAIL
F748 2A 00 09            LDA ?b6
F74B 21 FE               TEQA #0xFE
F74D 2B FF B0            JNE FAIL
F750 2A 00 0A            LDA ?b5
F753 21 00               TEQA #0x00
F755 2B FF B0            JNE FAIL
F758 2A 00 0B            LDA ?b4
F75B 21 01               TEQA #0x01
F75D 2B FF B0            JNE FAIL

F760 30 31               LDA #0x31   ; 12345 * 54321 = 670592745  (0x3039 * 0xD431 = 0x27F86EE9)
F762 31 00 0F            STA ?b0
F765 30 D4               LDA #0xD4
F767 31 00 0E            STA ?b1
F76A 30 39               LDA #0x39
F76C 31 00 0D            STA ?b2
F76F 30 30               LDA #0x30
F771 31 00 0C            STA ?b3
F774 06 FC E8            JSR ?mul16_l1_w1_w0   
F777 2A 00 08            LDA ?b7
F77A 21 27               TEQA #0x27
F77C 2B FF B0            JNE FAIL
F77F 2A 00 09            LDA ?b6
F782 21 F8               TEQA #0xF8
F784 2B FF B0            JNE FAIL
F787 2A 00 0A            LDA ?b5
F78A 21 6E               TEQA #0x6E
F78C 2B FF B0            JNE FAIL
F78F 2A 00 0B            LDA ?b4
F792 21 E9               TEQA #0xE9
F794 2B FF B0            JNE FAIL  

                         ; Test load32_l0, load32_l1, load32_l2, load32_l3
F797 30 47               LDA #0x47
F799 19                  NOTA
F79A 31 C0 00            STA LEDPORT ; Output to LED port
                         ; Test load32_l0
F79D 04 12 34            LDX #0x1234
F7A0 16 15 00            STX 0x1500        ; Store test address
F7A3 04 56 78            LDX #0x5678
F7A6 16 15 02            STX 0x1502        ; Store test address
F7A9 04 15 00            LDX #0x1500       ; Load address of test data
F7AC 06 FA 73            JSR ?load32_l0    ; Load 32-bit value from memory to l0
F7AF 2A 00 0C            LDA ?b3           ; Verify loaded value
F7B2 21 12               TEQA #0x12
F7B4 2B FF B0            JNE FAIL
F7B7 2A 00 0D            LDA ?b2
F7BA 21 34               TEQA #0x34
F7BC 2B FF B0            JNE FAIL
F7BF 2A 00 0E            LDA ?b1
F7C2 21 56               TEQA #0x56
F7C4 2B FF B0            JNE FAIL
F7C7 2A 00 0F            LDA ?b0
F7CA 21 78               TEQA #0x78
F7CC 2B FF B0            JNE FAIL 
F7CF 1A 15 03            CMPX #0x1503      ; also verify current X value
F7D2 2B FF B0            JNE FAIL
                         ; Test load32_l1
F7D5 04 AB CD            LDX #0xABCD
F7D8 16 16 00            STX 0x1600        ; Store test address
F7DB 04 DE AD            LDX #0xDEAD
F7DE 16 16 02            STX 0x1602        ; Store test address
F7E1 04 16 00            LDX #0x1600       ; Load address of test data
F7E4 06 FA 87            JSR ?load32_l1    ; Load 32-bit value from memory to l1
F7E7 2A 00 08            LDA ?b7           ; Verify loaded value
F7EA 21 AB               TEQA #0xAB
F7EC 2B FF B0            JNE FAIL
F7EF 2A 00 09            LDA ?b6
F7F2 21 CD               TEQA #0xCD
F7F4 2B FF B0            JNE FAIL
F7F7 2A 00 0A            LDA ?b5
F7FA 21 DE               TEQA #0xDE
F7FC 2B FF B0            JNE FAIL
F7FF 2A 00 0B            LDA ?b4
F802 21 AD               TEQA #0xAD
F804 2B FF B0            JNE FAIL 
F807 1A 16 03            CMPX #0x1603      ; also verify current X value
F80A 2B FF B0            JNE FAIL
                         ; Test load32_l2
F80D 04 1A 2B            LDX #0x1A2B
F810 16 17 00            STX 0x1700        ; Store test address
F813 04 3C 4D            LDX #0x3C4D
F816 16 17 02            STX 0x1702        ; Store test address
F819 04 17 00            LDX #0x1700       ; Load address of test data
F81C 06 FA 9B            JSR ?load32_l2    ; Load 32-bit value from memory to l2
F81F 2A 00 04            LDA ?b11          ; Verify loaded value
F822 21 1A               TEQA #0x1A
F824 2B FF B0            JNE FAIL
F827 2A 00 05            LDA ?b10
F82A 21 2B               TEQA #0x2B
F82C 2B FF B0            JNE FAIL
F82F 2A 00 06            LDA ?b9
F832 21 3C               TEQA #0x3C
F834 2B FF B0            JNE FAIL
F837 2A 00 07            LDA ?b8
F83A 21 4D               TEQA #0x4D
F83C 2B FF B0            JNE FAIL 
F83F 1A 17 03            CMPX #0x1703      ; also verify current X value
F842 2B FF B0            JNE FAIL
                         ; Test load32_l3
F845 04 2F 3E            LDX #0x2F3E
F848 16 18 00            STX 0x1800        ; Store test address
F84B 04 4D 5C            LDX #0x4D5C
F84E 16 18 02            STX 0x1802        ; Store test address
F851 04 18 00            LDX #0x1800       ; Load address of test data
F854 06 FA AF            JSR ?load32_l3    ; Load 32-bit value from memory to l3
F857 2A 00 00            LDA ?b15          ; Verify loaded value
F85A 21 2F               TEQA #0x2F
F85C 2B FF B0            JNE FAIL
F85F 2A 00 01            LDA ?b14
F862 21 3E               TEQA #0x3E
F864 2B FF B0            JNE FAIL
F867 2A 00 02            LDA ?b13
F86A 21 4D               TEQA #0x4D
F86C 2B FF B0            JNE FAIL
F86F 2A 00 03            LDA ?b12
F872 21 5C               TEQA #0x5C
F874 2B FF B0            JNE FAIL 
F877 1A 18 03            CMPX #0x1803      ; also verify current X value
F87A 2B FF B0            JNE FAIL         

                         ; ---------------------
                         ; END Math Library Test
                         ; ---------------------

                               ; TEST EXECUTION FROM RAM
                               ; Copy a block of code from EEPROM to RAM
                               ; then call to execute this block in RAM. Resume execution from EEPROM
F87D 30 80                     LDA #0x80
F87F 19                        NOTA
F880 31 C0 00                  STA LEDPORT ; Output to LED port
F883 32 F8 A4                  JMP BLKCODEEND   ; We skip the nex block of code to be copied in RAM
                               ; Simple 8 bit multiplication test code
F886 30 56      BLKCODESTART   LDA #0x56   ; 86 * 171 = 14706   (0x56 * 0xAB = 0x3972)
F888 31 00 0F                  STA ?b0
F88B 30 AB                     LDA #0xAB
F88D 31 00 0E                  STA ?b1
F890 06 FC C7                  JSR ?mul8_w1_b1_b0
F893 2A 00 0C                  LDA ?b3
F896 21 39                     TEQA #0x39
F898 2B FF B0                  JNE FAIL
F89B 2A 00 0D                  LDA ?b2
F89E 21 72                     TEQA #0x72
F8A0 2B FF B0                  JNE FAIL
F8A3 07                        RTS
                               ; Copy the Block of code from EEPROM to RAM
F8A4 04 F8 86   BLKCODEEND     LDX #BLKCODESTART ; Load address of BLKCODESTART
F8A7 16 00 0E                  STX ?b1           ; Store this adddress in ?b1:?b0
                RAMDESTSTART   EQU 0x1000
F8AA 04 10 00                  LDX #RAMDESTSTART ; Load address of RAM destination
F8AD 16 00 0C                  STX ?b3           ; Store this adddress in ?b3:?b2
                               ; copy a byte from source to destination
F8B0 1B 0E      LOOPTST47      LDX ?b1           ; Load X with source address in ?b1:?b0
F8B2 1A F8 A4                  CMPX #BLKCODEEND  ; Check if last byte copied
F8B5 2C F8 C6                  JEQ ENDCOPYTST47  ; if yes then quit copy loop
F8B8 0A                        LDA (X)           ; Load byte pointed by X
F8B9 05                        INCX
F8BA 16 00 0E                  STX ?b1
F8BD 1B 0C                     LDX ?b3           ; Load X with destination address in ?b3:?b2
F8BF 0B                        STA (X)           ; Store byte to address pointed by X
F8C0 05                        INCX
F8C1 16 00 0C                  STX ?b3
F8C4 0C EA                     JRA LOOPTST47
F8C6 06 10 00   ENDCOPYTST47   JSR RAMDESTSTART ; Jump to ram for code execution

                            ; ---------------------------------------
                            ; 32-bit Fibonacci using library routines
                            ; l2 = F(n), l1 = F(n-1), l0 = F(n-2)
                            ; ---------------------------------------
F8C9 30 81                  LDA #0x81
F8CB 19                     NOTA
F8CC 31 C0 00               STA LEDPORT
                LOOPCNT     EQU 0x0100           ; Loop counter storage
                FIBNUMB     EQU 0x1000           ; Output buffer for Fibonacci numbers
                            ; Initialize Fibonacci state
F8CF 06 F9 CD               JSR ?clear32_l0      ; F(0) = 0
F8D2 06 FA 62               JSR ?set32_l1_to_1   ; F(1) = 1
F8D5 06 F9 EB               JSR ?clear32_l2
                            ; Output buffer
F8D8 04 10 00               LDX #FIBNUMB
F8DB 06 FA C3               JSR ?store32_l0      ; F(0)
F8DE 05                     INCX                 ; advance to next 32-bit slot
F8DF 06 FA D7               JSR ?store32_l1      ; F(1)
F8E2 05                     INCX                 ; advance to next 32-bit slot
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
F8E3 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
F8E5 31 01 00               STA LOOPCNT
F8E8 06 FC 2C   FIB32_LOOP  JSR ?add32_l2_l1_l0  ; l2 = l1 + l0
F8EB 06 FA EB               JSR ?store32_l2      ; store F(n)
F8EE 05                     INCX                 ; advance to next 32-bit slot
                            ; rotate registers
F8EF 06 FB 5E               JSR ?mov32_l0_l1     ; l0 = l1
F8F2 06 FB C2               JSR ?mov32_l1_l2     ; l1 = l2
                            ;  DEC LOOPCNT    ; i dont have a DEC direct instruction for now
F8F5 2A 01 00               LDA LOOPCNT
F8F8 20                     DECA
F8F9 31 01 00               STA LOOPCNT
F8FC 21 00                  TEQA #0x00
F8FE 2B F8 E8               JNE FIB32_LOOP
                            ; End of fibonacci number computation
                            ; Verify Fibonacci numbers stored in memory
F901 30 82                  LDA #0x82
F903 19                     NOTA
F904 31 C0 00               STA LEDPORT             
                            ; Memory layout:
                            ;   FIBNUMB: F(0), F(1), F(2), ...
                            ; Registers:
                            ;   l0 = previous-previous (F(n-2))
                            ;   l1 = previous          (F(n-1))
                            ;   l2 = current from mem  (F(n))
                            ;-----------------------------------------------
F907 04 10 00   FIB_VERIFY  LDX #FIBNUMB         ; pointer to first Fibonacci number
                            ; Load first two Fibonacci numbers from memory
F90A 06 FA 73               JSR ?load32_l0       ; l0 = F(0)
F90D 05                     INCX  
F90E 06 FA 87               JSR ?load32_l1       ; l1 = F(1)
F911 05                     INCX  
                            ; Loop counter
                            ; F(47)=2,971,215,073  fit in 32 bits
                            ; F(48)=4,807,526,976  exceed 32 bits
F912 30 2D                  LDA #0x2D   ; 47 - 2 = 45  iterations (0x2D)
F914 31 01 00               STA LOOPCNT
F917 06 FA 9B   VERIFY_LOOP JSR ?load32_l2       ; Load next Fibonacci number from memory into l2
F91A 05                     INCX  
F91B 06 FC 51               JSR ?add32_l3_l1_l0  ; Compute sum l0 + l1  l3
F91E 06 FC 9C               JSR ?cmp32_l3_l2     ; Compare computed sum with loaded number
F921 2B FF B0               JNE FAIL
F924 06 FB 5E               JSR ?mov32_l0_l1     ; Rotate registers for next iteration
F927 06 FB C2               JSR ?mov32_l1_l2
F92A 2A 01 00               LDA LOOPCNT          ; Decrement loop counter
F92D 2F FF                  ADDA #0xFF         ; decrement
F92F 31 01 00               STA LOOPCNT
F932 21 00                  TEQA #0x00
F934 2B F9 17               JNE VERIFY_LOOP
                            ; End of fibonacci number verification


                            ; ---------------------------------------
                            ; 32-bit Factorial using library routines
                            ; ---------------------------------------
                ;            LDA #0x83
                ;            NOTA
                ;            STA LEDPORT
                ; Define factorial table in memory
                ;FACTTAB     EQU 0x2000
                ;COUNT       EQU 0x00FF   ; Counter storage
                ;FACT_GEN:      LDX #FACTTAB
                ;               ; 0! = 1
                ;               LDA #1
                ;               STA ?b0
                ;               CLR ?b1
                ;               CLR ?b2
                ;               CLR ?b3
                ;               JSR ?store32_l0

                ;               LDA #1
                ;               STA COUNT          ; n = 1

                ;FACT_GEN_LOOP: LDA COUNT
                ;               JSR ?mul32_l1_l0_u8   ; l1 = l0 * n
                ;               JSR ?store32_l1
                ;               JSR ?mov32_l0_l1

                ;               INC COUNT
                ;               LDA COUNT
                ;               CMPA #13
                ;               BNE FACT_GEN_LOOP

                ;                RTS


                ;fact[n] == fact[n-1] * n

                ;FACT_VERIFY:      LDX #FACTTAB
                ;
                ;                  JSR ?load32_l0    ; 0!
                ;                  JSR ?load32_l1    ; 1!

                ;                  LDA #2
                ;                  STA COUNT

                ;FACT_VERIFY_LOOP: JSR ?load32_l2    ; fact[n]
                ;                  LDA COUNT
                ;                  JSR ?mul32_l3_l1_u8
                ;                  JSR ?cmp32_l3_l2
                ;                  JNE FAIL
                ;
                ;                  JSR ?mov32_l0_l1
                ;                  JSR ?mov32_l1_l2

                ;                  INC COUNT
                ;                  LDA COUNT
                ;                  CMPA #13
                ;                  BNE FACT_VERIFY_LOOP

                ;                  RTS

                         ; LCD TEST        
F937 06 FD 1E            JSR LCD_Init
F93A 06 FD 3A            JSR LCD_Clear
F93D 04 00 00            LDX #0x0000    ; set cursor to first line and print message
F940 06 FD 46            JSR LCD_SetCursorPos
F943 04 F9 7E            LDX #MSGTXT2
F946 06 FD 61            JSR LCD_PrintString
F949 04 01 00            LDX #0x0100    ; set cursor to second line and print message
F94C 06 FD 46            JSR LCD_SetCursorPos
F94F 04 F9 C7            LDX #MSGTXT4
F952 06 FD 61            JSR LCD_PrintString
                         ; make some movement on the lcd to show diagnostic still running
                         ; use 3 LSB of diagnostic counter to move an asterisk on second line
                         ; between position 8 and 15
F955 2A 01 E0            LDA DIAGLOOPCOUNTER
F958 33 07               ANDA #0x07          ; mask to 3 LSB (0..7)
F95A 2F 08               ADDA #0x08          ; offset to position 8..15
F95C 31 1F F4            STA XL              ; XL = column
F95F 30 01               LDA #0x01
F961 31 1F F3            STA XH              ; XH = line 1 (second line)
F964 06 FD 46            JSR LCD_SetCursorPos
F967 30 2A               LDA #0x2A           ; ASCII '*'
F969 06 FD 5D            JSR LCD_WriteChar
                         ; End of LCD TEST

                         ; increment diagnostic counter to indicate successful completion
F96C 2A 01 E0            LDA DIAGLOOPCOUNTER
F96F 2F 01               ADDA #0x01
F971 31 01 E0            STA DIAGLOOPCOUNTER

F974 32 E0 05            JMP LOOPDIAG         ; Diagnostic loop
                ; END OF MAIN PROGRAM

                         ; ---------------
                         ; Data Section
                         ; ---------------
                         ; Start of data section in EEPROM

                         ; ASCII text table for test
F977 31 32 33 41 42 43 00                             MSGTXT1        .ASCII "123ABC"
F97E 48 65 6C 6C 6F 20 57 6F 72 6C 64 00              MSGTXT2        .ASCII "Hello World"
F98A 54 68 69 73 20 69 73 20 61 20 74 65 78 74 20 6D  
     65 73 73 61 67 65 20 74 6F 20 74 65 73 74 20 61  
     73 63 69 69 20 74 65 78 74 20 74 61 62 6C 65 20  
     69 6E 20 61 73 73 65 6D 62 6C 65 72 00           MSGTXT3        .ASCII "This is a text message to test ascii text table in assembler"
F9C7 4D 79 43 50 55 00                                MSGTXT4        .ASCII "MyCPU"

                         ; ---------------------
                         ; Math library routines
                         ; ---------------------
                         ; virtual registers
                ;-----------------------------------------------------------------------------
                ; ?b15 ?b14 ?b13 ?b12 | ?b11 ?b10 ?b9 ?b8 | ?b7 ?b6 ?b5 ?b4 | ?b3 ?b2 ?b1 ?b0 |  8 bits
                ;    ?w7       ?w6    |    ?w5      ?w4   |   ?w3     ?w2   |   ?w1     ?w0   | 16 bits
                ;         ?l3         |         ?l2       |       ?l1       |       ?l0       | 32 bits
                ;-----------------------------------------------------------------------------
                                  ; Clear 32bits
F9CD 30 00      ?clear32_l0       LDA #0x00
F9CF 31 00 0F                     STA ?b0
F9D2 31 00 0E                     STA ?b1
F9D5 31 00 0D                     STA ?b2
F9D8 31 00 0C                     STA ?b3
F9DB 07                           RTS
F9DC 30 00      ?clear32_l1       LDA #0x00
F9DE 31 00 0B                     STA ?b4
F9E1 31 00 0A                     STA ?b5
F9E4 31 00 09                     STA ?b6
F9E7 31 00 08                     STA ?b7
F9EA 07                           RTS   
F9EB 30 00      ?clear32_l2       LDA #0x00
F9ED 31 00 07                     STA ?b8
F9F0 31 00 06                     STA ?b9
F9F3 31 00 05                     STA ?b10
F9F6 31 00 04                     STA ?b11
F9F9 07                           RTS
F9FA 30 00      ?clear32_l3       LDA #0x00
F9FC 31 00 03                     STA ?b12
F9FF 31 00 02                     STA ?b13
FA02 31 00 01                     STA ?b14
FA05 31 00 00                     STA ?b15
FA08 07                           RTS
                                  ; Clear 16bits
FA09 30 00      ?clear16_w0       LDA #0x00
FA0B 31 00 0F                     STA ?b0
FA0E 31 00 0E                     STA ?b1
FA11 07                           RTS
FA12 30 00      ?clear16_w1       LDA #0x00
FA14 31 00 0D                     STA ?b2
FA17 31 00 0C                     STA ?b3
FA1A 07                           RTS
FA1B 30 00      ?clear16_w2       LDA #0x00
FA1D 31 00 0B                     STA ?b4
FA20 31 00 0A                     STA ?b5
FA23 07                           RTS
FA24 30 00      ?clear16_w3       LDA #0x00
FA26 31 00 09                     STA ?b6
FA29 31 00 08                     STA ?b7
FA2C 07                           RTS
FA2D 30 00      ?clear16_w4       LDA #0x00
FA2F 31 00 07                     STA ?b8
FA32 31 00 06                     STA ?b9     
FA35 07                           RTS
FA36 30 00      ?clear16_w5       LDA #0x00
FA38 31 00 05                     STA ?b10
FA3B 31 00 04                     STA ?b11
FA3E 07                           RTS
FA3F 30 00      ?clear16_w6       LDA #0x00
FA41 31 00 03                     STA ?b12
FA44 31 00 02                     STA ?b13
FA47 07                           RTS
FA48 30 00      ?clear16_w7       LDA #0x00
FA4A 31 00 01                     STA ?b14
FA4D 31 00 00                     STA ?b15
FA50 07                           RTS
                                  ; Set 32bits to 1
FA51 30 01      ?set32_l0_to_1    LDA #0x01
FA53 31 00 0F                     STA ?b0
FA56 30 00                        LDA #0x00
FA58 31 00 0E                     STA ?b1
FA5B 31 00 0D                     STA ?b2
FA5E 31 00 0C                     STA ?b3
FA61 07                           RTS
FA62 30 01      ?set32_l1_to_1    LDA #0x01
FA64 31 00 0B                     STA ?b4
                                  ;CLR ?b5    ; I dont have a page 0 clear instruction yet
                                  ;CLR ?b6
                                  ;CLR ?b7
FA67 30 00                        LDA #0x00
FA69 31 00 0A                     STA ?b5
FA6C 31 00 09                     STA ?b6
FA6F 31 00 08                     STA ?b7
FA72 07                           RTS                  
                                  ; Load 32bits l0 using X register as pointer
FA73 0A         ?load32_l0        LDA (X)
FA74 31 00 0C                     STA ?b3
FA77 05                           INCX
FA78 0A                           LDA (X)
FA79 31 00 0D                     STA ?b2
FA7C 05                           INCX
FA7D 0A                           LDA (X)
FA7E 31 00 0E                     STA ?b1
FA81 05                           INCX
FA82 0A                           LDA (X)
FA83 31 00 0F                     STA ?b0
FA86 07                           RTS
                                  ; Load 32bits l1 using X register as pointer
FA87 0A         ?load32_l1        LDA (X)
FA88 31 00 08                     STA ?b7
FA8B 05                           INCX
FA8C 0A                           LDA (X)
FA8D 31 00 09                     STA ?b6
FA90 05                           INCX
FA91 0A                           LDA (X)
FA92 31 00 0A                     STA ?b5
FA95 05                           INCX
FA96 0A                           LDA (X)
FA97 31 00 0B                     STA ?b4
FA9A 07                           RTS
                                  ; Load 32bits l2 using X register as pointer
FA9B 0A         ?load32_l2        LDA (X)
FA9C 31 00 04                     STA ?b11
FA9F 05                           INCX
FAA0 0A                           LDA (X)
FAA1 31 00 05                     STA ?b10
FAA4 05                           INCX
FAA5 0A                           LDA (X)
FAA6 31 00 06                     STA ?b9
FAA9 05                           INCX
FAAA 0A                           LDA (X)
FAAB 31 00 07                     STA ?b8
FAAE 07                           RTS
                                  ; Load 32bits l3 using X register as pointer
FAAF 0A         ?load32_l3        LDA (X)
FAB0 31 00 00                     STA ?b15
FAB3 05                           INCX
FAB4 0A                           LDA (X)
FAB5 31 00 01                     STA ?b14
FAB8 05                           INCX
FAB9 0A                           LDA (X)
FABA 31 00 02                     STA ?b13
FABD 05                           INCX
FABE 0A                           LDA (X)
FABF 31 00 03                     STA ?b12
FAC2 07                           RTS                   
                                  ; Store 32bits l0 using X register as pointer
FAC3 2A 00 0C   ?store32_l0       LDA ?b3
FAC6 0B                           STA (X)
FAC7 05                           INCX
FAC8 2A 00 0D                     LDA ?b2
FACB 0B                           STA (X)
FACC 05                           INCX
FACD 2A 00 0E                     LDA ?b1
FAD0 0B                           STA (X)
FAD1 05                           INCX
FAD2 2A 00 0F                     LDA ?b0
FAD5 0B                           STA (X)
FAD6 07                           RTS
                                  ; Store 32bits l1 using X register as pointer
FAD7 2A 00 08   ?store32_l1       LDA ?b7
FADA 0B                           STA (X)
FADB 05                           INCX
FADC 2A 00 09                     LDA ?b6
FADF 0B                           STA (X)
FAE0 05                           INCX
FAE1 2A 00 0A                     LDA ?b5
FAE4 0B                           STA (X)
FAE5 05                           INCX
FAE6 2A 00 0B                     LDA ?b4
FAE9 0B                           STA (X)
FAEA 07                           RTS
                                  ; Store 32bits l2 using X register as pointer
FAEB 2A 00 04   ?store32_l2       LDA ?b11
FAEE 0B                           STA (X)
FAEF 05                           INCX
FAF0 2A 00 05                     LDA ?b10
FAF3 0B                           STA (X)
FAF4 05                           INCX
FAF5 2A 00 06                     LDA ?b9
FAF8 0B                           STA (X)
FAF9 05                           INCX
FAFA 2A 00 07                     LDA ?b8
FAFD 0B                           STA (X)
FAFE 07                           RTS
                                  ; Store 32bits l3 using X register as pointer
FAFF 2A 00 00   ?store32_l3       LDA ?b15
FB02 0B                           STA (X)
FB03 05                           INCX
FB04 2A 00 01                     LDA ?b14
FB07 0B                           STA (X)  
FB08 05                           INCX
FB09 2A 00 02                     LDA ?b13
FB0C 0B                           STA (X)
FB0D 05                           INCX
FB0E 2A 00 03                     LDA ?b12
FB11 0B                           STA (X)
FB12 07                           RTS
                                  ; Move 32 bits from l0 to l1
FB13 2A 00 0C   ?mov32_l1_l0      LDA ?b3
FB16 31 00 08                     STA ?b7
FB19 2A 00 0D                     LDA ?b2
FB1C 31 00 09                     STA ?b6
FB1F 2A 00 0E                     LDA ?b1
FB22 31 00 0A                     STA ?b5
FB25 2A 00 0F                     LDA ?b0
FB28 31 00 0B                     STA ?b4
FB2B 07                           RTS
                                  ; Move 32 bits from l0 to l2
FB2C 2A 00 0C   ?mov32_l2_l0      LDA ?b3
FB2F 31 00 04                     STA ?b11
FB32 2A 00 0D                     LDA ?b2
FB35 31 00 05                     STA ?b10
FB38 2A 00 0E                     LDA ?b1
FB3B 31 00 06                     STA ?b9
FB3E 2A 00 0F                     LDA ?b0
FB41 31 00 07                     STA ?b8
FB44 07                           RTS
                                  ; Move 32 bits from l0 to l3
FB45 2A 00 0C   ?mov32_l3_l0      LDA ?b3
FB48 31 00 00                     STA ?b15
FB4B 2A 00 0D                     LDA ?b2
FB4E 31 00 01                     STA ?b14
FB51 2A 00 0E                     LDA ?b1
FB54 31 00 02                     STA ?b13
FB57 2A 00 0F                     LDA ?b0
FB5A 31 00 03                     STA ?b12
FB5D 07                           RTS
                                  ; Move 32 bits from l1 to l0
FB5E 2A 00 08   ?mov32_l0_l1      LDA ?b7
FB61 31 00 0C                     STA ?b3
FB64 2A 00 09                     LDA ?b6
FB67 31 00 0D                     STA ?b2
FB6A 2A 00 0A                     LDA ?b5
FB6D 31 00 0E                     STA ?b1
FB70 2A 00 0B                     LDA ?b4
FB73 31 00 0F                     STA ?b0
FB76 07                           RTS
                                  ; Move 32 bits from l1 to l2
FB77 2A 00 08   ?mov32_l2_l1      LDA ?b7
FB7A 31 00 04                     STA ?b11
FB7D 2A 00 09                     LDA ?b6
FB80 31 00 05                     STA ?b10
FB83 2A 00 0A                     LDA ?b5
FB86 31 00 06                     STA ?b9
FB89 2A 00 0B                     LDA ?b4
FB8C 31 00 07                     STA ?b8
FB8F 07                           RTS
                                  ; Move 32 bits from l1 to l3
FB90 2A 00 08   ?mov32_l3_l1      LDA ?b7
FB93 31 00 00                     STA ?b15
FB96 2A 00 09                     LDA ?b6
FB99 31 00 01                     STA ?b14
FB9C 2A 00 0A                     LDA ?b5
FB9F 31 00 02                     STA ?b13
FBA2 2A 00 0B                     LDA ?b4
FBA5 31 00 03                     STA ?b12
FBA8 07                           RTS
                                  ; Move 32 bits from l2 to l0
FBA9 2A 00 04   ?mov32_l0_l2      LDA ?b11
FBAC 31 00 0C                     STA ?b3
FBAF 2A 00 05                     LDA ?b10
FBB2 31 00 0D                     STA ?b2
FBB5 2A 00 06                     LDA ?b9
FBB8 31 00 0E                     STA ?b1
FBBB 2A 00 07                     LDA ?b8
FBBE 31 00 0F                     STA ?b0
FBC1 07                           RTS
                                  ; Move 32 bits from l2 to l1
FBC2 2A 00 04   ?mov32_l1_l2      LDA ?b11
FBC5 31 00 08                     STA ?b7
FBC8 2A 00 05                     LDA ?b10
FBCB 31 00 09                     STA ?b6
FBCE 2A 00 06                     LDA ?b9
FBD1 31 00 0A                     STA ?b5
FBD4 2A 00 07                     LDA ?b8
FBD7 31 00 0B                     STA ?b4
FBDA 07                           RTS
                                  ; Move 32 bits from l2 to l3
FBDB 2A 00 04   ?mov32_l3_l2      LDA ?b11
FBDE 31 00 00                     STA ?b15
FBE1 2A 00 05                     LDA ?b10
FBE4 31 00 01                     STA ?b14
FBE7 2A 00 06                     LDA ?b9
FBEA 31 00 02                     STA ?b13
FBED 2A 00 07                     LDA ?b8
FBF0 31 00 03                     STA ?b12
FBF3 07                           RTS
                                  ; Addition on 16 bits  
                                  ; w0 <= w0 + w1
FBF4 2A 00 0F   ?add16_w0_w0_w1   LDA ?b0  
FBF7 29 00 0D                     ADDA ?b2
FBFA 31 00 0F                     STA ?b0
FBFD 2A 00 0E                     LDA ?b1
FC00 28 00 0C                     ADCA ?b3
FC03 31 00 0E                     STA ?b1
FC06 07                           RTS
                                  ; Addition on 32 bits
                                  ; l0 <= l0 + l1
FC07 2A 00 0F   ?add32_l0_l0_l1   LDA ?b0  
FC0A 29 00 0B                     ADDA ?b4
FC0D 31 00 0F                     STA ?b0
FC10 2A 00 0E                     LDA ?b1
FC13 28 00 0A                     ADCA ?b5
FC16 31 00 0E                     STA ?b1
FC19 2A 00 0D                     LDA ?b2
FC1C 28 00 09                     ADCA ?b6
FC1F 31 00 0D                     STA ?b2
FC22 2A 00 0C                     LDA ?b3
FC25 28 00 08                     ADCA ?b7
FC28 31 00 0C                     STA ?b3
FC2B 07                           RTS
                                  ; l2 <= l1 + l0
FC2C 2A 00 0F   ?add32_l2_l1_l0   LDA ?b0  
FC2F 29 00 0B                     ADDA ?b4
FC32 31 00 07                     STA ?b8
FC35 2A 00 0E                     LDA ?b1
FC38 28 00 0A                     ADCA ?b5
FC3B 31 00 06                     STA ?b9
FC3E 2A 00 0D                     LDA ?b2
FC41 28 00 09                     ADCA ?b6
FC44 31 00 05                     STA ?b10
FC47 2A 00 0C                     LDA ?b3
FC4A 28 00 08                     ADCA ?b7
FC4D 31 00 04                     STA ?b11
FC50 07                           RTS
                                  ; l3 <= l1 + l0
FC51 2A 00 0F   ?add32_l3_l1_l0   LDA ?b0
FC54 29 00 0B                     ADDA ?b4
FC57 31 00 03                     STA ?b12
FC5A 2A 00 0E                     LDA ?b1
FC5D 28 00 0A                     ADCA ?b5
FC60 31 00 02                     STA ?b13
FC63 2A 00 0D                     LDA ?b2
FC66 28 00 09                     ADCA ?b6
FC69 31 00 01                     STA ?b14
FC6C 2A 00 0C                     LDA ?b3
FC6F 28 00 08                     ADCA ?b7
FC72 31 00 00                     STA ?b15
FC75 07                           RTS                  
                                  ; INC 32 bit
                                  ; l0 <= l0 + 1
FC76 2A 00 0F   ?inc32_l0_l0      LDA ?b0
FC79 03                           INCA
FC7A 31 00 0F                     STA ?b0
FC7D 2B FC 9B                     JNE ?inc32_0x_0x_JP
FC80 2A 00 0E                     LDA ?b1
FC83 03                           INCA
FC84 31 00 0E                     STA ?b1
FC87 2B FC 9B                     JNE ?inc32_0x_0x_JP
FC8A 2A 00 0D                     LDA ?b2
FC8D 03                           INCA
FC8E 31 00 0D                     STA ?b2
FC91 2B FC 9B                     JNE ?inc32_0x_0x_JP
FC94 2A 00 0C                     LDA ?b3
FC97 03                           INCA
FC98 31 00 0C                     STA ?b3
FC9B 07         ?inc32_0x_0x_JP   RTS

                                  ; Compare 32-bit registers
                                  ; Result: sets E flag if equal, clears if different
FC9C 2A 00 07   ?cmp32_l3_l2      LDA ?b8
FC9F 1F 00 03                     CMPA ?b12      ; This instruction not available yet
FCA2 2B FC C1                     JNE ?cmp32_not_equal
FCA5 2A 00 06                     LDA ?b9
FCA8 1F 00 02                     CMPA ?b13
FCAB 2B FC C1                     JNE ?cmp32_not_equal
FCAE 2A 00 05                     LDA ?b10
FCB1 1F 00 01                     CMPA ?b14
FCB4 2B FC C1                     JNE ?cmp32_not_equal
FCB7 2A 00 04                     LDA ?b11
FCBA 1F 00 00                     CMPA ?b15
FCBD 2B FC C1                     JNE ?cmp32_not_equal
                                  ; All bytes equal, E flag already set from last comparison
FCC0 07                           RTS
FCC1 30 00      ?cmp32_not_equal  LDA #0x00   ; Clear E flag    I dont have a direct way to clear E flag
FCC3 31 00 0F                     STA ?b0
FCC6 07                           RTS

                                  ; MUL 8-bit
                                  ; w1 (b3,b2) <= b1 * b0
FCC7 30 00      ?mul8_w1_b1_b0    LDA #0x00   ; Only clear ?b3
FCC9 31 00 0C                     STA ?b3
FCCC 04 00 08                     LDX #0x0008 ; Loop counter (8 bits)
FCCF 15 00 0F   ?mul8_w1_b1_loop  SRL ?b0     ; Shift right ?b0 (check LSB)
FCD2 0F 09                        JRNC ?mul8_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FCD4 2A 00 0C                     LDA ?b3
FCD7 29 00 0E                     ADDA ?b1    ; Add multiplicand
FCDA 31 00 0C                     STA ?b3     ; Store back
FCDD 14 00 0C   ?mul8_skip_add    RRC ?b3     ; Shift right ?b3 ?b2   C -> 7 6 5 4 3 2 1 0 -> C
FCE0 14 00 0D                     RRC ?b2     ;                       C -> 7 6 5 4 3 2 1 0 -> C
FCE3 13                           DECXL       ; Decrement loop counter
FCE4 2B FC CF                     JNE ?mul8_w1_b1_loop
FCE7 07                           RTS

                                  ; MUL 16-bit
                                  ; l1 <= w1 * w0      (b7,b6,b5,b4) = (b3,b2) * (b1,b0)
FCE8 30 00      ?mul16_l1_w1_w0   LDA #0x00   ; Only clear ?b7 and ?b6
FCEA 31 00 08                     STA ?b7
FCED 31 00 09                     STA ?b6
FCF0 04 00 10                     LDX #0x0010 ; Loop counter (16 bits)
FCF3 15 00 0E   ?mul16_l1_w1_loop SRL ?b1     ; Shift right ?w0 (check LSB)  '0' -> 7 6 5 4 3 2 1 0 -> C
FCF6 14 00 0F                     RRC ?b0     ; C  -> 7 6 5 4 3 2 1 0 -> C
FCF9 0F 12                        JRNC ?mul16_skip_add  ; Conditional relative jump if not Carry ( If LSB was 0, skip addition)
FCFB 2A 00 09                     LDA ?b6
FCFE 29 00 0D                     ADDA ?b2    ; Add multiplicand
FD01 31 00 09                     STA ?b6     ; Store back
FD04 2A 00 08                     LDA ?b7
FD07 28 00 0C                     ADCA ?b3
FD0A 31 00 08                     STA ?b7
FD0D 14 00 08   ?mul16_skip_add   RRC ?b7     ; Shift right ?b7 ?b6 ?b5 ?b4   C -> 7 6 5 4 3 2 1 0 -> C 
FD10 14 00 09                     RRC ?b6     ;                               C -> 7 6 5 4 3 2 1 0 -> C
FD13 14 00 0A                     RRC ?b5
FD16 14 00 0B                     RRC ?b4
FD19 13                           DECXL       ; Decrement loop counter
FD1A 2B FC F3                     JNE ?mul16_l1_w1_loop
FD1D 07                           RTS


                                  ; MUL 32-bit by 8-bit unsigned
                                  ; l1 = l0 * A   (A = 8-bit multiplier, A <= 12)
                                  ; l0 = (b3,b2,b1,b0)
                                  ; result -> l1 = (b7..b4)
                ;?mul32_l1_l0_u8   ; ---- multiply LOW word ----
                ;                  STA TMPN          ; save multiplier

                ;                  LDA ?b0
                ;                  STA ?b0           ; w0 low
                ;                  LDA ?b1
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2           ; w1 = n
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = LO16 * n

                                  ; save low result
                ;                  LDA ?b4
                ;                  STA RES0
                ;                  LDA ?b5
                ;                  STA RES1

                                  ; ---- multiply HIGH word ----
                ;                  LDA ?b2           ; restore high word of l0
                ;                  STA ?b0
                ;                  LDA ?b3
                ;                  STA ?b1

                ;                  LDA TMPN
                ;                  STA ?b2
                ;                  LDA #0
                ;                  STA ?b3

                ;                  JSR ?mul16_l1_w1_w0   ; l1 = HI16 * n

                                  ; ---- accumulate ----
                ;                  LDA ?b4
                ;                  ADDA RES1
                ;                  STA ?b5
                ;                  LDA ?b5
                ;                  ADCA #0
                ;                  STA ?b6
                ;                  LDA ?b6
                ;                  ADCA #0
                ;                  STA ?b7

                ;                  LDA RES0
                ;                  STA ?b4

                ;                  RTS


                ;--------------------------------------------
                ; LCD Main Initialization Routine
                ;--------------------------------------------
FD1E 30 FF      LCD_Init    LDA #0xFF         ; Wait >40ms (simple busy loop)
FD20 20         Delay40ms   DECA
FD21 2B FD 20               JNE Delay40ms

                            ; Function set: 8-bit, 2 line, 5x8 font
                            ; <5> 1
                            ; <4> DL = 1  0: 4-bit inteface, 1:8-bit interface
                            ; <3> N = 1   0: 1 Line, 1: 2 Lines
                            ; <2> F = 0   0: FONT_5x8, 1: FONT_5x10
                            ; <1> -  -
                            ; <0> -  -
FD24 30 38                  LDA #0x38
FD26 31 7C 00               STA LCD_CMD

                            ; Wait >4.1ms
FD29 30 F0                  LDA #0xF0
FD2B 20         Delay4ms    DECA
FD2C 2B FD 2B               JNE Delay4ms

                            ; Display ON/OFF Control
                            ; Display ON, cursor OFF, blink OFF
                            ; <3> 1
                            ; <2> D = 1  Display ON/OFF Control 0:OFF, 1:ON
                            ; <1> C = 0  Cursor displayed 0:OFF, 1:ON
                            ; <0> B = 0  Blinking of cursor position character 0:OFF, 1:ON
FD2F 30 0C                  LDA #0x0C
FD31 31 7C 00               STA LCD_CMD

                            ; Entry mode set
                            ; Entry mode: left-to-right, no shift
                            ; <2> 1
                            ; <1> I/D = 1  Increment/Decrement of DDRAM address 1: Increment, 0: Decrement
                            ; <0> S = 0    
FD34 30 06                  LDA #0x06
FD36 31 7C 00               STA LCD_CMD
FD39 07                     RTS

                ;--------------------------------------------
                ; Clear display
                ;--------------------------------------------
FD3A 30 01      LCD_Clear   LDA #0x01      ; Clear display command; <0> = 1
FD3C 31 7C 00               STA LCD_CMD
FD3F 30 FF                  LDA #0xFF      ; Wait >1.5ms (for clear command)
FD41 20         DelayClear  DECA
FD42 2B FD 41               JNE DelayClear
FD45 07                     RTS

                ;--------------------------------------------
                ; Set LCD Cursor Position
                ; Input:
                ;   XH = line (0 or 1)
                ;   XL = column (0..15)
                ;--------------------------------------------
FD46 2A 1F F3   LCD_SetCursorPos  LDA XH      
FD49 21 00                        TEQA #0x00
FD4B 2C FD 52                     JEQ LCD_Row0
FD4E 30 40                        LDA #0x40         ; Row 1, DDRAM base address line 1
FD50 0C 02                        JRA LCD_AddCol
FD52 30 00      LCD_Row0          LDA #0x00         ; DDRAM base address line 0
FD54 29 1F F4   LCD_AddCol        ADDA XL           ; A = base + column
FD57 17 80                        ORA #0x80         ; Set DDRAM address command
FD59 31 7C 00                     STA LCD_CMD
FD5C 07                           RTS     

                ;--------------------------------------------
                ; Write a single character
                ; Input: A = ASCII code
                ;--------------------------------------------
FD5D 31 7C 01   LCD_WriteChar  STA LCD_DATA
FD60 07                        RTS

                ;--------------------------------------------
                ; Print null-terminated string
                ; Input:
                ;   X = address of string
                ;--------------------------------------------
FD61 0A         LCD_PrintString   LDA (X)        ; A = *X
FD62 21 00                        TEQA #0x00     ; end of string?
FD64 2C FD 6D                     JEQ LCD_PrDone
FD67 06 FD 5D                     JSR LCD_WriteChar
FD6A 05                           INCX           ; X++
FD6B 0C F4                        JRA LCD_PrintString
FD6D 07         LCD_PrDone        RTS

                         ; --------------------------------------------------------------------
                         ; Error routine
                         ; --------------------------------------------------------------------
                         ORG/0xFFB0  ; Diagnostic Error routine   
                         ;STOP        ; Stop execution
FFB0 32 FF B0   FAIL     JMP FAIL    ; Infinite Loop on error

                         ; --------------------------------------------------------------------
                         ; JSR and RTS Test subroutine
                         ; --------------------------------------------------------------------
                         ORG/0xFFC0
FFC0 30 11      TJSR1    LDA #0x11
FFC2 07                  RTS
                         ORG/0xFFC3
FFC3 30 22      TJSR2    LDA #0x22
FFC5 06 FF C0            JSR TJSR1
FFC8 07                  RTS
                         ORG/0xFFC9
FFC9 30 33      TJSR3    LDA #0x33
FFCB 06 FF C3            JSR TJSR2
FFCE 07                  RTS
                         ORG/0xFFCF
FFCF 30 44      TJSR4    LDA #0x44
FFD1 06 FF C9            JSR TJSR3
FFD4 07                  RTS
                         ORG/0xFFD5
FFD5 30 44      TJSR5    LDA #0x44
FFD7 06 FF CF            JSR TJSR4
FFDA 07                  RTS
                         ORG/0xFFDB
FFDB 30 55      TJSR6    LDA #0x55
FFDD 06 FF D5            JSR TJSR5
FFE0 07                  RTS
                         ORG/0xFFE1
FFE1 30 66      TJSR7    LDA #0x66
FFE3 06 FF DB            JSR TJSR6
FFE6 07                  RTS
                         ORG/0xFFE7
FFE7 30 77      TJSR8    LDA #0x77
FFE9 06 FF E1            JSR TJSR7
FFEC 07                  RTS
                         ORG/0xFFED
FFED 30 88      TJSR9    LDA #0x88
FFEF 06 FF E7            JSR TJSR8
FFF2 07                  RTS
                         ORG/0xFFF3
FFF3 30 99      TJSR10   LDA #0x99
FFF5 06 FF ED            JSR TJSR9
FFF8 07                  RTS
                         ; --------------------------------------------------------------------
                         ; Reset Vector
                         ; --------------------------------------------------------------------
                         ORG/0xFFFE  ; Set the Reset vector
FFFE E0                  DB 0xE0     ; MSB Reset Vector
FFFF 00                  DB 0x00     ; LSB Reset Vector


Symbol Table:
?b15                0000
?b14                0001
?b13                0002
?b12                0003
?b11                0004
?b10                0005
?b9                 0006
?b8                 0007
?b7                 0008
?b6                 0009
?b5                 000A
?b4                 000B
?b3                 000C
?b2                 000D
?b1                 000E
?b0                 000F
?w7                 0000
?w6                 0002
?w5                 0004
?w4                 0006
?w3                 0008
?w2                 000A
?w1                 000C
?w0                 000E
?l3                 0000
?l2                 0004
?l1                 0008
?l0                 000C
TEMP0               1FEC
TEMP1               1FED
TEMP2               1FEE
TEMP3               1FEF
SP                  1FF0
JSH                 1FF1
JSL                 1FF2
XH                  1FF3
XL                  1FF4
EQUAL               1FFA
CARRY               1FFB
REG_A               1FFC
IPH                 1FFE
IPL                 1FFF
DIAGLOOPCOUNTER     01E0
LCD_CMD             7C00
LCD_DATA            7C01
LEDPORT             C000
START               E000
LOOPDIAG            E005
TST01               E00B
TST02               E038
TSTOP03             E065
TSTOP04             E0FC
TSTOP05             E14E
TSTOP06             E1C6
TSTOP09             E1EA
TSTOP0A             E1F3
TSTOP0B             E231
TST0B_0             E28D
TST0B_1             E290
TST0B_2             E294
TST0B_3             E299
TST0B_4             E2A0
TST0B_5             E2B2
TST0B_6             E2B7
TST0B_7             E2CD
TST0B_8             E2D4
TST0B_9             E2D6
TST0B_10            E2D8
TST0B_11            E2ED
TST0B_12            E36A
TST0B_13            E36D
TSTOP0D             E36E
TSTOP0E             E428
TSTOP0F             E4E2
TST0F_0             E4F2
TST0F_1             E4FC
TST0F_2             E4FF
TSTOP10             E500
TSTOP11             E583
TSTOP12             E5A8
TSTOP13             E5CD
TSTOP14             E663
TSTOP15             E73F
TSTOP16             E889
TSTOP17             E8E7
TSTOP18             E92C
TSTOP19             E95F
TSTOP1A             E987
TSTOP1B             EA0E
TSTOP1C             EAA0
TSTOP1D             EC25
TSTOP1E             EDE3
TSTOP1F             EE2B
TSTOP20             EF08
TSTOP29             EFDD
TSTOP2A             F011
TSTOP2B             F0DC
TST2C               F0F7
TST2C_1             F11C
TST2C_2             F126
TST2C_3             F130
TST2C_4             F13A
TST2C_5             F144
TST2C_6             F14E
TST2C_7             F158
TST2C_8             F162
TST2C_9             F16C
TST2C_10            F176
TSTOP2D             F177
TSTOP2E             F195
TSTOP2F             F1F3
TSTOP30             F23D
TSTOP31             F297
TSTOP33             F360
TSTFB1              F39C
LOOPTST             F526
LOOPTST1            F531
LOOPTST2            F540
BLKCODESTART        F886
BLKCODEEND          F8A4
RAMDESTSTART        1000
LOOPTST47           F8B0
ENDCOPYTST47        F8C6
LOOPCNT             0100
FIBNUMB             1000
FIB32_LOOP          F8E8
FIB_VERIFY          F907
VERIFY_LOOP         F917
MSGTXT1             F977
MSGTXT2             F97E
MSGTXT3             F98A
MSGTXT4             F9C7
?clear32_l0         F9CD
?clear32_l1         F9DC
?clear32_l2         F9EB
?clear32_l3         F9FA
?clear16_w0         FA09
?clear16_w1         FA12
?clear16_w2         FA1B
?clear16_w3         FA24
?clear16_w4         FA2D
?clear16_w5         FA36
?clear16_w6         FA3F
?clear16_w7         FA48
?set32_l0_to_1      FA51
?set32_l1_to_1      FA62
?load32_l0          FA73
?load32_l1          FA87
?load32_l2          FA9B
?load32_l3          FAAF
?store32_l0         FAC3
?store32_l1         FAD7
?store32_l2         FAEB
?store32_l3         FAFF
?mov32_l1_l0        FB13
?mov32_l2_l0        FB2C
?mov32_l3_l0        FB45
?mov32_l0_l1        FB5E
?mov32_l2_l1        FB77
?mov32_l3_l1        FB90
?mov32_l0_l2        FBA9
?mov32_l1_l2        FBC2
?mov32_l3_l2        FBDB
?add16_w0_w0_w1     FBF4
?add32_l0_l0_l1     FC07
?add32_l2_l1_l0     FC2C
?add32_l3_l1_l0     FC51
?inc32_l0_l0        FC76
?inc32_0x_0x_JP     FC9B
?cmp32_l3_l2        FC9C
?cmp32_not_equal    FCC1
?mul8_w1_b1_b0      FCC7
?mul8_w1_b1_loop    FCCF
?mul8_skip_add      FCDD
?mul16_l1_w1_w0     FCE8
?mul16_l1_w1_loop   FCF3
?mul16_skip_add     FD0D
LCD_Init            FD1E
Delay40ms           FD20
Delay4ms            FD2B
LCD_Clear           FD3A
DelayClear          FD41
LCD_SetCursorPos    FD46
LCD_Row0            FD52
LCD_AddCol          FD54
LCD_WriteChar       FD5D
LCD_PrintString     FD61
LCD_PrDone          FD6D
FAIL                FFB0
TJSR1               FFC0
TJSR2               FFC3
TJSR3               FFC9
TJSR4               FFCF
TJSR5               FFD5
TJSR6               FFDB
TJSR7               FFE1
TJSR8               FFE7
TJSR9               FFED
TJSR10              FFF3
Assembly complete
